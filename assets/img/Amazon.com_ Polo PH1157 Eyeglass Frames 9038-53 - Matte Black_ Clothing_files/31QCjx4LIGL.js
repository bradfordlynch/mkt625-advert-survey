(function(p,n,v){p.execute(function(){p.when("A","page-refresh-state","web-ajax-utility","alt-page-refresh-measurement").register("page-refresh-handler",function(d,h,g,e){var c={},b=d.$,f=v,m=function(a,c){var e=this;e.clientId=a;e.persistentParams={};e.pageRefreshUrlParams="";e.deviceType="";e.doPageRefresh=function(d,f,m,h){e.persistentParams=b.extend(!0,e.persistentParams,f.Persistent);var n={};b.extend(!0,n,e.persistentParams,f["Non-Persistent"]);f=c;var p=0<=f.indexOf("?");f=f+(p?"&":"?")+((d?
"asin="+d:"")+(e.pageRefreshUrlParams?e.pageRefreshUrlParams:""));for(var v in n)null!=n[v]&&(d=n[v],p=f.slice(-1),f+="?"===p||"&"===p?"":"&",f+=v+"="+d);g.getInstance(a,f,m,h).getContent()};e.addParams=function(a){e.persistentParams=b.extend(!0,e.persistentParams,a);return!0};e.removeParams=function(a){d.each(a,function(a,b){delete e.persistentParams[a]});return!0};e.createCustomParamsMap=function(a,c){var d={Persistent:{},"Non-Persistent":{}};b.each(a,function(a,b){d.Persistent[a]=b});b.each(c,
function(a,b){d["Non-Persistent"][a]=b});return d};e.startMeasurement=function(a,b,c,d){f&&f.start(a,b,c,d)};e.stampImageLoad=function(a){f&&f.stampImageLoad(a)};e.stampFeature=function(a,b){f&&f.stampFeature(a,b)};(function(){var a=h.pageRefreshData;e.pageRefreshUrlParams=a.pageRefreshUrlParams;e.deviceType=a.deviceType})()};return{getHandlerInstance:function(a,d,g){(null==a||""===a)&&n.ueLogError&&n.ueLogError({message:"Invalid ClientId"},{logLevel:"FATAL",attribution:"PageRefreshAPI",message:"Invalid ClientId passed to getHandlerInstance of dpRefreshHandler"});
c[a]||(c[a]=new m(a,d));f||(d=g.config,f=new e(b,d.atf.marker,d.cf.marker),f.init(g.storeID,g.productGroupID));return c[a]}}});p.when("A","page-refresh-handler").register("dp-refresh-handler",function(d,h){function g(e,c,b){this.featureTriggeringRefresh=e.featureName;this.deviceType=(this.deviceTypeStateData=d.state("detail-page-device-type"))&&this.deviceTypeStateData.deviceType?this.deviceTypeStateData.deviceType:"web";this.pageRefreshUrl=c&&c.pageRefreshUrl?c.pageRefreshUrl:"/gp/twister/ajaxv2";
this.clientId="PageRefresh_"+this.deviceType+"_Client";this.DPRefreshHandler=h.getHandlerInstance(this.clientId,this.pageRefreshUrl,b)}g.prototype={doPageRefresh:function(d,c,b,f){try{this.DPRefreshHandler.doPageRefresh(d,c,b,f)}catch(g){n.ueLogError&&n.ueLogError(g,{logLevel:"ERROR",attribution:this.featureTriggeringRefresh,message:"This error is caused by the doPageRefresh method triggered by - "+this.featureTriggeringRefresh})}},createCustomParamsMap:function(d,c){var b={};try{b=this.DPRefreshHandler.createCustomParamsMap(d,
c)}catch(f){n.ueLogError&&n.ueLogError(f,{logLevel:"ERROR",attribution:this.featureTriggeringRefresh,message:"This error is caused by the createCustomParamsMap method triggered by - "+this.featureTriggeringRefresh})}return b},addParams:function(d){return d&&"object"==typeof d?this.DPRefreshHandler.addParams(d):!1},removeParams:function(d){return d&&"object"==typeof d?this.DPRefreshHandler.removeParams(d):!1},startMeasurement:function(d,c,b,f){try{this.DPRefreshHandler.startMeasurement(d,c,b,f)}catch(g){n.ueLogError&&
n.ueLogError(g,{logLevel:"ERROR",attribution:this.featureTriggeringRefresh,message:"This error is caused by the startMeasurement method triggered by - "+this.featureTriggeringRefresh})}},stampImageLoad:function(d){try{this.DPRefreshHandler.stampImageLoad(d)}catch(c){n.ueLogError&&n.ueLogError(c,{logLevel:"ERROR",attribution:this.featureTriggeringRefresh,message:"This error is caused by the startMeasurement method triggered by - "+this.featureTriggeringRefresh})}},stampFeature:function(d,c){try{this.DPRefreshHandler.stampFeature(d,
c)}catch(b){n.ueLogError&&n.ueLogError(b,{logLevel:"ERROR",attribution:this.featureTriggeringRefresh,message:"This error is caused by the startMeasurement method triggered by - "+this.featureTriggeringRefresh})}}};return g});p.when("A","jQuery").register("alt-page-refresh-ajax-scope",function(d,h){return function(d,e,c){this.scopeName=e;this.url=c;ues("t0",e,n.newTwisterInteractionStartTime);ues("ctb",e,"1");this.signalMarker=function(b){!this.markers[b]||0>=this.markers[b].conditions||0===--this.markers[b].conditions&&
"function"==typeof this.markers[b].handler&&this.markers[b].handler()};this.addlongPoleTag=function(b,c){b=b.toLowerCase();this.markers[b]&&0==this.markers[b].conditions&&0==this.markers[b].conditions&&n.ue&&"function"===typeof ue.tag&&ue.tag(c)};this.postData=function(){var b=this.scopeName;d.ajax({url:this.url,dataType:"text",timeout:4E4,error:function(){},success:function(c,a,d){ues("id",b,c);uex("ld",b)}})};var b=this;this.markers={image:{conditions:1,handler:function(){uet("ne",e);b.signalMarker("af")}},
af:{conditions:Twister.atfMarkerCount?Twister.atfMarkerCount:2,handler:function(){uet("af",e);uet("cf",e);b.signalMarker("cf")}},cf:{conditions:Twister.cfMarkerCount?Twister.cfMarkerCount:2,handler:function(){uet("cf",e);b.postData()}}}}});p.when("A","jQuery","alt-page-refresh-ajax-scope").register("alt-page-refresh-measurement",function(d,h,g){return function(d,c,b){this.atfMarker=c;this.cfMarker=b;this.scopeCount={};this.ajaxScopes={};this.url="";this.init=function(b,c){this.url="/gp/twister/dynamic-update/ajax-measurement.html/?s="+
b+"&pgid="+c+"&deviceType="+Twister.deviceType;Twister.isInstaTwisterEnabled&&(this.url+="&ptd="+Twister.productTypeName)};this.start=function(b,c,a,l){if(n.ue){this.scopeCount[b]||(this.scopeCount[b]=0);var k=b+(this.scopeCount[b]+1);this.scopeCount[b]++;var h=this.url;c&&(h+="&dimensionType="+c);"undefined"!==typeof a&&(h+="&dimensionCount="+a);"undefined"!==typeof l&&(h+="&dimensionsDisplayType="+l);this.ajaxScopes[b]=new g(d,k,h)}};this.stampImageLoad=function(b){this.ajaxScopes[b]&&(this.ajaxScopes[b].signalMarker("image"),
Twister.cfImageLongPollTag&&this.ajaxScopes[b].addlongPoleTag("cf",Twister.cfImageLongPollTag))};this.stampFeature=function(b,c){this.ajaxScopes[c]&&(b===this.atfMarker&&this.ajaxScopes[c].signalMarker("af"),b===this.cfMarker&&(this.ajaxScopes[c].signalMarker("cf"),Twister.cfHtmlLongPollTag&&this.ajaxScopes[c].addlongPoleTag("cf",Twister.cfHtmlLongPollTag)))};this.stampCustomMetrics=function(b,c){this.ajaxScopes[c]&&uet(b,this.ajaxScopes[c].scopeName)}}});p.when("A","ready").register("page-refresh-state",
function(d){var h=d.state("page-refresh-data");d=d.state("detail-page-device-type");var g={};"undefined"!==typeof h&&(g.pageRefreshUrlParams=h.pageRefreshUrlParams);"undefined"!==typeof d&&(g.deviceType=d.deviceType);return{pageRefreshData:g}});p.when("A","jQuery","dp-js-logger").register("web-ajax-utility",function(d,h,g){function e(b,c,d,a){this.scope=b;this.url=c;this.options=d;this.status=0;this.selected=!1;this.error=this.successData=this.xhr=this._status=v;this.chunks=[];this.doNotAbort=a||
!1}var c=new g("WebAjaxUtility");e._objects={};e.prototype._callback=function(){var b=arguments[0],c=Array.prototype.slice.call(arguments,1);"function"===typeof b&&b.apply(self,c)};e.prototype._canAbort=function(){return!this.doNotAbort&&1===this.status};e.prototype._isAborted=function(){return 3===this.status};e.prototype._getUrl=function(){return this.url};e.prototype._abort=function(){if(1===this.status)try{this.ajaxRequestRefence.abort(),this.status=3}catch(b){c.logFatal(b,{message:" Could not abort ajax request."})}};
e.prototype._flushChunkData=function(){var b=this;b.chunks.length&&h.map(b.chunks,function(c){b._callback(b.options.chunk,c)})};e.prototype._request=function(){var b=this;b.ajaxRequestRefence=d.get(b.url,{params:b.options.params,success:function(c,d,a){b.status=4;b.successData=c;b._status=d;b.xhr=a;b.selected&&b._callback(b.options.success,c,d,a)},error:function(c,d,a){b.status=2;b.xhr=c;b._status=d;b.error=a;b.selected&&b._callback(b.options.error,c,d,a)},abort:function(c){b.status=3;b.xhr=c;b.selected&&
b._callback(b.options.abort,c)},chunk:function(c){c&&(b.chunks.push(c),b.selected&&b._callback(b.options.chunk,c))},timeout:b.options.timeout||4E4})};e.prototype.getContent=function(){e._abortRequestsExcept(this);this.selected=!0;0===this.status?(this.status=1,this._request()):1===this.status?this._flushChunkData():4===this.status&&(this._flushChunkData(),this._callback(this.options.success,this.successData,this._status,this.xhr),d.trigger("a:pageUpdate"))};e._abortRequestsExcept=function(b){h.each(e._objects[b.scope],
function(c,d){d._canAbort()&&c!==b._getUrl()&&d._abort()})};e.getInstance=function(b,c,d,a){if(!b||!c||"object"!==typeof d)throw"Incorrect parameter passed.";e._objects[b]=e._objects[b]||{};var g=e._objects[b][c];g&&g._isAborted()&&(delete e._objects[b][c],g=v);g||(e._objects[b][c]=new e(b,c,d,a,this));return e._objects[b][c]};return e})})})(function(){var p=window.AmazonUIPageJS||window.P,n=p._namespace||p.attributeErrors;return n?n("PageRefreshAsset"):p}(),window);