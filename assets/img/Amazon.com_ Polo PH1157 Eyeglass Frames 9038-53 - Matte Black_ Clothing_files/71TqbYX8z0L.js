(function(z,B,C){z.execute(function(){z.when("A","jQuery","dp-js-logger","dp-ajax-prefetch-metrics").register("dp-ajax-prefetch",function(u,t,b,a){function g(b,f,l,e,r,d){this.scope=b;this.uniqueId=f;this.url=l;this.options=e;this.context=r;this.status=0;this.selected=!1;this.error=this.successData=this.xhr=this._status=C;this.chunks=[];this.doNotAbort=d||!1;this.prefetchMetrics=a.getInstance(this.scope)}var m=new b("dpAjaxPrefetch");g.prototype._callback=function(a,b,l,e,r){"function"===typeof a&&
a.call(self,b,l,e,r)};g.prototype._canAbort=function(){return!this.doNotAbort&&1===this.status};g.prototype._isAborted=function(){return 3===this.status};g.prototype._getUniqueId=function(){return this.uniqueId};g.prototype._abort=function(){if(1===this.status)try{this.ajaxRequestRefence.abort(),this.status=3}catch(a){m.logFatal(a,{message:" Could not abort ajax request."})}};g.prototype._flushChunkData=function(){var a=this;a.chunks.length&&t.map(a.chunks,function(b){a._callback(a.options.chunk,
b,a.context)})};g.prototype._request=function(){var a=this;a.ajaxRequestRefence=u.get(a.url,{params:a.options.params,success:function(b,l,e){a.status=4;a.successData=b;a._status=l;a.xhr=e;a.selected&&a._callback(a.options.success,b,l,e,a.context)},error:function(b,l,e){a.status=2;a.xhr=b;a._status=l;a.error=e;a.selected&&a._callback(a.options.error,b,l,e,a.context)},abort:function(b){a.status=3;a.xhr=b;a.selected&&a._callback(a.options.abort,b,a.context)},chunk:function(b){b&&(a.chunks.push(b),a.selected&&
a._callback(a.options.chunk,b,a.context))},timeout:a.options.timeout||4E4})};g.prototype.prefetchContent=function(){this.prefetchMetrics.predicted(this.uniqueId);0===this.status&&(this.status=1,this._request())};g.prototype.getContent=function(a){a&&this.prefetchMetrics.selected(this.uniqueId);g._abortPrefetchesExcept(this);this.selected=!0;0===this.status?(this.status=1,this._request()):1===this.status?this._flushChunkData():4===this.status&&(this._flushChunkData(),this._callback(this.options.success,
this.successData,this._status,this.xhr,this.context),u.trigger("a:pageUpdate"))};g._objects={};g._abortPrefetchesExcept=function(a){t.each(g._objects[a.scope],function(b,l){l._canAbort()&&b!==a._getUniqueId()&&l._abort()})};g.getInstance=function(a,b,l,e,r,d){if(!a||!b||!l||"object"!==typeof e)throw"Incorrect parameter passed.";g._objects[a]=g._objects[a]||{};var m=g._objects[a][b];m&&m._isAborted()&&(delete g._objects[a][b],m=C);m||(g._objects[a][b]=new g(a,b,l,e,r,d,this));return g._objects[a][b]};
return g});z.when("A").register("dp-js-logger-service",function(u){return function(t,b,a,g){function m(a,b,e){b=b||{};"string"===typeof a&&(b.message+=a,a=C);b.logLevel=e;B.ueLogError&&B.ueLogError(a,b)}var k=a!==C&&null!==a?a:"";g=g||!1;this.logFatal=function(a,b){m(a,b,"FATAL")};this.logError=function(a,b){m(a,b,"ERROR")};this.logCounter=function(a,b){var e=""===k?a:k+":"+a;B.ue&&B.ue.count&&ue.count(e,b)};this.logCounters=function(a){t.each(a,function(a,b){var f=k+":"+b.name;"undefined"!==typeof Twister&&
Twister.printConsoleLogs&&console.log("Logging metric: "+f+" -> "+b.value);B.ue&&B.ue.count&&ue.count(f,b.value)})};this.consoleLog=function(a){B.console&&"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log(a)};this.init=function(){var a=this;if(g){var k=function(){var e=b.getDataToUploadOnUnload();a.logCounters(e);return null};if("undefined"!==typeof ue.onunload)ue.onunload(k);else t(B).bind("beforeunload",k)}}}});z.when("A","dp-js-logger-service","twister-string-constants").register("dp-js-logger",
function(u,t,b){return function(a,g,m){function k(a){if(!a)return null;var d=g?g.jsInteractionEnabledTime:Date.now();return(a[b.TWISTER_EVENT_DATA_TIME]||Date.now())-d}function f(a){if(a.hasOwnProperty("getMetricData"))return a.getMetricData();var b=a.stringVal;a=a.hasOwnProperty("getUploadValue")?a.getUploadValue():a.hasOwnProperty("currentValue")?a.currentValue:a.initValue;return isNaN(a)?null:{value:a,name:b}}var l=this,e=u.$,r;this.createFunctionTimer=function(a){return{eventType:a,start:function(){this.startTime=
Date.now()},stop:function(){l.logImpression(this.eventType,{duration:Date.now()-this.startTime})}}};this.eventTypes={CLICK:{metricList:["M_CLICK_COUNT","M_FIRST_CLICK"]},UNAVAILABLE_SWATCH_HOVER:{metricList:["UNAVAILABLE_SWATCH_HOVER_COUNT"]},UNAVAILABLE_SWATCH_TABLET_CLICK:{metricList:["UNAVAILABLE_SWATCH_TABLET_CLICK_COUNT"]},UNAVAILABLE_SWATCH_PC_CLICK:{metricList:["UNAVAILABLE_SWATCH_PC_CLICK_COUNT"]},TWISTER_UNAVAILABILITY_NOTIFIER:{metricList:["UNAVAILABILE_VARIATIONS_COUNT","IS_UNAVAILABLITY_PRESENT"]},
HOVER:{metricList:["M_HOVER_COUNT","M_FIRST_HOVER"]},HOVER_OUT:[],CACHE_HIT:{metricList:["M_CACHE_HIT","M_CACHE_USED"]},CACHE_MISS:{metricList:["M_CACHE_MISS","M_CACHE_USED"]},PAGE_UNLOAD:{metricList:["M_CACHE_UNUSED","M_CACHE_HIT_RATIO","M_CACHE_USED_RATIO"]},REQ_DIM_CHANGED:{metricList:["M_OTHER_REQ_DIM_SELECTED_COUNT","M_REQ_DIM_CHANGE_COUNT"]},DIM_SUM_LOAD:{metricList:["M_DIM_SUM_LOAD"]},CLICK_NA:{metricList:["M_NA_CLICK_COUNT"]},DIM_INIT:{metricList:["M_DIM_PAGENATION_COUNT"]},SCROLL:{metricList:["M_VIEWED_DIM_COUNT"]},
CLICK_VARIATION:{metricList:["M_DIM_CLICK_VIEWED_DIM_COUNT"]},EXPAND_BUTTON_CLICK:{metricList:["EXPAND_BUTTON_CLICK_COUNT"]},COLLAPSE_BUTTON_CLICK:{metricList:["COLLAPSE_BUTTON_CLICK_COUNT"]},EXPANDER:{metricList:["EXPANDER_COUNT"]},HISTORY_API_SUPPORTED:{metricList:["M_HISTORY_API_SUPPORTED"]},HISTORY_API_NOT_SUPPORTED:{metricList:["M_HISTORY_API_NOT_SUPPORTED"]}};var d=function(a,d){this.stringVal=d;this.initValue=NaN;this.deferLogging=!0;this.pagenationCountName=a;this.updateFunction=function(a){var c;
c=25*Math.ceil(a[b.TWISTER_EVENT_DATA_PERCENTAGE]/25);var q=a[b.TWISTER_EVENT_DATA_DIV_METADATA][b.STRING_DIM_INDEX];this.metrics||(this.metrics={});this.metrics[q]||(this.metrics[q]={});(this.metrics[q].percentage||0)<c&&(this.metrics[q].percentage=c);this.metrics[q].pageCount=a[b.TWISTER_EVENT_DATA_COUNT];this.metrics[q].dimDisplayType=a[b.TWISTER_EVENT_DATA_DISPLAY_TYPE];"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log(this.stringVal+": index - "+q+" page - "+this.metrics[q].pageCount+
" percentage - "+this.metrics[q].percentage)};this.getMetricData=function(){if(this.metrics){var a=[],c=this;e.each(this.metrics,function(b,d){var n=c.pagenationCountName+d.pageCount;d.dimDisplayType&&(n=d.dimDisplayType+":"+n);a.push({name:n+"_"+(c.stringVal+d.percentage),value:1})});return a}}},y={M_CACHE_HIT:{stringVal:"CacheHit",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue=0<this.currentValue?this.currentValue+1:1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&
console.log("incrementing cacheHit count to "+this.currentValue)}},M_CACHE_MISS:{stringVal:"CacheMiss",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue=0<this.currentValue?this.currentValue+1:1}},M_CACHE_HIT_RATIO:{stringVal:"CacheHitRatio",initValue:NaN,deferLogging:!0,updateFunction:function(a){a=l.getMetricCurrentValue("M_CACHE_HIT");var b=l.getMetricCurrentValue("M_CACHE_MISS");if(a||b)this.currentValue=Math.round(a/(a+b)*100)}},M_CACHE_USED:{stringVal:"CacheUsed",initValue:0,
deferLogging:!0,updateFunction:function(a){this.currentValue||(this.currentValue=this.initValue,this.usedIdCache={});a=a.id;this.usedIdCache.hasOwnProperty(a)||(this.currentValue++,this.usedIdCache[a]=!0)}},M_CACHE_UNUSED:{stringVal:"CacheUnused",initValue:0,deferLogging:!0,updateFunction:function(a){if(g)a=g.twisterModel.pageRefresh.getModelCacheSize("full")-l.getMetricCurrentValue("M_CACHE_USED"),this.currentValue=0>a?0:a;else throw"EventController undefined";}},M_CACHE_USED_RATIO:{stringVal:"CacheUsedRatio",
initValue:NaN,deferLogging:!0,updateFunction:function(a){a=l.getMetricCurrentValue("M_CACHE_USED");var b=l.getMetricCurrentValue("M_CACHE_UNUSED");if(a||b)this.currentValue=Math.round(a/(a+b)*100)}},M_FIRST_CLICK:{stringVal:"FirstClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.firstClickLogged||(this.currentValue=k(a),"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("first click = "+this.currentValue),this.firstClickLogged=!0)}},M_CLICK_COUNT:{stringVal:"ClickCount",
initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue=1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("incrementing click count to "+this.currentValue)}},M_HOVER_COUNT:{stringVal:"HoverCount",initValue:0,deferLogging:!0,updateFunction:function(a){a=a.divMetaData;this.lastHoveredDivMetaData&&a&&this.lastHoveredDivMetaData.dimIndex===a.dimIndex&&this.lastHoveredDivMetaData.dimValueIndex===a.dimValueIndex||(this.lastHoveredDivMetaData=a,this.currentValue=0<this.currentValue?
this.currentValue+1:1,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("incrementing hover count to "+this.currentValue))}},M_FIRST_HOVER:{stringVal:"FirstHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.firstHoverLogged||(this.currentValue=k(a),"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("first hover = "+this.currentValue),this.firstHoverLogged=!0)}},M_OTHER_REQ_DIM_SELECTED_COUNT:{stringVal:"OtherReqDimSelectedCount",initValue:NaN,deferLogging:!0,
updateFunction:function(a){var b=a.newReqDimValueIndex;a=a.oldReqDimValueIndex;"X"===b?this.currentValue||(this.lastReqDimValueIndex=a,this.currentValue=0):this.lastReqDimValueIndex!==b&&(this.lastReqDimValueIndex=b,this.currentValue||0===this.currentValue?this.currentValue++:"X"===a?this.currentValue=0:this.currentValue=1,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("OtherReqDimSelectedCount incremented to : "+this.currentValue))}},M_REQ_DIM_CHANGE_COUNT:{stringVal:"ReqDimChangeCount",
initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue?(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("ReqDimChangeCount incremented to : "+this.currentValue)):this.currentValue=1}},M_DIM_SUM_LOAD:{stringVal:"DimSumLoadingDuration",initValue:NaN,deferLogging:!1,updateFunction:function(a){this.currentValue=a[b.TWISTER_EVENT_DATA_DURATION];"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("DimSumLoadingDuration: "+this.currentValue)}},
M_NA_CLICK_COUNT:{stringVal:"NAClickCount",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("NAClick incremented to: "+this.currentValue)}},M_DIM_PAGENATION_COUNT:{stringVal:"DimPageCount",initValue:1,deferLogging:!1,updateFunction:function(a){this.pageCount=a[b.TWISTER_EVENT_DATA_COUNT]||1;this.dimDisplayType=a[b.TWISTER_EVENT_DATA_DISPLAY_TYPE];"undefined"!==typeof Twister&&Twister.printConsoleLogs&&
console.log("DimPageCount: "+this.pageCount)},getMetricData:function(){var a=this.stringVal+(this.pageCount||1);this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:1}}},M_VIEWED_DIM_COUNT:new d("DimPageCount","ViewedVariationCount"),M_DIM_CLICK_VIEWED_DIM_COUNT:new d("DimPageCount","ViewedVariationCountBeforeClick"),EXPAND_BUTTON_CLICK_COUNT:{stringVal:"ExpandButtonClickCount",initValue:0,deferLogging:!0,updateFunction:function(a){this.dimDisplayType=a[b.TWISTER_EVENT_DATA_DISPLAY_TYPE];
this.currentValue?(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Expand Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},COLLAPSE_BUTTON_CLICK_COUNT:{stringVal:"CollapseButtonClickCount",initValue:0,deferLogging:!0,updateFunction:function(a){this.dimDisplayType=a[b.TWISTER_EVENT_DATA_DISPLAY_TYPE];
this.currentValue?(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Collapse Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},EXPANDER_COUNT:{stringVal:"ExpanderCount",initValue:0,deferLogging:!0,updateFunction:function(a){this.dimDisplayType=a[b.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?
(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Expander Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},IS_UNAVAILABLITY_PRESENT:{stringVal:"UnavailabilityPresent",initValue:NaN,deferLogging:!0,updateFunction:function(a){"undefined"===typeof this.currentValue&&(this.currentValue=0,0<a.noOfUnavailableVariations&&
(this.currentValue=1),"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("IsUnavailabilityPresent : "+this.currentValue))}},UNAVAILABILE_VARIATIONS_COUNT:{stringVal:"UnavailableVariations",initValue:NaN,deferLogging:!0,updateFunction:function(a){"undefined"==typeof this.currentValue&&(this.currentValue=a.noOfUnavailableVariations,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Possible unavailable variations present are : "+this.currentValue))}},UNAVAILABLE_SWATCH_HOVER_COUNT:{stringVal:"UnavailableSwatchHover",
initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("UnavailableSwatchHoverCount is incremented to : "+this.currentValue)}},UNAVAILABLE_SWATCH_PC_CLICK_COUNT:{stringVal:"UnavailableSwatchPCClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("UnavailableSwatchPCClickCount is incremented to : "+
this.currentValue)}},UNAVAILABLE_SWATCH_TABLET_CLICK_COUNT:{stringVal:"UnavailableSwatchTabletClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("UnavailableSwatchTabletClickCount is incremented to : "+this.currentValue)}},M_HISTORY_API_SUPPORTED:{stringVal:"HistoryAPISupported",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;
"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("History API is supported in the browser : "+this.currentValue)}},M_HISTORY_API_NOT_SUPPORTED:{stringVal:"HistoryAPINotSupported",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("History API is not supported in the browser : "+this.currentValue)}}};this.logImpression=function(a,b){try{e.each(a.metricList,function(c,
a){try{var d=y[a];d.updateFunction(b);y[a].deferLogging||r.logCounters(Array(f(d)))}catch(n){"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("metricUpdate failing for metric = "+a)}})}catch(d){"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("logImpression failed")}};this.logFatal=function(a,b){r&&r.logFatal(a,b)};this.logError=function(a,b){r&&r.logFatal(a,b)};this.logCounter=function(a,b){r.logCounter(a,b)};this.consoleLog=function(a){r&&r.logFatal(a)};this.logPresenceOfUnavailability=
function(a,b){for(var d=a.num_total_variations,c=b.dimensionValuesData,q=1,e=c.length,n=0;n<e;n++)q*=c[n].length;this.logImpression(this.eventTypes.TWISTER_UNAVAILABILITY_NOTIFIER,{noOfUnavailableVariations:q-d})};this.logUnavailableSwatchClick=function(){this.logImpression(this.eventTypes.CLICK_NA,null);var a=this.eventTypes.UNAVAILABLE_SWATCH_PC_CLICK;Twister.isTabletWeb&&(a=this.eventTypes.UNAVAILABLE_SWATCH_TABLET_CLICK);this.logImpression(a,null)};this.getDataToUploadOnUnload=function(a){this.logImpression(this.eventTypes.PAGE_UNLOAD);
var b=[];e.each(y,function(a,c){try{if(c.deferLogging){var q=f(c);q&&(e.isArray(q)?b=e.merge(q,b):b.push(q))}}catch(d){}});return b};this.getMetricCurrentValue=function(a){try{return y[a].hasOwnProperty("currentValue")?y[a].currentValue:y[a].initValue}catch(b){return y[a].initValue}};r=new t(e,l,a,m);r.init()}});z.when("A","jQuery","dp-ajax-prefetch","twister-utils","dp-js-logger").register("dimensional-summary-module",function(u,t,b,a,g){var m=new g("dpDimensionalSummary");return function(b){function f(a){d.initData.fnToDetermineSelectedVariations?
"function"===typeof d.initData.fnToDetermineSelectedVariations&&(d.currentDimCombOnGlance=d.initData.fnToDetermineSelectedVariations.call(d)):(d.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,d.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID);return a?d.currentDimCombOnGlance.split("_"):d.currentDimCombOnGlance}function l(b,e){for(var f="",c,q,k=0,n=b.length;k<n;k++)f=f+(0<k?",":"")+b[k];var l=g.extend(l,a.getQueryParams({psc:1})),l=
g.extend(l,{parentAsin:DetailPage.StateController.getState().parent_asin,productGroupId:DetailPage.StateController.getState().productGroupID});d.initData.globalAjaxParameters&&(l=g.extend(l,d.initData.globalAjaxParameters));l&&(q=g.param(l));f&&(c=!Twister.multiDimensionWeblabEnabled||"dropdown"!==e.dimType.toLowerCase()&&"swatch"!==e.dimType.toLowerCase()?e.dimType:"Dropdown",c="/gp/twister/dimension?asinList="+f+"&isDimensionSlotsAjax=1&dimSubType="+e.dimSubType+"&dimType="+c+(q?"&"+q:""));return c}
function e(a){for(var b,d=0,c=a.length;d<c;d++)b=b+(0<d?",":"")+a[d];return b}function r(b,f,h){e(b);b=l(b,h);var c={};h.params&&(c.params=h.params);c.chunk=function(c,a){var b;(b=(b=(b=(b=c&&"JSON"==c.Type)&&typeof("undefined"!==c.Value))&&typeof("undefined"!==c.Value.content))&&typeof("undefined"!==c.Value.content.twisterSlotDiv))?(h.executeChunk===C?h.chunk(c,a):h.executeChunk()&&h.chunk(c,a),d.asinDimSumCache[c.ASIN]=c):m.logFatal("The received data does not contain required properties.",{message:"[Twister]Invalid data received."})};
c.success=function(c,b,n,d){h.success&&a.typeChecker.isFunction(h.success)&&h.success(c,b,n,d)};c.error=function(c,b,n){h.error&&a.typeChecker.isFunction(h.error)&&h.error(c,b,n)};c.abort=function(c){h.abort&&a.typeChecker.isFunction(h.abort)&&h.abort(c)};c.timeout=6E4;u.get(b,{success:function(a,b,n){c.success(a,b,n,f)},chunk:function(a){c.chunk(a,f)},error:function(a,b,n){c.error(a,b,n)},abort:function(a){c.abort(a)}})}var d=this,g=u.$;d.initData=b;d.scopePrefix="dpDimSum";d.symbolForTriggeringDim=
"*";d.uniqueID="";d.urlPrefix="";d.asinDataCache={};d.glanceViewSelectedDims="";d.currentDimCombOnGlance="";d.mapOfDimToAsinMaps={};d.mapOfAsinToDimMaps={};d.asinDimSumCache={};d.scope=d.scopePrefix+"_"+d.initData.scopeSuffix;d.dimensionsList=d.initData.dimensionsList;d.dimensionValuesList=d.initData.dimensionValuesList;d.dimensionCombinationToASINMap=d.initData.dimensionCombinationToASINMap;f();d.fetchDimSumData=function(b){if(b.dimTriggeringDimSum&&a.typeChecker.isString(b.dimTriggeringDimSum))var e=
b.dimTriggeringDimSum;else throw"Wrong parameter passes to DimSumModule "+d.scope;var h=d.dimensionsList.indexOf(e);if(b){if(!b.asinList||!a.typeChecker.isArray(b.asinList))throw"Wrong parameter passed to DimSumModule "+d.scope;if(!b.chunk||!a.typeChecker.isFunction(b.chunk))throw"Wrong parameter passed to DimSumModule "+d.scope;}else throw error("No options for dimSum");e={dimIndexTriggeringDimSum:h};e.dimCombOnPage=f();var c=f(!0).slice(0);c[h]=d.symbolForTriggeringDim;h=c.join("_");e.hashKey=h;
for(var q=b.asinList,h=[],c=[],k=0,n=q.length;k<n;k++){var l=q[k];l&&(d.asinDimSumCache&&d.asinDimSumCache[l]?c.push(l):h.push(l))}q=[];q.asinListForServer=h;q.asinListForCache=c;0<q.asinListForServer.length&&r(q.asinListForServer,e,b);if(0<q.asinListForCache.length){h=q.asinListForCache;q=0;for(k=h.length;q<k;q++)c=h[q],b.chunk(d.asinDimSumCache[c],e);h.length===b.asinList.length&&b.success(C,C,C,e)}}}});z.when("A","jQuery").register("detail-page-state-controller",function(){return function(){this.state=
{};this.getState=function(){return this.state};this.setState=function(u,t){u&&t&&(this.state[u]=t)}}});z.when("A","jQuery").register("detail-page-framework",function(){return{callbacks:{},registerCallback:function(u,t,b){"after_redraw"!=u&&"asin_select"!=u||"sims-widget"!=t&&"session-similarities"!=t&&"purchase-similarities"!=t&&"buyxgety"!=t||(this.callbacks[t+"_feature_div"]=b)},registerFeature:function(){},registerFeatureConfig:function(){}}});z.when("A","twister-string-constants").register("twister-modal-resize-helper",
function(u,t){return function(){function b(b,f){b.each(function(b,e){var k=m(e);-1==e.className.indexOf(f)&&(k.outerWidth()>a.width&&(a.width=k.outerWidth()),k.outerHeight()>a.height&&(a.height=k.outerHeight()))});return a}var a={width:0,height:0},g=this,m=u.$;g.getGlanceSwatchesInRow=function(a,b){b&&b.fixModalSwatchesForThinWidths();var l=m("#twister_feature_div "+a),e=0,r=0;0<l.length&&(r=l.get(0).getBoundingClientRect().top,e++);for(var d=1,g=l.length;d<g;d++){var v=l.get(d).getBoundingClientRect();
if(5<Math.abs(r-v.top))break;else e++}b&&b.resizeSwatchesForThinWidths();return e};g.fixSize=function(a,f,l,e,r){a.removeClass("twisterSwatchWrapper");var d=b(a,e),y=B.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(r!=C){var v=r.twisterModalDiv.outerWidth(),p=g.getGlanceSwatchesInRow(f,r),h=a.first().width(),h=p*(d.width-h);0<h&&0<p&&(newModalWidth=v+h,r.setModalWidth(newModalWidth))}a.addClass("twisterSwatchWrapper");Twister.isIE8()?(a.each(function(c,a){m(a).css({"min-height":d.height+
"px","min-width":d.width+"px"})}),1100<y&&m("."+e).css({height:d.height+"px"})):m("#"+l).html(f+" { min-height:"+d.height+"px; min-width:"+d.width+"px; } ."+e+" { height: "+d.height+"px;}");g.resetBestSize()};g.resetBestSize=function(){a={width:0,height:0}}}});z.when("A","jQuery","twisterModule","dp-js-logger","page-refresh:controller","twister-controller","twister-state","twister-string-constants").register("detailPage:RefreshHandler",function(u,t,b,a,g,m,k,f){var l=B.twisterController.twisterModel.twisterState,
e=new a("dpPageRegreshHandler"),r={},d=function(a){var b=this;b.clientId=a;b.doPageRefresh=function(d){if(!Array.isArray(d))throw"Incorrect parameters passed to doPageRefresh for clientId "+b.clientId;d=l.getRequestContextForExternalTwisterUpdates(d);try{g.updatePage(d,f.EVENT_TYPE_CLICK)}catch(h){e.logFatal(h,{message:" Error doing page-refresh for clientId "+a})}};b.getURLParamObject=function(a,d,c){if(!a||null==c)throw"Incorrect parameters passed to getURLParams for clientId "+b.clientId;return{key:encodeURIComponent(a),
value:encodeURIComponent(d),isPersistent:c}}};return{getHandlerInstance:function(a){if(null==a||""==a)throw"Incorrect clientID passed to getHandlerInstance of dpRefreshHandler";r[a]||(r[a]=new d(a));return r[a]}}});z.when("A","jQuery","detailPage:RefreshHandler","twister-string-constants").register("your-module-name",function(u,t,b,a){B.handleClickForMyButton=function(){for(var a=[],m="",k="",f=0,l=arguments.length;f<l;f++)k=arguments[f],0==f?m=b.getHandlerInstance(k):(k=m.getURLParamObject(k[0],
k[1],k[2]),a.push(k));m.doPageRefresh(a)}});z.when("A","jQuery","dp-ajax-prefetch","detail-page-framework","dp-js-logger","twister-string-constants","page-refresh:meta-cache","page-refresh:page").register("page-refresh:controller",function(u,t,b,a,g,m,k,f){var l={intermediateEOS:1,EOS:1},e=new g("dpTwister");return new function(){function r(c,a){if(!(1<a.recordImpressionPending)){var b=a.impressionCallbackData&&a.impressionCallbackData.relatedRequestID,d="/gp/twister/impression.html/?relatedRequestID="+
b;b?u.delay(function(){u.get(d,{success:function(c){e.logCounter("dpTwisterImpression",1)},timeout:4E4,error:function(c,a,b){e.logCounter("dpTwisterImpressionFailed",1)}})},1500):e.logFatal("prefetchRequestId does not exists. twister prefetch ajax requests are not returning the metadata.");a.recordImpressionPending++;k.set(c,a)}}function d(c,a,b){"undefined"===typeof a.forceFullPrefetch&&(a.forceFullPrefetch=b||m.NO,k.set(c,a));return a.forceFullPrefetch===m.NO&&h.metadata[c.mType]&&!h.metadata[c.mType].fullyPrefetchable}
function g(c,a){v(c,function(c){f.executeClientFeatures(c,a)})}function v(c,a){var b=[c];c.relatedContext&&b.push(c.relatedContext);t.each(b,function(c,b){a.apply(h,[b])})}function p(a,e){v(a,function(a){f.fadeInFeatures(a);var q=a.uniqueID,l=a.url;md=k.get(a);h.newPrefetchWeblab&&md.prefetchSent&&d(a,md)&&(q+="_prefetch_1",l+="&prefetchParam=1",md.hotFeaturesPending=!0);md.requestSent=!0;k.set(a,md);var p=h.newPrefetchWeblab&&e===m.EVENT_TYPE_CLICK;b.getInstance("dpTwister",q,l,c,a,a.doNotAbort).getContent(p)})}
var h=this;h.metadata={};h.newPrefetchWeblab=!1;h.page=f;h.twisterPSCParam="psc";var c={chunk:function(c,a){var b=c.ASIN,d=c.Value,e=c.FeatureName;if(!l[e]){var h=k.get(a);"twister-request-metadata"===e?(h.impressionCallbackData=u.parseJSON(d.content[e]),k.set(a,h)):f.refreshFeature(b,e,d)}},success:function(a,d,n,e){a=k.get(e);a.hotFeaturesPending&&(a.hotFeaturesPending=!1,k.set(e,a),b.getInstance("dpTwister",e.uniqueID+"_prefetch_2",e.url+"&prefetchParam=2",c,e,e.doNotAbort).getContent());a.recordImpressionPending&&
r(e,a)},error:function(c,a,b){Twister.$("#variations-overlay").hide();Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());e.logFatal(a+" "+b)},abort:function(c){e.logFatal(" Ajax aborted: "+c)},timeout:4E4};h.prefetchPage=function(a,e){v(a,function(a){var q=a.uniqueID,f=a.url,h=k.get(a);h.requestSent||(d(a,h,e)&&(q+="_prefetch_1",f+="&prefetchParam=1"),h.prefetchSent=!0,h.recordImpressionPending=h.recordImpressionPending||1,h.requestSent=!0,k.set(a,h),b.getInstance("dpTwister",
q,f,c,a,a.doNotAbort).prefetchContent())})};h.updatePage=function(c,b){if(b===m.EVENT_TYPE_CLICK||b===m.EVENT_TYPE_DROPDOWN_CHANGE){if(!c.partialState){if(a.callbacks["sims-widget_feature_div"])a.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());f.startMeasurement(c)}p(c,b)}g(c,b)};h.reloadPage=function(c){var a;if(B.location.search){a=B.location.search;var b={};a=a.substring(a.indexOf("?")+1).split("&");for(var d=0;d<a.length;d++){var e=a[d].split("=");e[0]&&0<=e[0].length&&
(b[decodeURIComponent(e[0])]=decodeURIComponent(e[1]))}a=b}var f,b="/dp/"+c.childAsin;c.partialState?a[h.twisterPSCParam]&&delete a[h.twisterPSCParam]:a[h.twisterPSCParam]=1;(c="?"+t.param(a))&&b&&(f=b+c);B.location.href=f};h.init=function(c){h.newPrefetchWeblab=c.newPrefetchWeblab;t.each(c.contextMetaData,function(c,a){if(a.elementList){for(var b=a.elementList.length,q=!0,d=0;d<b;d++)if(!a.elementList[d].isPrefetchable){q=!1;break}h.metadata[c]||(h.metadata[c]={});h.metadata[c].fullyPrefetchable=
q}});f.init(c)}}});z.when("A","jQuery","page-refresh-measurement","twister-string-constants","dp-js-logger").register("page-refresh:page",function(u,t,b,a,g){var m=new g("dpTwister");return new function(){var k=this;k.measurement=C;k.config={partial:{},full:{},parent:{},master:{}};k.dimensionsDisplayType=C;k.initializeMeasurement=function(a){var l=a.measurement;k.dimensionsDisplayType=a.dimensionsDisplayType;k.measurement=new b(t,l.atf.marker,l.cf.marker);k.measurement.init(a.storeID,a.productGroupID)};
k.init=function(b){k.initializeMeasurement(b);t.each(b.contextMetaData,function(b,e){var f=[],d={},m=e.elementList||[],g=m.length;d[a.EVENT_TYPE_MOUSEOVER]={};d[a.EVENT_TYPE_CLICK]={};for(var p=0;p<g;p++){var h=t("#"+m[p].divToUpdate);f.push("#"+m[p].divToUpdate);h.length&&m[p].customClientFunction&&(m[p].updateOnHover&&(d[a.EVENT_TYPE_MOUSEOVER][m[p].divToUpdate]=h.attr("customfunctionname")),d[a.EVENT_TYPE_CLICK][m[p].divToUpdate]=h.attr("customfunctionname"))}k.config[b].affectedFeatures=f.join(",");
k.config[b].clientFeatures=d})};k.startMeasurement=function(b){var l,e,r=k.dimensionsDisplayType;null!=b.divMetaData&&(l=b.divMetaData.dimDisplayType);"undefined"!==typeof b.currentDimCombID&&(e=b.currentDimCombID.split(a.CHAR_UNDERSCORE).length);this.measurement.start(b.newAsin,l,e,r)};k.fadeInFeatures=function(a){t(this.config[a.mType].affectedFeatures).css({opacity:.5})};k.executeClientFeatures=function(b,l){t.each(k.config[b.mType].clientFeatures[l===a.EVENT_TYPE_CLICK||l===a.EVENT_TYPE_DROPDOWN_CHANGE?
a.EVENT_TYPE_CLICK:a.EVENT_TYPE_MOUSEOVER],function(a,l){try{eval("var twisterCustomFunction = "+l+";"),twisterCustomFunction(b.reactID,DetailPage.StateController,function(){k.measurement.stampImageLoad(b.newAsin)})}catch(d){m.logFatal(d)}})};k.refreshFeature=function(a,b,e){var k,d;try{b&&e&&e.content&&(d=e.content[b],"undefined"!==typeof d&&(k=t("#"+b),k.html(d),k.css({opacity:""})))}catch(g){b=b||"NoFeatureName",m.logFatal(g,{message:" Error in feature "+b})}this.measurement.stampFeature(b,a)}}});
z.when("twister-string-constants").register("page-refresh:meta-cache",function(u){return{data:{},set:function(t,b){var a=this.getKey(t);return a?this.data[a]=b:C},get:function(t){t=this.getKey(t);return this.data[t]||{}},getKey:function(t){var b;t&&t.newAsin&&(b=t.mType===u.MTYPE_PARENT?t.mType+t.newAsin:t.mType===u.MTYPE_MASTER?t.mType+t.id:t.mType+t.newAsin+t.reactID);if(!b)throw"Twister PageRefresh::MetaCache:getKey incorrect context passed.";return b}}});z.when("A","jQuery").register("page-refresh-ajax-scope",
function(u,t){return function(b,a,g){this.scopeName=a;this.url=g;ues("t0",a,B.newTwisterInteractionStartTime);ues("ctb",a,"1");this.signalMarker=function(a){!this.markers[a]||0>=this.markers[a].conditions||0===--this.markers[a].conditions&&"function"==typeof this.markers[a].handler&&this.markers[a].handler()};this.addlongPoleTag=function(a,b){a=a.toLowerCase();this.markers[a]&&0==this.markers[a].conditions&&0==this.markers[a].conditions&&B.ue&&"function"===typeof ue.tag&&ue.tag(b)};this.postData=
function(){var a=this.scopeName;b.ajax({url:this.url,dataType:"text",timeout:4E4,error:function(){},success:function(b,l,e){ues("id",a,b);uex("ld",a)}})};var m=this;this.markers={image:{conditions:1,handler:function(){uet("ne",a);m.signalMarker("af")}},af:{conditions:Twister.atfMarkerCount?Twister.atfMarkerCount:2,handler:function(){uet("af",a);uet("cf",a);m.signalMarker("cf")}},cf:{conditions:Twister.cfMarkerCount?Twister.cfMarkerCount:2,handler:function(){uet("cf",a);m.postData()}}}}});z.when("A",
"jQuery").register("page-refresh-cache",function(u,t){return function(){this.data={};this.getValue=function(b,a){return null==this.data[b]?null:a?this.data[b][a]:this.data[b]};this.setValue=function(b,a,g){if(null==this.data[b]||this.data[b].pending)this.data[b]={};this.data[b][a]=g};this.clear=function(b){this.data[b]=null}}});z.when("A","jQuery","page-refresh-refresh","page-refresh-measurement","page-refresh-model","detail-page-framework").register("page-refresh-manager",function(u,t,b,a,g,m){return function(k,
f,l,e,r){this.$=k;this.model={};this.refresh=new b(k,e,r);this.contextMetaData=f;this.measurement=new a(k,l.atfMarker,l.cfMarker);this.init=function(a,b){for(var e in this.contextMetaData)this.model[e]=new g(k,this.contextMetaData[e].AJAXUrl,this.contextMetaData[e].elementList,e.toString());this.measurement.init(a,b)};this.getModelCacheSize=function(a){var b=0;this.model.hasOwnProperty(a)&&k.each(this.model[a].cache.data,function(a,d){d.hasOwnProperty("cacheStatus")&&("preFetched"!==d.cacheStatus&&
"completeFetched"!==d.cacheStatus||b++)});return b};this.react=function(a,b){for(var e in this.model)b||this.model[e].finishAjaxCall(this.model[e].currentRequestId,1);e=0;for(var f=a.length;e<f;e++){var h=a[e];b||this.model[h.type].finishAjaxCall(this.model[h.type].currentRequestId,2);var c=this.model[h.type].getUpdateData(this,h);this.refresh.startRefresh(c);this.model[h.type].makePendingCallBacks()}};this.pageRefreshHandler=function(a,b,e,f){if(!f.noRefresh)for(var h in f.content)try{this.refresh.doRefresh(h,
f.content[h]);if(e.isFinishRefreshReq)if(this.refresh.finishRefresh(h),"session-similarities_feature_div"==h||"purchase-similarities_feature_div"==h||"buyxgety_feature_div"==h){if(m.callbacks[h])m.callbacks[h]()}else"zeroes-buy-box_feature_div"===h&&Twister.isIEBrowser(k)&&k("#"+h).css({opacity:"",zoom:1});this.measurement.stampFeature(b,a)}catch(c){}}}});z.when("A","jQuery","page-refresh-ajax-scope").register("page-refresh-measurement",function(u,t,b){return function(a,g,m){this.atfMarker=g;this.cfMarker=
m;this.scopeCount={};this.ajaxScopes={};this.url="";this.init=function(a,b){this.url="/gp/twister/dynamic-update/ajax-measurement.html/?s="+a+"&pgid="+b+"&deviceType="+Twister.deviceType;Twister.isInstaTwisterEnabled&&(this.url+="&ptd="+Twister.productTypeName)};this.start=function(k,f,l,e){if(B.ue){this.scopeCount[k]||(this.scopeCount[k]=0);var r=k+(this.scopeCount[k]+1);this.scopeCount[k]++;var d=this.url;f&&(d+="&dimensionType="+f);"undefined"!==typeof l&&(d+="&dimensionCount="+l);"undefined"!==
typeof e&&(d+="&dimensionsDisplayType="+e);this.ajaxScopes[k]=new b(a,r,d)}};this.stampImageLoad=function(a){this.ajaxScopes[a]&&(this.ajaxScopes[a].signalMarker("image"),Twister.cfImageLongPollTag&&this.ajaxScopes[a].addlongPoleTag("cf",Twister.cfImageLongPollTag))};this.stampFeature=function(a,b){this.ajaxScopes[b]&&(a===this.atfMarker&&this.ajaxScopes[b].signalMarker("af"),a===this.cfMarker&&(this.ajaxScopes[b].signalMarker("cf"),Twister.cfHtmlLongPollTag&&this.ajaxScopes[b].addlongPoleTag("cf",
Twister.cfHtmlLongPollTag)))};this.stampCustomMetrics=function(a,b){this.ajaxScopes[b]&&uet(a,this.ajaxScopes[b].scopeName)}}});z.when("A","jQuery","page-refresh-cache").register("page-refresh-model",function(u,t,b){return function(a,g,m,k){this.$=a;this.pendingCallBacks={};this.pendingCallBacksASIN="";this.cache=new b;this.AJAXUrl=g;this.AJAXRequests={};this.requestIdHash={};this.elementList=m;this.currentRequestId=null;this.pendingCallbacksList={};this.immediateCallbacksList=[];this.elementsToRefresh=
[];this.modelType=k;this.getNewRequestId=function(){for(var a=0;100>a;a++){var b=a.toString();if(!this.requestIdHash.hasOwnProperty(b))return this.requestIdHash[b]=!0,b}};this.removeRequestId=function(a){"string"!=typeof a&&(a=a.toString());this.requestIdHash.hasOwnProperty(a)&&delete this.requestIdHash[a]};this.executeActionItems=function(a,b,e,k,d){e=e.divToUpdate;for(var m=0,g=a.length;m<g;m++){var p=a[m];if("addToImmediate"==p)p={},p.id=b,p.key=e,this.immediateCallbacksList.push(p);else if("addToElementsRefresh"==
p||"addToElementsRefreshWithLoading"==p)d.push(e+("addToElementsRefreshWithLoading"==p?",loadingBar":""));else if("updateCache"==p)p={handler:this,callbackType:"updateCache"},this.addToPendingCallbacksList(b,e,p);else if("customClientFunction"==p){var p={handler:this,callbackType:"customClientFunction"},h={};h.refreshHandler=k;p.callbackParams=h;this.addToPendingCallbacksList(b,e,p)}else if("doRefreshAndFinish"==p||"doRefresh"==p)p={},p.handler=k,p.callbackType="doRefresh",h={isFinishRefreshReq:1},
p.callbackParams=h,this.addToPendingCallbacksList(b,e,p)}};this.getAjaxCallContext=function(a,b,e,k,d,m){b=[];var g=d=0,p="notFetched";this.cache.getValue(a,"cacheStatus")&&(p=this.cache.getValue(a,"cacheStatus"));for(var h=0,c=this.elementList.length;h<c;h++){var q=this.elementList[h],w=q.divToUpdate,n=[],x=1,F=0,t=0,L=0;"0"==q.isPrefetchable&&(x=0,g=1);"1"==q.customClientFunction&&(F=1,x=0);"1"==q.updateOnHover&&(t=1);"1"==q.loadingBar&&(L=1);if(!m||t){if(e)if(F||!x||this.cache.getValue(a,w))continue;
else n.push("updateCache"),d||(d=1);else F?(n.push("customClientFunction"),n.push("addToImmediate")):this.cache.getValue(a,w)?(n.push("doRefresh"),n.push("addToImmediate")):(n.push("updateCache"),n.push("doRefreshAndFinish"),L?n.push("addToElementsRefreshWithLoading"):n.push("addToElementsRefresh"),d||(d=1));(1==e&&"preFetched"==p||0==e&&"completeFetched"==p||1==e&&"completeFetched"==p)&&1==d&&(d=0);this.executeActionItems(n,a,q,k,b)}}(1==e&&"preFetched"==p||0==e&&"completeFetched"==p||1==e&&"completeFetched"==
p)&&1==d&&(d=0);m&&d&&(d=0);d&&this.cache.setValue(a,"cacheStatus",e?g?"preFetching":"completeFetching":"preFetched"==p?"hotFeaturesFetching":"completeFetching");a={};a.isAjaxCallReq=d;a.elementsToRefresh=b;return a};this.getUpdateData=function(a,b){for(var e=b.idList,k=[],d=[],m=[],g=[],p=0,h,c,q,w,n,x=1,F=0,t=e.length;F<t;F++){c=e[F].id;q=e[F].asin;w=e[F].isPrefetch;h=e[F].requiredDivs;h=this.getAjaxCallContext(c,q,w,a,h,e[F].isHover);n=h.elementsToRefresh;for(var L=0,E=n.length;L<E;L++)g.push(n[L]);
if(h.isAjaxCallReq){p=1;w=w?1:"hotFeaturesFetching"==this.cache.getValue(c,"cacheStatus")?2:0;if(0==w||2==w)x=0;d.push(c);m.push(q);k.push(w)}}if(p){e={};e.asinList=m.join(",");e.id=d.join(",");e.prefetchParam=k.join(",");e.managerHandler=a;e.modelType=this.modelType;e.containsOnlyPrefetches=x;try{this.doAjaxCall(e)}catch(u){}}this.elementsToRefresh=g.slice();return g};this.makeCallback=function(a,b,e,k){var d=e.handler,m=e.callbackType;e=e.callbackParams;null==k&&(k=this.cache.getValue(a,b));if("function"==
typeof d)d(a,b,e,k);else if("doRefresh"==m)d.pageRefreshHandler(a,b,e,k);else if("customClientFunction"==m)try{d.callCustomClientFunction(a,b,e,k)}catch(g){}else"updateCache"==m&&d.updateCache(a,b,e,k)};this.makePendingCallBacks=function(a,b,e){var k;if(a){if("object"===typeof this.pendingCallbacksList[a])if(b){k=this.pendingCallbacksList[a][b];if(!k){k=[];var d={handler:this,callbackType:"updateCache"};k.push(d)}for(var m=0,g=k.length;m<g;m++){d=k[m];try{this.makeCallback(a,b,d,e)}catch(p){}}this.pendingCallbacksList[a][b]&&
delete this.pendingCallbacksList[a][b]}else{for(d in this.pendingCallbacksList[a])for(k=this.pendingCallbacksList[a][d],m=0,g=k.length;m<g;m++)this.makeCallback(a,b,callbackargs,e);delete this.pendingCallbacksList[a]}}else{a=0;for(g=this.immediateCallbacksList.length;a<g;a++)b=this.immediateCallbacksList[a],this.makePendingCallBacks(b.id,b.key,null);this.immediateCallbacksList=[]}};this.addToPendingCallbacksList=function(a,b,e){this.pendingCallbacksList.hasOwnProperty(a)||(this.pendingCallbacksList[a]=
{});this.pendingCallbacksList[a].hasOwnProperty(b)||(this.pendingCallbacksList[a][b]=[]);this.pendingCallbacksList[a][b].push(e)};this.doAjaxCall=function(a){Twister.useVariationsOverlay&&0===Twister.remainingAjaxCalls&&Twister.$("#variations-overlay").show();Twister.remainingAjaxCalls+=1;var b=this.getNewRequestId();this.currentRequestId=b;var e=a.managerHandler,k=this.AJAXUrl+a.asinList+"&isFlushing=2&id="+a.id+"&prefetchParam="+a.prefetchParam+"&mType="+a.modelType;Twister.isInstaTwisterEnabled&&
(k+="&dpEnvironment="+Twister.dpEnvironment);var d={};if(Twister.useAuiAjax){var m=this,k=Twister.A.ajax(k,{method:"get",chunk:function(a){m.AJAXHandler(null,a,AJAXFlushUtils.ajaxReadyState.LOADING)},success:function(){m.AJAXHandler(null,null,AJAXFlushUtils.ajaxReadyState.DONE);--Twister.remainingAjaxCalls;0===Twister.remainingAjaxCalls&&Twister.$("#variations-overlay").hide()},error:function(){Twister.$("#variations-overlay").hide();--Twister.remainingAjaxCalls;Twister.showErrorMessageOnFailure&&
(alert(Twister.errorMessageOnFailure),location.reload());Twister.printConsoleLogs&&console.logs("ajax call failed")},timeout:4E4});d.streamingXhrRef=k}d.ajaxParams=a;d.managerHandler=e;this.AJAXRequests[b]=d};this.abortAllAjaxCalls=function(){for(requestId in this.requestIdHash)this.finishAjaxCall(requestId,!0)};this.finishAjaxCall=function(a,b){if(a){var e=this.AJAXRequests[a],k=e.streamingXhrRef,d=e.ajaxParams,e=d.id.split(","),d=d.containsOnlyPrefetches;if(1!=b||!d){this.pendingCallbacksList={};
this.immediateCallbacksList=[];if(b)for(k&&"function"===typeof k.abort&&k.abort(AJAXFlushUtils.ajaxHandlerCode.ABORT),k=0,d=e.length;k<d;k++)if(this.cache.getValue(e[k])){var m=this.cache.getValue(e[k],"cacheStatus");"preFetching"==m||"completeFetching"==m?b?this.cache.clear(e[k]):this.cache.setValue(e[k],"cacheStatus","preFetching"==m?"preFetched":"completeFetched"):"hotFeaturesFetching"==m&&this.cache.setValue(e[k],"cacheStatus",b?"preFetched":"completeFetched")}this.elementsToRefresh=[];this.removeRequestId(a);
delete this.AJAXRequests[a];this.currentRequestId=null}}};this.updateCache=function(a,b,e,k){"intermediateEOS"==b||"EOS"==b?(b=this.cache.getValue(a,"cacheStatus"),"preFetching"==b?this.cache.setValue(a,"cacheStatus","preFetched"):"completeFetching"!=b&&"hotFeaturesFetching"!=b||this.cache.setValue(a,"cacheStatus","completeFetched")):this.cache.setValue(a,b,k)};this.callCustomClientFunction=function(b,k,e,r){var d=a("#"+k).attr("customFunctionName");if(d){var m=e.refreshHandler,g=DetailPage.StateController.getState().current_asin;
r=function(){m.measurement.stampImageLoad(g)};e=Twister.useAui?r:null;if(d=Twister.useAui?eval("var customFunction = "+d+"; customFunction")(b,DetailPage.StateController,e):eval(d)(b,DetailPage.StateController,e)){e={isFinishRefreshReq:0};if(!Twister.useAui){var p;if("twister-main-image"==k&&g){p=document.getElementById("main-image");if(!p){var h=document.getElementById("main_image_0");h&&(p=(p=h.getElementsByTagName("img"))?p[0]:null)}p&&(p.onload=r)}}m.pageRefreshHandler(b,k,e,d);Twister.useAui||
-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&p&&p.complete&&r()}}};this.AJAXHandler=function(a,b,e){if(e==AJAXFlushUtils.ajaxReadyState.DONE)return this.finishAjaxCall(this.currentRequestId,0),AJAXFlushUtils.ajaxHandlerCode.OK;for(a=0;1>a;a++){var k=b;e=k.ASIN;b=k.Value;k=k.FeatureName;"intermediateEOS"==k||"EOS"==k?this.updateCache(e,k,null,b):this.makePendingCallBacks(e,k,b)}return AJAXFlushUtils.ajaxHandlerCode.OK};this.AJAXErrorHandler=function(a,b,e){(a=a.xhrStatus)||(a=e);return a}}});
z.when("A","jQuery").register("page-refresh-refresh",function(u,t){return function(b,a,g){this.$=b;this.loadingBarHtml=a;this.loadingBarHtml2=g;this.doRefresh=function(a,k){b("#"+a).html(k)};this.startRefresh=function(a){if(a)for(var k=0,f=a.length;k<f;k++){var l=a[k].split(","),e=l[0],r=!0,d=!1;if("buy-box_feature_div"==e||"more-buying-choices_feature_div"==e||"session-similarities_feature_div"==e&&b.browser.msie)r=!1;1<l.length&&"loadingBar"==l[1]&&(d=!0);r&&!Twister.useVariationsOverlay&&b("#"+
e).css("opacity","0.5");d&&this.appendLoadingBar(e)}};this.appendLoadingBar=function(a){var k=b("#"+a);"moreBuyingChoices_feature_div"==a||k.attr("loadingBarSet")||(k.attr("loadingBarSet","1"),"more-buying-choices_feature_div"==a?(k=b("#more-buying-choice-content-div"),k.html(this.loadingBarHtml2)):(a=k.find("h2, h1, b"),0<a.length&&(a=b(a[0]),a.css({display:"inline",padding:"0px"}),a.after(b(this.loadingBarHtml)))))};this.finishRefresh=function(a){var k=!0,f=!0;"buy-box_feature_div"==a&&(f=k=!1);
if("session-similarities_feature_div"==a&&b.browser.msie||"more-buying-choices_feature_div"==a)k=!1;var l="0";"more-buying-choices_feature_div"==a&&(l="1");k&&b("#"+a).css({opacity:"",zoom:l});f&&b("#"+a).removeAttr("loadingBarSet")}}});z.when("A").register("evdd-utils",function(u){return function(){this.PopulateEVDD=function(t,b,a,g){var m={},k,f;for(k in t)f=a[k],"undefined"!=typeof f&&(masterDimValIndex=f[0],slaveDimValIndex=f[1],g==masterDimValIndex&&(m[slaveDimValIndex]=t[k]));"function"===typeof b.dimensionViewHandlersMap[1].updateViewWithPriceInfo&&
b.dimensionViewHandlersMap[1].updateViewWithPriceInfo(m)}}});z.when("A","jQuery","dp-js-logger").register("dp-ajax-prefetch-metrics",function(u,t,b){function a(a){this.scope="dpPre"+a;this.data={}}new b("PrefetchMetrics");a.prototype._count=function(a,b){var k=this.scope+a,f;B.ue&&B.ue.count&&(f="undefined"!==typeof b?(f=ue.count(k,b))||b:(f=ue.count(k))||0);return f};a.prototype._incrementCounter=function(a){this._count(a,(this._count(a)||0)+1)};a.prototype._record=function(a,b,k){this.data[b]=this.data[b]||
{};this.data[b][a]||(this.data[b][a]=k||(new Date).getTime(),"predicted"==a?this._incrementCounter("Predicted"):"selected"==a&&this.data[b].predicted?(a=this.data[b].selected-this.data[b].predicted,this.data[b].lookahead=a,this._incrementCounter("PredictedSelect"),this._count("LookAhead"+this._count("PredictedSelect"),a),this._count("LookAhead",a)):"selected"!=a||this.data[b].predicted||this._incrementCounter("UnpredictedSelect"))};a.prototype.setCounter=function(a,b){this._count(a,b)};a.prototype.predicted=
function(a,b){this._record("predicted",a,b)};a.prototype.selected=function(a,b){this._record("selected",a,b)};a._allInstances={};a.getInstance=function(b){if(!b)throw"Undefind scope. scope is a required parameter";a._allInstances[b]||(a._allInstances[b]=new a(b));return a._allInstances[b]};return a});z.when("A").register("scroll-event-handler",function(u){return function(t,b,a){if(b){var g=u.$,m,k=(new Date).getTime();g(b).bind("scroll",function(b){var l=Date.now();m&&l-k<t&&clearTimeout(m);k=l;m=
setTimeout(function(){a(b)},t)})}}});z.when("A","twister-utils","twister-string-constants","legacy-popover").register("twister-beaconized-evdd",function(u,t,b){return function(a,g){function m(){var a=8+d(y).height(),a={localContent:v,location:"bottom",showOnHover:!1,showCloseButton:!1,skin:null,clone:!1,controlCallbacks:!0,locationOffset:[-2,-a],closeEventInclude:"CLICK_OUTSIDE",forceAlignment:!0,group:"DonsBoxDropDowns",width:null};c=d(y).amazonPopoverTrigger(a);d(document).bind("touchend click",
function(){w=!1;c.amznPopoverHide()})}function k(a){w=!0;a=a.currentTarget.id.split("_");twisterController.handleClick({dimIndex:r.dimOrder,dimValueIndex:a[a.length-1]});w&&(c.amznPopoverHide(),w=!1);return!1}function f(c){d(c.currentTarget).addClass("evdd-row-hovered")}function l(c){d(c.currentTarget).removeClass("evdd-row-hovered");return!1}function e(c){d(c.currentTarget).removeClass("evdd-row-hovered");k(c);return!1}var r=this,d=u.$,y,v,p,h,c,q={},w=!1;r.dimType="evdd";r.dimNameDisplayString;
r.dimData;r.dimensionsMap;r.dimNameDisplayString;r.dimValuesDisplayData;r.dimName;r.dimOrder;r.isMasterDim=!1;r.updateView=function(a){var b=t.getDimStyleData(a.dimCombID,r.dimValuesDisplayData.length,r.dimOrder,r.twisterControllerHandle.twisterAvailabilityCache,r.displayConfigStylesData),e,f,k,l=-1;a=0;l="";c.amznPopoverHide();w=!1;for(var m=0,g=b.length;m<g;m++)e=b[m],f=q[e.style],k="#"+r.dimName+"_"+m,"evdd-row-selected"===f&&(l=m,l=r.dimValuesDisplayData[l]),"available"!==e.style&&"selected"!==
e.style||a++,$rowElement=d(k),$rowElement.removeClass(h).addClass(f),$rowElement.find(".evdd-row-snake-wrapper").show(),$rowElement.find(".evdd-row-price-info-wrapper").html(""),$rowElement.find(".evdd-row-prime-badge-wrapper").html("");b=!1;r.isMasterDim||1!==a||(b=!0);a=b;d(y).find("button").text(l);d(p).text(l);a?(d(y).addClass("evdd-hidden"),d(p).removeClass("evdd-hidden")):(d(p).addClass("evdd-hidden"),d(y).removeClass("evdd-hidden"))};r.updateViewWithPriceInfo=function(c){var a,b,q;for(a in c)b=
c[a],q="#"+r.dimName+"_"+a,q=d(q),q.find(".evdd-row-snake-wrapper").hide(),q.find(".evdd-row-price-info-wrapper").html(b[2]),q.find(".evdd-row-prime-badge-wrapper").html(b[3])};(function(){var c;r.dimOrder=g[b.STRING_DIM_ORDER];r.dimName=g[b.STRING_DIM_NAME];r.dimensionsMap=g[b.STRING_DIMENSIONS_MAP];r.dimNameDisplayString=g[b.STRING_DIMENSION_DISPLAY_STRING];r.dimValuesDisplayData=g[b.STRING_DIMENSION_VALUES_DATA];r.displayConfigStylesData=g[b.STRING_DISPLAY_CONFIG_STYLES_DATA];r.twisterControllerHandle=
g[b.STRING_TWISTER_CONTROLLER_HANDLE];r.initialTwisterState=g[b.STRING_TWISTER_INITIAL_STATE_KEY];c=r.initialTwisterState.getCurrentDimCombID();r.dimData=t.getDimStyleData(c,r.dimValuesDisplayData.length,r.dimOrder,r.twisterControllerHandle.twisterAvailabilityCache,r.displayConfigStylesData);r.isMasterDim=!1;"0"===r.dimOrder&&(r.isMasterDim=!0);r.dimNameDisplayString=g[b.STRING_DIMENSION_DISPLAY_STRING];y="#evdd-button-"+r.dimName;v="#evdd-table-wrapper-"+r.dimName;p="#evdd-singleton-"+r.dimName;
q.invalid=r.isMasterDim?"evdd-row-default":"evdd-row-hidden";q.available="evdd-row-default";q.selected="evdd-row-selected";h="evdd-hidden evdd-row-hovered evdd-row-hidden evdd-row-default evdd-row-selected";m();for(var a=0,w=r.dimData.length;a<w;a++)c="#"+r.dimName+"_"+a,d(c).bind("click",k).bind("touchend",e).bind("touchstart",f).bind("mouseenter",f).bind("mouseleave",l)})()}});z.when("A","twister-string-constants","twister-variations-data","twister-view","twister-model","twister-model-new","twister-state",
"twister-availabilty-cache","twister-utils","evdd-utils","dp-js-logger","TwisterCore","twister-data-translator","twister-productization-view","page-refresh-view").register("twister-controller",function(u,t,b,a,g,m,k,f,l,e,r,d,y,v,p){return function(h,c){var q=this,w=u.$;q.logger=new r(null,this,!0);q.twisterJSInitData=c;q.pageRefreshRefactor=c.pageRefreshRefactor;q.twisterVariationsData=new b(c);q.twisterAvailabilityCache=new f(q.twisterVariationsData,c);q.initTwisterState=new k(c,q.twisterVariationsData,
q.twisterAvailabilityCache);if(c[t.PRODUCTIZATION_ENABLED]){q.productizationView;var n=y.getTranslatedData(c),n=new d(n);q.productizationView=new v(n);q.pageRefreshView=new p(n,c,r)}q.twisterView=new a(q,q.initTwisterState,c,q.twisterVariationsData,q.twisterAvailabilityCache,n);q.twisterModel=q.pageRefreshRefactor?new m(q,c,q.twisterVariationsData,q.productizationView):new g(q,h,c,q.twisterVariationsData,q.twisterAvailabilityCache);w("#twister .swatches a").remove();w("#twisterNonJsData").html("");
q.jsInteractionEnabledTime=Date.now();q.logger.logPresenceOfUnavailability(q.twisterJSInitData,q.twisterVariationsData);q.onInitializeTwister=function(){"undefined"!==typeof q.twisterView.dimensionViewHandlersMap&&q.twisterView.dimensionViewHandlersMap&&w.each(q.twisterView.dimensionViewHandlersMap,function(c,a){if("function"===typeof a.onInitializeTwister)a.onInitializeTwister()})};q.populateEVDD=function(c){var a=this.twisterView,b=this.twisterVariationsData.asinToDimIndexMapData,n=this.twisterModel.twisterState.getMaster();
c&&(new e).PopulateEVDD(c,a,b,n)};q.handleClick=function(c){this.divMetaData=c;var a=q.initTwisterState.getCurrentDimCombID(),b=l.reconstructCombinationWithDimValue(a,c.dimIndex,c.dimValueIndex);B.newTwisterInteractionStartTime=new Date;l.isSwatchSelected(c,q.twisterVariationsData)||a===b||(this.enableMouseOut=0,this.twisterModel.handleClick(c),q.twisterAvailabilityCache.isDimCombinationAvailable(b)||q.logger.logUnavailableSwatchClick())};q.handleExternalViewClick=function(c,a){try{q.handleClick(c)}catch(b){(new r(a,
this)).logFatal(b,{message:"[Failed to hand over click event of external view]"})}};q.handleMouseOver=function(c){if("undefined"!=typeof touchDeviceDetected&&touchDeviceDetected)return this.handleClick(c),!0;this.enableMouseOut=1;this.twisterModel.handleMouseOver(c);return!0};q.handleExternalViewMouseOver=function(c,a){try{q.handleMouseOver(c)}catch(b){(new r(a,this)).logFatal(b,{message:"[Failed to hand over mouse over event of external view]"})}};q.handleMouseOut=function(c,a,b){1===this.enableMouseOut&&
this.twisterModel.handleMouseOut(c,a,b)};q.handleExternalViewMouseOut=function(c,a,b,n){try{q.handleMouseOut(c,a,b)}catch(d){(new r(n,this)).logFatal(d,{message:"[Failed to hand over mouse out event of external view]"})}};q.handleDropdownOnChange=function(c,a){a.dimValueIndex=parseInt(c.value.split(",")[0]);B.newTwisterInteractionStartTime=new Date;this.twisterModel.twisterState.setPreHoverData(a);this.twisterModel.handleDropdownChange(a)};q.registerExternalView=function(c,a){q.twisterModel.registerExternalView(c,
a)}}});z.when("A","twister-shelf","twister-counter","twister-vodd","twister-beaconized-evdd","twister-native-evdd","twister-dimension-views-swatch","twister-dimension-views-dropdown","twister-dimension-views-singleton","twister-string-constants").register("twister-dimension-view-factory",function(u,t,b,a,g,m,k,f,l,e){var r=u.$;return{getDimensionSubViewObject:function(d,y,v,p,h){var c,q=d.dimensionsDisplayType[v],w=d.dimensionsDisplaySubType[v],n=d.dimensions[v],x=d.dimensions,F=d.dimensionsDisplay[v],
G=[],L=r.isArray(Twister.isImmersiveViewEnabled)?Twister.isImmersiveViewEnabled[v]:!1;dimensionValuesData=y.dimensionValuesData[v];displayConfigStylesData=y.displayConfigStylesData[q];maxSwatchesForImmersiveView=d.maxSwatchesForImmersiveView[v];if("undefined"!==typeof d.isIconPresentForDimensionValue)G=d.isIconPresentForDimensionValue[v];else for(i=0;i<y.dimensionValuesData[v].length;i++)G.push(0);q===e.TWISTER_DIMENSION_VIEW_SWATCH?c=k:q===e.TWISTER_DIMENSION_VIEW_DROPDOWN?c=L?TwisterIMDD:f:q===
e.TWISTER_DIMENSION_VIEW_SINGLETON?c=l:q===e.TWISTER_DIMENSION_VIEW_EVDD?c=r("html").hasClass("a-lt-ie8")?m:g:q===e.TWISTER_DIMENSION_VIEW_VODD?c=a:q===e.TWISTER_DIMENSION_VIEW_COUNTER?c=b:q===e.TWISTER_DIMENSION_VIEW_SHELF&&(c=t);y=dimensionValuesData;var q=displayConfigStylesData,L=maxSwatchesForImmersiveView,E={};E[e.STRING_DIM_ORDER]=v;E[e.STRING_DIM_NAME]=n;E[e.STRING_DIMENSIONS_MAP]=x;E[e.STRING_DIMENSION_DISPLAY_STRING]=F;E[e.STRING_DIMENSION_VALUES_DATA]=y;E[e.STRING_DISPLAY_CONFIG_STYLES_DATA]=
q;E[e.STRING_TWISTER_CONTROLLER_HANDLE]=p;E.isImmersiveViewEnabled=r.isArray(Twister.isImmersiveViewEnabled)?Twister.isImmersiveViewEnabled[v]:Twister.isImmersiveViewEnabled;E.isSlotsEnabled=r.isArray(Twister.isSlotsEnabled)?Twister.isSlotsEnabled[v]:Twister.isImmersiveViewEnabled;E[e.STRING_TWISTER_INITIAL_STATE_KEY]=h;E[e.STRING_MAX_SWATCHES_IMMERSIVE_VIEW]=L;E.isIconPresentForDimensionValue=G;E.dimensionDisplaySubType=w;return new c(d,E)}}});z.when("A").execute(function(){"function"===typeof uet&&
uet("bb","clickToTwister",{wb:1})});z.when("twisterModule").execute(function(u){"function"===typeof uex&&"function"===typeof uet&&(uet("be","clickToTwister",{wb:1}),uet("be","TwisterAUIWait",{wb:1}),uex("ld","clickToTwister",{wb:1}),uex("ld","TwisterAUIWait",{wb:1}))});z.when("A","twister-string-constants","twister-js-init-mason-data","twister-js-init-dpx-data","twister-controller","page-refresh-manager","dimensional-summary-module","dp-js-logger").execute(function(u,t,b,a,g,m,k,f){function l(){"undefined"!=
typeof amznJQ?amznJQ.declareAvailable("newTwister"):z.register("newTwister",function(){return B.newTwister});z.register("twisterModule",function(){return{getState:function(){return DetailPage.StateController.getState()}}});"undefined"!=typeof amznJQ?(amznJQ.declareAvailable("pageRefreshJS"),amznJQ.declareAvailable("dpf")):(z.register("pageRefreshJS",function(){return B.pageRefreshJS}),z.register("dpf",function(){return B.pageRefreshJS}))}function e(a){var b={};a.extend(b,{ajaxReadyState:{NONE:-1,
UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},ajaxHandlerCode:{OK:0,IGNORE:1,RETRY:2,RELOAD:3,TIMEOUT:4,ABORT:5,FATAL:6,INVALID_RESP:7,INCOMPLETE_RESP:8,PAGELET_FATAL:9,DEBUG_NOAJAX:10},serverCode:{ERROR:-1,OK:200,TIMEOUT:408},shouldReload:function(a){return!1}});B.AJAXFlushUtils=b}B.Twister={};var r=B.Twister;r.$=u.$;r.DimensionViews={};var d=new f("dpTwister");u.on.ready(function(){r.A=u;if(!u.$.isEmptyObject(a)){var f=a.updateDivLists;r.dpEnvironment=a.dpEnvironment;r.isInstaTwisterEnabled=
!0;r.productTypeName=b.productTypeName;r.isImmersiveViewEnabled=a.isImmersiveViewEnabledOnDim?a.isImmersiveViewEnabledOnDim:a.isImmersiveViewEnabled;r.isSlotsEnabled=a.isSlotsEnabled;r.isImmersiveViewEnabledOnPage=a.isImmersiveViewEnabled;r.isImmersiveExperience=a.isImmersiveExperience?a.isImmersiveExperience:a.isImmersiveViewEnabled;r.multiDimensionWeblabEnabled=a.multiDimensionWeblabEnabled?a.multiDimensionWeblabEnabled:!1;r.immersivePartialStateMessage=a.immersivePartialStateMessage?a.immersivePartialStateMessage:
"";r.immersiveFullySelectedStateMessage=a.immersiveFullySelectedStateMessage?a.immersiveFullySelectedStateMessage:"";r.immersiveBannersPresent=a.immersiveBannersPresent?a.immersiveBannersPresent:!1;r.globalAjaxParameters={};r.isTabletWeb=a.isTabletWeb;var v=b.contextMetaData,p=v.full,h=v.master,c=v.parent,v=v.partial;b.dimensionSelectionData=a.dimensionSelectionData;a.dimensionsDisplayType?b.dimensionsDisplayType=a.dimensionsDisplayType:(d.logCounter("dpxDisplayTypePropertyUndefined",1),b.dimensionsDisplayType||
d.logCounter("masonDisplayTypePropertyUndefined",1));b.dimensionsDisplaySubType=a.dimensionsDisplaySubType?a.dimensionsDisplaySubType:[];b.ajaxUrlParams=a.ajaxUrlParams;b.displayTypeProperties=a.displayTypeProperties?a.displayTypeProperties:[];b.maxSwatchesForImmersiveView=a.maxSwatchesForImmersiveView?a.maxSwatchesForImmersiveView:[];b.dimensionsDisplayType&&"counter"===b.dimensionsDisplayType[0]&&"undefined"===typeof a.displayTypeProperties[0].expandedViewEnabled&&(b.useCounterConfig=!0,b.expandedViewEnabled=
a.expandedViewEnabled?a.expandedViewEnabled:[],b.minAsinForExpandedView=a.minAsinForExpandedView?a.minAsinForExpandedView:[],b.minAsinForExpandedScroll=a.minAsinForExpandedScroll?a.minAsinForExpandedScroll:[]);if("undefined"!==typeof a.twisterUpdateURLAppend){var q=b.twisterUpdateURLInfo,w=q.immutableURLPrefix,n=q.immutableParams,x=a.twisterUpdateURLAppend.immutableParams,F;for(F in x)if("function"!==typeof x.hasOwnProperty||x.hasOwnProperty(F))w+=(-1==w.indexOf("?")?"?":"&")+F+"="+x[F],n[F]=x[F];
q.immutableURLPrefix=w;r.globalAjaxParameters=x}b[t.PRODUCTIZATION_ENABLED]=b[t.PRODUCTIZATION_ENABLED]&&"1"==b[t.PRODUCTIZATION_ENABLED]?!0:!1;a.shouldUseDPXTwisterData&&(b.dimToAsinMapData=a.dimensionToAsinMap,b.asinToDimIndexMapData=a.asinToDimensionIndexMap,b.dimensionValuesData=a.dimensionValuesData,b.variation_values=a.variationValues,b.asin_variation_values=a.asinVariationValues,b.reactId=a.reactId,b.currentDimCombID=a.currentDimensionCombinationId,b.selected_variation_values=a.selectedVariationValues,
b.dimensionHierarchyData=a.dimensionHierarchyData,b.dimensionDisplayMap=b.dimensionDisplayMap,b.topHierarchicalDimensionIndex=a.topHierarchicalDimensionIndex,b.hierarchicalPivoting=a.hierarchicalPivoting,b.isIconPresentForDimensionValue=a.isIconPresentForDimensionValue,b["use-early-twister-init"]&&(b.current_asin=a.currentAsin,b.parent_asin=a.parentAsin,b.deletedLandingAsinInfo=a.deletedLandingAsinInfo,b.num_total_variations=a.num_total_variations,b.dimensions=a.dimensions,b.unselectedDimCount=a.unselectedDimCount,
b.selected_variations=a.selected_variations,b.dimensionValuesDisplayData=a.dimensionValuesDisplayData,b.prirotizeReqPrefetch=a.prioritizeReqPrefetch,b.num_variation_dimensions=a.num_variation_dimensions,b.num_total_variations=a.num_total_variations,b.dimensionsDisplay=a.dimensionsDisplay,b.variationDisplayLabels=a.variationDisplayLabels));null!=f.full&&(p.elementList=null!=p.elementList?f.full.concat(p.elementList):f.full);null!=f.master&&(h.elementList=null!=h.elementList?f.master.concat(h.elementList):
f.master);null!=f.parent&&(c.elementList=null!=c.elementList?f.parent.concat(c.elementList):f.parent);null!=f.partial&&(v.elementList=null!=v.elementList?f.partial.concat(v.elementList):f.partial)}f=b.isTablet;B.twisterInitPrefetchMode=b.twisterInitPrefetchMode;B.jqupgrade=b.jqupgrade;r.useDropdownThumbnail=f;r.useVariationsOverlay=f;r.showErrorMessageOnFailure=f;r.remainingAjaxCalls=0;r.errorMessageOnFailure="We are sorry.  Amazon has encountered an error.  Please try again.";r.isLoggingEnabled=
b.isLoggingEnabled;r.printConsoleLogs=b.printConsoleLogs;r.deviceType=b.deviceType;r.useAui=1;r.useAuiAjax=1;f=b.measurement.atf.marker;r.atfMarkerCount=b.measurement.atf.count;p=b.measurement.cf.marker;r.cfMarkerCount=b.measurement.cf.count;r.disableJsInteractions=b.disableJsInteractions?b.disableJsInteractions:!1;r.cfImageLongPollTag=b.measurement.cf.longPollImageTag;r.cfHtmlLongPollTag=b.measurement.cf.longPollHtmlTag;f=new m(u.$,b.contextMetaData,{atfMarker:f,cfMarker:p,logChannel:"twister"},
b.loadingBarHtml,b.loadingBarHtml2);B.twisterController=new g(f,b);f={};f.dimensionsList=b.dimensions;f.dimensionValuesList=b.dimensionValuesData;f.dimensionCombinationToASINMap=b.dimToAsinMapData;f.scopeSuffix="twister";f.globalAjaxParameters=r.globalAjaxParameters;r.dimensionalSummaryModule=new k(f);e(u.$);l();if("function"===typeof B.twisterController.onInitializeTwister)B.twisterController.onInitializeTwister()});r.isIEBrowser=function(a){return a.browser.msie||!!navigator.userAgent.match(/Trident/)};
r.isIE8=function(){var a=r.A.$;return a("html").hasClass("a-lt-ie9")};return r});z.when("A").register("twister-data-translator",function(u){function t(a){var g=[],m=a.selected_variation_values;b.each(a.dimensions,function(a,b){m.hasOwnProperty(b)&&g.push({dimKey:b,val:m[b]})});return g}var b=u.$;return{getTranslatedData:function(a){var b={},m={},k=a.deviceType,f=a.ajaxTimeout;m.ajaxUrlParams=a.ajaxUrlParams;m.deviceType=k;m.ajaxTimeout=f;b.config=m;var m={},k=a.dimToAsinMapData,l;for(l in k)if(k.hasOwnProperty(l)){var f=
k[l],e=l.split("_").join(":");m[e]=f}b.dimCombinations=m;b.dimensionDisplayText=a.variationDisplayLabels;l=[];m=a.dimensions;k=a.dimensionSelectionData;f=a.variation_values;for(e=0;e<m.length;e++){var r={},d=m[e];r.dimKey=d;r.isRequired=k[e].isRequired?!0:!1;r.size=f[d].length;l.push(r)}b.dimensionInfo=l;b.dimensionList=a.dimensions;b.dimtoValueMap=a.variation_values;b.initDimCombination=t(a);return b}}});z.when("A","twister-state","twister-utils","detail-page-framework","twister-string-constants",
"dp-js-logger").register("twister-model",function(u,t,b,a,g,m){return function(k,f,l,e,r){function d(a,b,n){b=0;try{for(;b<c.externalViews.length;)c.externalViews[b].updateView(a,c.twisterState,n),b++}catch(d){(new m(externalViewNames[b])).logFatal(d,{message:"[Failed to update external view from TwisterModel]"})}}function g(a){var b,n,d,e,f,h=c.twisterState.parentASIN,k;a?(b=c.twisterState.reactId,n=c.twisterState.hoveredReactId,d=c.twisterState.unselectedDimCount,e=0<=c.twisterState.hoveredDimCombID.search(/X/)?
1:0,f=c.twisterState.hoveredAsin):(b=c.twisterState.previousReactId,n=c.twisterState.reactId,d=c.twisterState.previousPartialState,e=c.twisterState.partialState,f=c.twisterState.getCurrentASIN());k=c.twisterVariationsData.asinToDimIndexMapData[f];c.twisterVariationsData.useMS&&k&&f&&v(c.fetchMasterIDList,"m"+k[0],f,0,a);0===e?(v(c.fetchFullIDList,f,f,0,a),c.prioritizeReqPrefetch=0):0===d?(v(c.fetchPartialIDList,n,f,0,a),v(c.fetchParentIDList,h,h,0,a),c.prioritizeReqPrefetch=1):b!==n&&v(c.fetchPartialIDList,
n,f,0,a)}function v(a,b,n,d,e){e||(e=0);1!=c.idsList[b]&&b&&n&&(!c.prefetchFixWeblab||n!==c.twisterState.parentASIN||"full"!==a.type)&&a&&(c.idsList[b]=1,a.data.push({id:b,asin:n,isPrefetch:d,isHover:e}))}function p(a){a||(a=0);var b=[];0<c.fetchParentIDList.data.length&&b.push({type:"parent",idList:c.fetchParentIDList.data});0<c.fetchPartialIDList.data.length&&b.push({type:"partial",idList:c.fetchPartialIDList.data});0<c.fetchFullIDList.data.length&&b.push({type:"full",idList:c.fetchFullIDList.data});
0<c.fetchMasterIDList.data.length&&b.push({type:"master",idList:c.fetchMasterIDList.data});0<b.length&&(a||c.pageRefresh.measurement.stampCustomMetrics("ns",c.twisterState.currentASIN),c.pageRefresh.react(b,a));c.fetchParentIDList.data=[];c.fetchPartialIDList.data=[];c.fetchFullIDList.data=[];c.fetchMasterIDList.data=[];c.idsList={};c.prefetchCount=0}function h(a,d){for(var n={},e="",f=0;f<d.length;f++)e=null,c.twisterState.isDimSelected(f)&&(e=d[f],"(Please Select)"===e&&(e=null)),null!==e&&(e=b.htmlUnescape(e)),
n[c.viewHandle.dimensionsMap[f]]=e;DetailPage.StateController.setState(a+"_variations",n)}var c=this;c.twisterControllerHandle=k;c.pageRefresh=f;c.twisterJSInitData=l;c.twisterVariationsData=e;c.twisterAvailabilityCache=r;c.twisterState;c.prefetchCount=0;c.preHoverClass="";c.fetchParentIDList={type:"parent",data:[]};c.fetchPartialIDList={type:"partial",data:[]};c.fetchFullIDList={type:"full",data:[]};c.fetchMasterIDList={type:"master",data:[]};c.idsList={};c.prefetchFixWeblab=0;c.prioritizeReqPrefetch=
0;c.externalViews=[];c.externalViewNames=[];c.registerExternalView=function(a,b){try{c.externalViews.push(a),c.externalViewNames.push(b)}catch(n){(new m(b)).logFatal(n,{message:"[Failed to register external view with TwisterModel]"})}};c.handleMouseOver=function(a){var e;null!==a&&(c.twisterState.updateStateOnMouseOver(a),!b.isSwatchSelected(a,c.twisterVariationsData)||c.twisterVariationsData.useMS)&&(e=c.twisterVariationsData.getDimensionValuesDisplayData(c.twisterState.hoveredAsin),c.twisterVariationsData.useMS||
h("hovered",e),this.viewHandle.updateView(a,c.twisterState,"mouseOver"),d(a,c.twisterState,"mouseOver"),g(1),p(1))};c.handleDropdownChange=function(a){c.handleClick(a)};c.handleClick=function(q,e,n){var f=n?"mouseOut":"click",k,l,r=0;k=e;l=c.twisterState.getCurrentASIN();c.twisterVariationsData.useMS&&q&&b.isSwatchSelected(q,c.twisterVariationsData)&&(r=1);n||(n=0);if(null!==k||null!==q)if(k=c.twisterState.updateStateOnClick(q,e,f)){k=c.twisterState.getCurrentASIN();if(!n&&l!==k&&!c.twisterState.partialState&&
a.callbacks["sims-widget_feature_div"])a.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());c.twisterState.partialState||n||c.pageRefresh.measurement.start(k);l=c.twisterVariationsData.getDimensionValuesDisplayData(k);h("selected",l);h("hovered",l);c.twisterState.partialState||n||c.pageRefresh.measurement.stampCustomMetrics("bb",k);c.viewHandle.updateView({},c.twisterState,f);d(q,c.twisterState,f);c.twisterState.partialState||n||c.pageRefresh.measurement.stampCustomMetrics("be",
k);1!==r&&(g(n),p(n))}};c.handleMouseOut=function(a,d,n){d=c.twisterState.getCurrentASIN();!c.twisterVariationsData.useMS&&b.isSwatchSelected(a,c.twisterVariationsData)||c.handleClick(null,d,1)};(function(){var a;c.twisterJSInitData&&(c.twisterState=c.twisterControllerHandle.initTwisterState,c.MAX_PREFETCH_COUNT=c.twisterJSInitData.prefetchCount,c.prioritizeReqPrefetch=c.twisterJSInitData.prioritizeReqPrefetch,c.prefetchFixWeblab=c.twisterJSInitData.prefetchFixWeblab,a=c.twisterState.getCurrentASIN(),
a=c.twisterVariationsData.getDimensionValuesDisplayData(a),c.viewHandle||(c.viewHandle=c.twisterControllerHandle.twisterView),h("selected",a),h("hovered",a));c.pageRefresh.init(c.twisterJSInitData.storeID,c.twisterJSInitData.productGroupID)})()}});z.when("A","jQuery","twister-state","twister-utils","twister-string-constants","page-refresh:controller","accessibility-helper","dp-js-logger").register("twister-model-new",function(u,t,b,a,g,m,k,f){return function(b,e,r,d){function y(c,a,b){a=0;try{for(;a<
q.externalViews.length;)q.externalViews[a].updateView(c,q.twisterState,b),a++}catch(d){(new f(externalViewNames[a])).logFatal(d,{message:"[Failed to update external view from TwisterModel]"})}}function v(b,n,f,l){function p(c){var a=[];c.variation_label_order.forEach(function(b){c.selected_variations[b]&&a.push(c.variation_display_labels[b]+" = "+c.selected_variations[b])});return q.twisterJSInitData[g.STRING_ACCESSIBILITY_CURRENT_SELECTION]+a.join(" , ")}if(n&&!q.twisterVariationsData.useMS&&a.isSwatchSelected(n,
q.twisterVariationsData))return!1;if(q.twisterState.updateStateOnClick(n,f,l,b)){f=q.twisterVariationsData.getDimensionValuesDisplayData(f);h(l);c("selected",f);c("hovered",f);q.viewHandle.updateView(n,q.twisterState,l);y(n,q.twisterState,l);switch(l){case g.EVENT_TYPE_DROPDOWN_CHANGE:case g.EVENT_TYPE_CLICK:n=p(DetailPage.StateController.getState()),k.announceText(n)}Twister.disableJsInteractions?l!==g.EVENT_TYPE_CLICK&&l!==g.EVENT_TYPE_DROPDOWN_CHANGE||m.reloadPage(b):l!==g.EVENT_TYPE_CLICK&&l!==
g.EVENT_TYPE_DROPDOWN_CHANGE||!e[g.PRODUCTIZATION_ENABLED]?m.updatePage(b,l):(l=q.twisterState.getProductizedTwisterSelection(b.newDimCombID),d&&d.handleClick(l,b));return!0}}function p(c,a,b,d,e){if(c&&1<q.twisterVariationsData.dimensionsMap.length){q.viewHandle.updateViewAfterTwisterUpdate(b,q.twisterState,e);c=0;try{for(;c<q.externalViews.length;)q.externalViews[c].updateViewAfterTwisterUpdate(b,q.twisterState,e),c++}catch(h){(new f(externalViewNames[c])).logFatal(h,{message:"[Failed to update external view after twister update from TwisterModel]"})}}}
function h(c){if(c==g.EVENT_TYPE_CLICK||c==g.EVENT_TYPE_DROPDOWN_CHANGE){c=q.twisterState.getCurrentDimCombID().split("_");for(var a={},b=0,d=q.twisterState.dimensionSelectionData.length;b<d;b++)a[q.twisterState.twisterJSInitData.dimensions[b]]="1"==q.twisterState.dimensionSelectionData[b].isRequired&&"0"==q.twisterState.dimensionSelectionData[b].isSelected&&"X"===c[b]?"-1":c[b];DetailPage.StateController.setState("selected_variation_values",a)}}function c(c,a){for(var b={},d="",e=0;e<a.length;e++)d=
null,q.twisterState.isDimSelected(e)&&(d=a[e],"(Please Select)"===d&&(d=null)),b[q.viewHandle.dimensionsMap[e]]=d;DetailPage.StateController.setState(c+"_variations",b)}var q=this;q.twisterControllerHandle=b;q.twisterJSInitData=e;q.twisterVariationsData=r;q.pageRefresh=m.page;q.twisterState;q.externalViews=[];q.externalViewNames=[];q.registerExternalView=function(c,a){try{q.externalViews.push(c),q.externalViewNames.push(a)}catch(b){(new f(a)).logFatal(b,{message:"[Failed to register external view with TwisterModel]"})}};
q.prefetch=function(c,a){var b=q.twisterState.getRequestContext(c,!0);m.prefetchPage(b,a)};q.handleMouseOver=function(b){if(!b||q.twisterVariationsData.useMS||!a.isSwatchSelected(b,q.twisterVariationsData)){var n=q.twisterState.getHoverContext(b);q.twisterState.updateStateOnMouseOver(b,n);var d=q.twisterVariationsData.getDimensionValuesDisplayData(n.newAsin);q.twisterVariationsData.useMS&&(!b||b.dimDisplayType!==g.TWISTER_DIMENSION_VIEW_VODD&&b.dimDisplayType!==g.TWISTER_DIMENSION_VIEW_SHELF&&b.dimDisplayType!==
g.TWISTER_DIMENSION_VIEW_COUNTER)||c("hovered",d);DetailPage.StateController.setState("hovered_asin",n.newAsin);this.viewHandle.updateView(b,q.twisterState,g.EVENT_TYPE_MOUSEOVER);y(b,q.twisterState,g.EVENT_TYPE_MOUSEOVER);Twister.disableJsInteractions||m.updatePage(n,g.EVENT_TYPE_MOUSEOVER)}};q.handleClick=function(c){var a=q.twisterState.getRequestContext(c),b=v(a,c,a.childAsin,g.EVENT_TYPE_CLICK);p(b,a,c,a.childAsin,g.EVENT_TYPE_CLICK)};q.handleMouseOut=function(c){c=q.twisterState.getCurrentContext(c);
v(c,null,c.currentAsin,g.EVENT_TYPE_MOUSEOUT)};q.handleDropdownChange=function(c){var a=q.twisterState.getRequestContext(c);v(a,c,a.childAsin,g.EVENT_TYPE_DROPDOWN_CHANGE);p(a,c,a.childAsin,g.EVENT_TYPE_DROPDOWN_CHANGE)};(function(){if(q.twisterJSInitData){q.viewHandle||(q.viewHandle=q.twisterControllerHandle.twisterView);q.twisterState=q.twisterControllerHandle.initTwisterState;var a=q.twisterState.getCurrentASIN(),a=q.twisterVariationsData.getDimensionValuesDisplayData(a);c("selected",a);c("hovered",
a);m.init(e);u.on("dp:twister:prefetch",function(c,a){q.prefetch(c,a)})}})()}});z.when("A","twister-utils","twister-string-constants").register("twister-native-evdd",function(u,t,b){return function(a,g){var m=this,k=u.$,f;m.dimType="evdd";m.dimNameDisplayString;m.dimName;m.dimOrder;m.isMasterDim=!1;m.updateView=function(a){a=t.getDimStyleData(a.dimCombID,m.dimValuesDisplayData.length,m.dimOrder,m.twisterControllerHandle.twisterAvailabilityCache,m.displayConfigStylesData);var b,r="";k(f).empty();for(var d=
0,g=a.length;d<g;d++)if(rowData=a[d],b=rowData.style,"invalid"!==b||m.isMasterDim)b="selected"===b?"selected":"",rowId="#native-"+m.dimName+"_"+d,b='<option id="'+rowId+'" value="'+d+'," '+b+">"+m.dimValuesDisplayData[d]+"</option>",r+=b;k(f).html(r)};m.dimOrder=g[b.STRING_DIM_ORDER];m.dimName=g[b.STRING_DIM_NAME];m.dimValuesDisplayData=g[b.STRING_DIMENSION_VALUES_DATA];m.isMasterDim=!1;"0"===m.dimOrder&&(m.isMasterDim=!0);m.dimNameDisplayString=g[b.STRING_DIMENSION_DISPLAY_STRING];m.displayConfigStylesData=
g[b.STRING_DISPLAY_CONFIG_STYLES_DATA];m.twisterControllerHandle=g[b.STRING_TWISTER_CONTROLLER_HANDLE];f="#evdd-select-"+m.dimName;k(f).change(function(){var a=k(f).val(),a=parseInt(a.split(",")[0]);twisterController.handleClick({dimIndex:m.dimOrder,dimValueIndex:a})})}});z.when("A","twister-utils","detail-page-state-controller","twister-string-constants").register("twister-state",function(u,t,b,a){return function(g,m,k){function f(c){c.mType===a.MTYPE_PARENT&&c.relatedContext&&(c=c.relatedContext);
return c}function l(b,f,n){var h=c.extend(!0,{},b);h.mType=a.MTYPE_MASTER;h.id="m"+n[0];h.relatedContext=b;h.doNotAbort=!0;h.url=e(h,f,[]);h.uniqueID=d(h,[]);return h}function e(a,b,n){var d=h.twisterJSInitData.twisterUpdateURLInfo,e=d.immutableURLPrefix,f=d.immutableParams,d=d.mutableParams,k=h.twisterJSInitData.contextMetaData[a.mType].mTypeSpecificURLParams,l={};keyItr=0;l=c.extend(!0,{},d,k);if(null!=n)for(var k=0,p=n.length;k<p;k++){var m=n[k];if(!f.hasOwnProperty(m.key)){var g=m.key,v=m.value;
l[g]=v;m.isPersistent&&(d[g]=v)}}for(var y in l)null!=l[y]&&(e+="&"+y+"="+l[y]);e+="&asinList="+a.newAsin+"&isFlushing=2&dpEnvironment="+Twister.dpEnvironment+"&id="+a.id+"&mType="+a.mType;b&&(e+="&prefetchRequest=1");r()&&(e+="&isTryState=true");return e}function r(){var c=!1,a=u.state("pwState");a&&(c=a.isTryState);return c}function d(a,b){var n="",d=a.mType,e=[],f=c.extend(!0,{},h.twisterJSInitData.twisterUpdateURLInfo.mutableParams);if(null!=b)for(var k=0,l=b.length;k<l;k++){var p=b[k];f[p.key]=
p.value}for(var m in f)f.hasOwnProperty(m)&&e.push(m);e.sort();k=0;for(l=e.length;k<l;k++)p=e[k],null!=p&&null!=f&&(n+=p+"="+f[p]+"&");n+="mType="+d+"&id="+a.id;r()&&(n+="&isTryState=true");return n}function y(c){var b=c[a.STRING_DIM_INDEX],n=c[a.STRING_DIM_VALUE_INDEX];c=h.getCurrentDimCombID().split("_");c[b]=-1===n?"X":n;c=c.join("_");return h.twisterAvailabilityCache.gAsinToRender(c,b)}function v(c,b){var n=h.getCurrentDimCombID().split("_"),d=n.length,e=h.twisterVariationsData.asinToDimIndexMapData[c],
f=-1,k;if(e)e=e.slice(0);else for(e=[],k=0;k<d;k++)e[k]="X";null!==b&&b!==C&&(f=b[a.STRING_DIM_INDEX]);for(var l=0;l<d;l++)(k=h.dimensionSelectionData[l][a.STRING_IS_REQUIRED])&&l!==parseInt(f)&&e[l]!=n[l]&&(e[l]="X",h.sizeSwatch&&0!=h.partialState&&(h.dimensionSelectionData[l][a.STRING_IS_SELECTED]=0)),-1!==parseInt(f)&&-1===parseInt(b[a.STRING_DIM_VALUE_INDEX])&&(e[f]="X");return e.join("_")}function p(c,b){for(var n=c.split("_"),d=0;d<h.dimensionSelectionData.length;d++)1===h.dimensionSelectionData[d][a.STRING_IS_REQUIRED]&&
0!==b&&(n[d]="X");return n.join("_")}var h=this,c=u.$;h.twisterJSInitData=g;h.twisterVariationsData=m;h.twisterAvailabilityCache=k;h.parentASIN="";h.currentASIN="";h.dimensionSelectionData={};h.unselectedDimCount=-1;h.master="";h.currentDimCombID="";h.preHoverClass="";h.hoveredReactId="";h.hoveredAsin="";h.hoveredDimCombID="";h.partialState="";h.previousPartialState="";h.previousReactId="";h.previousAsin="";h.sizeSwatch=!1;h.setMaster=function(c){h.master=c};h.getMaster=function(){return h.master};
h.getCurrentASIN=function(){return h.currentASIN};h.setCurrentASIN=function(c){c&&(h.currentASIN=c)};h.getCurrentDimCombID=function(){return h.currentDimCombID};h.setCurrentDimCombID=function(c){c&&(h.currentDimCombID=c)};h.isDimSelected=function(c){return 1===h.dimensionSelectionData[c][a.STRING_IS_SELECTED]};h.setPreHoverData=function(c){h.useMS||(h.preHoverClass=t.getAttachedClass(c,h.twisterVariationsData.dimensionsMap[c[a.STRING_DIM_INDEX]]))};h.updateStateOnMouseOver=function(c,b){var n,d;c&&
"0"===c[a.STRING_DIM_INDEX]&&h.setMaster(c[a.STRING_DIM_VALUE_INDEX]);n=b&&b.childAsin||y(c);d=h.unselectedDimCount;if(""===n){if(0>=d)return;n=h.getCurrentASIN()}h.hoveredAsin=n;n=b&&b.newDimCombID||v(h.hoveredAsin,c);h.hoveredDimCombID=n;d=0<=n.search(/X/)?1:0;n=b&&b.reactID||p(n,d);h.hoveredReactId=n;h.setPreHoverData(c)};h.updateStateOnClick=function(c,b,n,d){var e=-1,f=-1;h.previousAsin=h.getCurrentASIN();b=b||d&&d.childAsin||y(c);c&&c[a.STRING_DIM_INDEX]&&"0"===c[a.STRING_DIM_INDEX]&&h.setMaster(c[a.STRING_DIM_VALUE_INDEX]);
e=h.unselectedDimCount;h.previousPartialState=e;if(""===b){if(0>=e)return!1;b=h.getCurrentASIN()}e=d&&d.newDimCombID||v(b,c);if(a.EVENT_TYPE_CLICK===n||a.EVENT_TYPE_DROPDOWN_CHANGE===n){var k=c[a.STRING_DIM_INDEX];n="undefined"!==typeof h.preHoverClass&&(-1!==h.preHoverClass.indexOf(a.CLASS_FOR_SWATCH_UNAVAILABLE)||-1!==h.preHoverClass.indexOf(a.CLASS_FOR_DROPDOWN_UNAVAILABLE));var l=e.split("_"),f=h.currentDimCombID.split("_");l[k]="*";f[k]="*";k=l.join("_");f=f.join("_");k!=f&&(n=!0);if(n||-1===
c[a.STRING_DIM_VALUE_INDEX])for(var f=e.split("_"),l=0,r=h.dimensionSelectionData.length;l<r;l++)k=h.dimensionSelectionData[l],"X"===f[l]&&1===k[a.STRING_IS_SELECTED]&&(k[a.STRING_IS_SELECTED]=0,h.unselectedDimCount++);DetailPage.StateController.setState("isUnavailableInOldDimCombId",n?"true":"false");n=c[a.STRING_DIM_INDEX];null!==c&&c!==C&&(n=h.dimensionSelectionData[n],0===n[a.STRING_IS_SELECTED]&&-1!==parseInt(c[a.STRING_DIM_VALUE_INDEX])&&(n[a.STRING_IS_SELECTED]=1,h.unselectedDimCount--,0>h.unselectedDimCount&&
(h.unselectedDimCount=0)));f=h.unselectedDimCount;h.previousReactId=h.reactId}else f=0<=e.search(/X/)?1:0,h.previousReactId=h.hoveredReactId;c=d&&d.reactID||p(e,f);h.partialState=f;h.setCurrentASIN(b);h.setCurrentDimCombID(e);h.reactId=c;DetailPage.StateController.setState("current_asin",h.getCurrentASIN());DetailPage.StateController.setState("currentDimCombID",h.getCurrentDimCombID());DetailPage.StateController.setState("reactId",h.reactId);DetailPage.StateController.setState("dimensionSelectionData",
h.dimensionSelectionData);return!0};h.getCurrentContext=function(){var c=h.getRequestContext();return f(c)};h.getHoverContext=function(c){c=h.getRequestContext(c);return f(c)};h.getProductizedTwisterSelection=function(c){return"string"===typeof c?t.getProductizedTwisterSelectionFromDimComb(c,h.twisterJSInitData.dimensions):t.getProductizedTwisterSelectionFromDivMetaData(c,h.twisterJSInitData.dimensions)};h.getRequestContext=function(b,f){var n=h.getCurrentASIN(),k=h.parentASIN,r;r=b&&y(b)||n;var m=
h.getCurrentDimCombID(),g=v(r,b),t=0<=m.search(/X/)?1:0,u=0<=g.search(/X/)?a.MTYPE_PARTIAL:a.MTYPE_FULL;t||u!==a.MTYPE_PARTIAL||(u=a.MTYPE_PARENT);var t=u!==a.MTYPE_FULL?1:0,z=p(g,t),n={divMetaData:b,currentAsin:n,newAsin:r,childAsin:r,currentDimCombID:m,newDimCombID:g,reactID:z,partialState:t,mType:u,id:0<=z.search(/X/)?z:r};if(h.useMS&&r){if(k=h.twisterVariationsData.asinToDimIndexMapData[r])n.relatedContext=l(n,f,k),n.doNotAbort=!0}else u===a.MTYPE_PARENT&&(r=c.extend(!0,{},n),r.mType=a.MTYPE_PARTIAL,
r.relatedContext=n,r.url=e(r,f,[]),r.doNotAbort=!0,r.uniqueID=d(r,[]),n.relatedContext=r,n.id=k,n.newAsin=k,n.doNotAbort=!0);n.url=e(n,f,[]);n.uniqueID=d(n,[]);return n};h.getRequestContextForExternalTwisterUpdates=function(c){var b=h.getCurrentASIN(),n=h.getCurrentDimCombID();n.search(/X/);var f=0<=n.search(/X/)?a.MTYPE_PARTIAL:a.MTYPE_FULL,k=f!==a.MTYPE_FULL?1:0,r=p(n,k),n={divMetaData:{},currentAsin:b,newAsin:b,childAsin:b,currentDimCombID:n,newDimCombID:n,reactID:r,partialState:k,mType:f,id:0<=
r.search(/X/)?r:b};h.useMS&&b&&(b=h.twisterVariationsData.asinToDimIndexMapData[b])&&(n.relatedContext=l(n,0,b),n.doNotAbort=!0);n.url=e(n,0,c);n.uniqueID=d(n,c);return n};(function(){var q=h.twisterJSInitData,d=q.keysToPopulateDetailPageStateController,n;if(q){DetailPage.StateController=new b;for(var e=0,f=d.length;e<f;e++)n=d[e],DetailPage.StateController.setState(n,q[n]);DetailPage.StateController.setState("variation_display_labels",q[a.INIT_DATA_VARIATIONS_DISPLAY_LABELS]);DetailPage.StateController.setState("variation_label_order",
q[a.INIT_DATA_DIMENSIONS_MAP]);h.currentASIN=q.current_asin;h.parentASIN=q.parent_asin;h.dimensionSelectionData=q.dimensionSelectionData;h.unselectedDimCount=q.unselectedDimCount;h.currentDimCombID=q.currentDimCombID;h.reactId=q.reactId;h.storeID=q.storeId;h.productGroupID=q.productGroupId;h.useMS=q[a.STRING_USE_MS];h.useMS&&h.currentASIN&&h.twisterVariationsData.asinToDimIndexMapData[h.currentASIN]&&h.setMaster(h.twisterVariationsData.asinToDimIndexMapData[h.currentASIN][0]);c("#sizeSwatch").length&&
(h.sizeSwatch=!0)}})()}});z.when("A","twister-string-constants").register("twister-variations-data",function(u,t){return function(b){var a=this;a.twisterJSInitData=b;a.dimensionValuesDisplay={};a.deletedLandingAsinInfo;a.dimToAsinMapData;a.dimensionValuesData;a.asinToDimIndexMapData;a.dimensionsDisplayType;a.displayConfigStylesData;a.useMS;a.hoverMS;a.dimensionsMap;a.getDimensionValuesDisplayData=function(b){var m=a.dimensionValuesDisplay[b];m||b!=a.deletedLandingAsinInfo.asin||(m=a.deletedLandingAsinInfo.dimValues);
return m};(function(){var b=a.twisterJSInitData;a.dimensionsMap=b[t.INIT_DATA_DIMENSIONS_MAP];a.dimensionValuesDisplay=b[t.INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA];a.deletedLandingAsinInfo=b[t.INIT_DATA_DELETED_LANDING_ASIN_INFO];a.dimToAsinMapData=b[t.INIT_DATA_DIM_TO_ASIN_MAP];a.asinToDimIndexMapData=b[t.INIT_DATA_ASIN_TO_DIM_INDEX_MAP];a.dimensionsDisplayType=b[t.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];a.dimensionValuesData=b[t.STRING_DIMENSION_VALUES_DATA];a.displayConfigStylesData=b[t.STRING_DISPLAY_CONFIG_STYLES_DATA];
a.useMS=b[t.STRING_USE_MS];a.hoverMS=b[t.STRING_HOVER_MS]})()}});z.when("A","twister-dimension-view-factory","twister-string-constants").register("twister-view",function(u,t,b){return function(a,g,m,k,f){function l(a,e,f,k,h){var c={},q={};c[b.STRING_EVENT_TYPE]=a;c[b.STRING_DIM_COMB_ID]=e;q[b.STRING_EVENT_DIV_METADATA]=f;q[b.STRING_EVENT_DIM_INFO]=k;q[b.STRING_DIMENSION_SELECTION_DATA]=h;c[b.STRING_EVENT_DATA]=q;return c}var e=this,r=u.$;e.twisterControllerHandle=a;e.twisterJSInitData=m;e.twisterVariationsData=
k;e.twisterAvailabilityCache=f;e.dimensionsMap={};e.dimensionDisplayMap={};e.dimensionDisplayTypeMap={};e.dimensionViewHandlersMap={};e.updateView=function(a,f,k){var p={},h,c=f.dimensionSelectionData;k===b.EVENT_TYPE_MOUSEOVER?(h=f.hoveredAsin,f=f.hoveredDimCombID):(h=f.getCurrentASIN(),f=f.getCurrentDimCombID());p[b.STRING_DIMENSION_VALUES_DATA]=e.twisterVariationsData.getDimensionValuesDisplayData(h);p[b.STRING_DIMENSION_DISPLAY_MAP]=e.dimensionDisplayMap;p[b.STRING_DIMENSIONS_MAP]=e.dimensionsMap;
a=l(k,f,a,p,c);k=0;for(p=e.dimensionsMap.length;k<p;k++)e.dimensionViewHandlersMap[k].updateView(a)};e.updateViewAfterTwisterUpdate=function(a,f,k){var p={},h=f.dimensionSelectionData;f.getCurrentASIN();f=f.getCurrentDimCombID();p[b.STRING_DIMENSION_DISPLAY_MAP]=e.dimensionDisplayMap;p[b.STRING_DIMENSIONS_MAP]=e.dimensionsMap;a=l(k,f,a,p,h);if(k===b.EVENT_TYPE_DROPDOWN_CHANGE||k===b.EVENT_TYPE_CLICK)for(k=0,p=e.dimensionsMap.length;k<p;k++)e.dimensionViewHandlersMap[k].updateViewAfterTwisterUpdate&&
e.dimensionViewHandlersMap[k].updateViewAfterTwisterUpdate(a)};(function(a){var f=e.twisterJSInitData,k=f[b.INIT_DATA_DIMENSIONS_MAP].length,l=[],h=[],c=[],q=0;for(index=0;index<k;index++)f[b.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP]&&f[b.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][index]!==b.HIDDEN_DIMENSION_DISPLAY_TYPE&&(l[q]=f[b.INIT_DATA_DIMENSIONS_MAP][index],h[q]=f[b.INIT_DATA_DIMENSIONS_DISPLAY][index],c[q]=f[b.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][index],q++);e.dimensionsMap=l;e.dimensionDisplayMap=
h;e.dimensionDisplayTypeMap=c;k=0;for(l=e.dimensionsMap.length;k<l;k++)f=t.getDimensionSubViewObject(e.twisterJSInitData,e.twisterVariationsData,k.toString(10),e.twisterControllerHandle,a),e.dimensionViewHandlersMap[k]=f;r(b.CLASS_FOR_NON_JS_EVDD).hide();r(b.CLASS_FOR_NEW_TWISTER_EVDD).show();e.updateView({},e.twisterControllerHandle.initTwisterState,b.EVENT_TYPE_CLICK)})(g)}});z.when("A").register("twister-productization-view",function(u){return function(t){var b=this;b.twister=C;b.twisterUtil=t.util;
b.handleClick=function(a,b){this.twister.dimensionChanged(a);this.twister.metaData(b)};(function(){b.twister=t.registerActive({viewAttribution:"DetailPage",viewName:"TwisterDesktopProductizationView"},{updateView:function(a,b){}})})()}});z.when("A","a-dropdown","twister-thumbnailModule","twister-utils","twister-string-constants").register("twister-dimension-views-dropdown",function(u,t,b,a,g){return function(m,k){function f(){var a=g.DROPDOWN_DIV_NAME+e.dimName,b={},f;b[g.STRING_DIM_INDEX]=e.dimOrder;
f=function(a){e.twisterControllerHandle&&e.twisterControllerHandle.handleDropdownOnChange(a,b)};z.when("A").execute(function(b){b.on(g.AUI_DROPDOWN_EVENT_PREFIX+a,f)})}function l(){for(var a,b=0,f=e.dimensionsMap.length;b<f;b++)a=e.dimensionsMap[b],e.thumbnailHandle.attach(a),e.thumbnailHandle.preloadAllThumbnails(a)}var e=this,r=u.$;e.dimType="dropdown";e.AuiDropdownHandle=t;e.thumbnailHandle=b;e.dimName;e.dimOrder;e.dimStyleData;e.dimensionsMap;e.dimNameDisplayString;e.dimValuesDisplayData;e.twisterControllerHandle;
e.isTablet;e.updateView=function(b){switch(b[g.STRING_EVENT_TYPE]){case g.EVENT_TYPE_MOUSEOUT:case g.EVENT_TYPE_DROPDOWN_CHANGE:case g.EVENT_TYPE_CLICK:var f,k,l,h;k=g.ID_SELECTOR+e.dimName+g.CHAR_UNDERSCORE+g.INDEX_FOR_SELECT_OPTION;var c=g.NATIVE_DROPDOWN_DIV_PREFIX+g.DROPDOWN_DIV_NAME+e.dimName,q=r(c).val().split(",")[0],m=b[g.STRING_EVENT_TYPE],n=b[g.STRING_EVENT_DATA][g.STRING_DIMENSION_SELECTION_DATA];b=a.getDimStyleData(b.dimCombID,e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,
e.displayConfigStylesData);0===n[e.dimOrder][g.STRING_IS_SELECTED]&&q!==g.INDEX_FOR_SELECT_OPTION&&"undefined"!==typeof e.AuiDropdownHandle&&e.AuiDropdownHandle.getSelect(c).val("-1");m!==g.EVENT_TYPE_CLICK&&m!==g.EVENT_TYPE_DROPDOWN_CHANGE||0!==n[e.dimOrder][g.STRING_IS_REQUIRED]||1!==n[e.dimOrder][g.STRING_IS_SELECTED]||r(k).remove();q=0;for(n=b.length;q<n;q++)if(f=b[q],k=g.NATIVE_DROPDOWN_DIV_PREFIX+e.dimName+g.CHAR_UNDERSCORE+q,f=f[g.STRING_STYLE],l=r(k).get(0).className,f===g.CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION&&
(h=r(k).attr("value"),r(c).val()!==h&&e.AuiDropdownHandle.getSelect(c).val(h)),l!==f)try{l={},l[g.STRING_CSS_CLASS]=f,l[g.STRING_NATIVE_CSS_CLASS]=f,e.AuiDropdownHandle.updateOption(k,l)}catch(x){}e.isTablet&&(m===g.EVENT_TYPE_CLICK||m===g.EVENT_TYPE_DROPDOWN_CHANGE)&&e.thumbnailHandle&&e.thumbnailHandle.update(e.dimName)}};(function(){var b;e.dimOrder=k[g.STRING_DIM_ORDER];e.dimName=k[g.STRING_DIM_NAME];e.dimensionsMap=k[g.STRING_DIMENSIONS_MAP];e.dimNameDisplayString=k[g.STRING_DIMENSION_DISPLAY_STRING];
e.dimValuesDisplayData=k[g.STRING_DIMENSION_VALUES_DATA];e.twisterControllerHandle=k[g.STRING_TWISTER_CONTROLLER_HANDLE];e.displayConfigStylesData=k[g.STRING_DISPLAY_CONFIG_STYLES_DATA];e.initialTwisterState=k[g.STRING_TWISTER_INITIAL_STATE_KEY];e.isTablet=m.isTablet;b=e.initialTwisterState.getCurrentDimCombID();e.dimStyleData=a.getDimStyleData(b,e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,e.displayConfigStylesData);f();e.isTablet&&l();if("undefined"!==
typeof TwisterNonJs){b=TwisterNonJs.handleDropDown.length;for(var r=0;r<b;r++)TwisterNonJs.handleDropDown[r]=function(){}}})()}});z.when("A").register("twister-dimension-views-singleton",function(u){return function(t,b){this.updateView=function(a){}}});z.when("A","twister-dimension-views-unavailablePopover","twister-utils","twister-string-constants","aui-style-override","dp-js-logger").register("twister-dimension-views-swatch",function(u,t,b,a,g,m){return function(k,f){function l(){u.declarative(Twister.isImmersiveExperience?
a.AUI_EVENT_FOR_SWATCHTHUMB+"-"+w.dimOrder:a.AUI_EVENT_FOR_SWATCHTHUMB,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE,a.EVENT_TYPE_MOUSEDOWN,a.EVENT_TYPE_TOUCHSTART],function(c){c.type===a.EVENT_TYPE_CLICK?w.twisterControllerHandle&&w.twisterControllerHandle.handleClick(c.data):c.type===a.EVENT_TYPE_MOUSEENTER?w.twisterControllerHandle&&w.twisterControllerHandle.handleMouseOver(c.data):c.type===a.EVENT_TYPE_MOUSELEAVE?w.twisterControllerHandle&&w.twisterControllerHandle.handleMouseOut(c.data,
c.data[a.STRING_DIM_INDEX],c.data[a.STRING_DIM_VALUE_INDEX]):!w.newPrefetchWeblab||c.type!==a.EVENT_TYPE_MOUSEDOWN&&c.type!==a.EVENT_TYPE_TOUCHSTART||w.twisterControllerHandle&&w.twisterControllerHandle.handleClickPrediction(c.data,"T1"===w.newPrefetchWeblab?a.YES:a.NO)})}function e(){for(var b,n,q=0,d=w.dimData.length;q<d;q++)if(b=w.dimData[q],n=p(q))b=b[a.STRING_STYLE],h(q,n,b),c(q,b)}function r(c,b){var q=DetailPage.StateController.getState().selected_variations,e=DetailPage.StateController.getState()[a.STRING_DIMENSION_SELECTION_DATA];
if(b)n("#variation_"+w.dimName+" .selection").html(c).addClass("hover");else{var f=n("#variation_"+w.dimName+" .selection");n("#"+a.TWISTER_MODAL_ID_PREFIX+w.dimName+" .selection");if(w.sizeSwatch){var h="";y(e,w.dimOrder)&&""===c||(null==q[w.dimName]?d(e,w.dimOrder)&&(h=c):h=q[w.dimName]);f.html(h).removeClass("hover")}else n("#variation_"+w.dimName+" .selection").html(c).removeClass("hover")}}function d(c,b){var n=!1;1==c[b][a.STRING_IS_SELECTED]&&(n=!0);return n}function y(c,b){var n=!1;1==c[b][a.STRING_IS_REQUIRED]&&
(n=!0);return n}function v(c,b,q,d){(Twister.isImmersiveExperience?n("."+a.TWISTER_SWATCH_CLASS_PREFIX+w.dimName+a.CHAR_UNDERSCORE+c):n(a.ID_SELECTOR+w.dimName+a.CHAR_UNDERSCORE+c)).each(function(b,e){var f=w.dimName+a.CHAR_UNDERSCORE+c+a.CHAR_UNDERSCORE+b;w.twisterJSInitData[a.STRING_HIDE_POPOVER]?t.setAriaLabel(d,q,n(e),f,w.twisterJSInitData,w.dimOrder):t.setTooltip(d,q,n(e),f,w.twisterJSInitData,w.dimOrder)})}function p(c){var b=Twister.isImmersiveExperience?n("."+a.TWISTER_SWATCH_CLASS_PREFIX+
w.dimName+a.CHAR_UNDERSCORE+c):n(a.ID_SELECTOR+w.dimName+a.CHAR_UNDERSCORE+c);c=[];var q;if(0<b.length){c=b.get(0).className.split(" ");for(var b=0,d=c.length;b<d;b++){var e=c[b];if(0===e.indexOf("swatch")){q=e;break}}}return q}function h(c,b,q){c=Twister.isImmersiveExperience?n("."+a.TWISTER_SWATCH_CLASS_PREFIX+w.dimName+a.CHAR_UNDERSCORE+c):n(a.ID_SELECTOR+w.dimName+a.CHAR_UNDERSCORE+c);b!==q&&n(c).removeClass(b).addClass(q);g.doOverride(q,c)}function c(c,b){var q=Twister.isImmersiveExperience?
n("."+a.TWISTER_SWATCH_CLASS_PREFIX+w.dimName+a.CHAR_UNDERSCORE+c+" ."+a.PRICE_SLOT_CLASS_NAME):n(a.ID_SELECTOR+w.dimName+a.CHAR_UNDERSCORE+c+"_price"),d=a.CLASS_FOR_PRICE_SECONDARY;if(b===a.CLASS_FOR_SWATCH_SELECT||b===a.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||b===a.CLASS_FOR_SWATCH_HOVER)d=a.CLASS_FOR_PRICE_SELECTED;q.length&&q.removeClass(a.CLASS_FOR_PRICE_SECONDARY+" "+a.CLASS_FOR_PRICE_SELECTED).addClass(d)}function q(c){var q={};q.asinList=c;n("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",w.twisterDimmedOpacity);
q.dimTriggeringDimSum=w.dimName;q.dimSubType=w.dimSubType;q.dimType=w.dimType;q.dimCombId=DetailPage.StateController.getState().currentDimCombID;q.executeChunk=function(){var c=DetailPage.StateController.getState().currentDimCombID,a=c.split("_"),n=q.dimCombId.split("_");if(q.dimCombId===c)return!0;if(!b.isPartialState(w.dimensionsMap.length)){for(var c=w.dimensionsMap.length,d=!0,e=0;e<c;e++)if(e!==parseInt(w.dimOrder)&&n[e]!==a[e]){d=!1;break}return d}return!1};q.chunk=function(c){for(var a=n(".twister_"+
w.dimName+"_"+w.twisterJSInitData.asin_variation_values[c.ASIN][w.dimName]+" .twisterSlotDiv"),b="",q=0;c.Value.content.twisterSlotDiv[q];)"IMAGE"===w.dimSubType&&(b+="<div>"),b+=c.Value.content.twisterSlotDiv[q],"IMAGE"===w.dimSubType&&(b+="</div>"),q++;a.html(b)};q.success=function(c,b,q,d){n("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",1)};q.error=function(){n("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",1)};q.abort=function(){n("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",1)};Twister.dimensionalSummaryModule.fetchDimSumData(q)}
var w=this,n=u.$;w.dimType="swatch";w.dimSubType="";w.dimName;w.dimOrder;w.dimData;w.dimensionsMap;w.dimNameDisplayString;w.dimValuesDisplayData;w.twisterControllerHandle;w.maxSwatchLimitForImmersive;w.finalLimitForSwatches;w.twisterJSInitData=k;w.newPrefetchWeblab=!1;w.landingDimCombId;if(Twister.multiDimensionWeblabEnabled)var x="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&(x="ImmersiveSwatchSingleDimensionView");w.logger=new m(x,this,!0);w.sizeSwatch=!1;w.updateView=function(n){if(n[a.STRING_EVENT_TYPE]===
a.EVENT_TYPE_MOUSEOVER){var q,e,f,k,l=n[a.STRING_EVENT_DATA],m=l[a.STRING_EVENT_DIM_INFO],g=m[a.STRING_DIMENSION_VALUES_DATA]!=C?m[a.STRING_DIMENSION_VALUES_DATA][w.dimOrder]:"",l=l[a.STRING_EVENT_DIV_METADATA];if(w.dimOrder==l[a.STRING_DIM_INDEX]){m=p(l[a.STRING_DIM_VALUE_INDEX]);n=b.getDimStyleData(n.dimCombID,w.dimValuesDisplayData.length,w.dimOrder,w.twisterControllerHandle.twisterAvailabilityCache,w.displayConfigStylesData);r(g,!0);m===a.CLASS_FOR_SWATCH_UNAVAILABLE&&w.logger.logImpression(w.logger.eventTypes.UNAVAILABLE_SWATCH_HOVER,
null);for(var g=0,x=n.length;g<x;g++)q=n[g],q=q[a.STRING_STYLE],e=p(g),f=e===a.CLASS_FOR_SWATCH_SELECT?!0:!1,k=parseInt(l[a.STRING_DIM_INDEX])===parseInt(w.dimOrder)&&parseInt(l[a.STRING_DIM_VALUE_INDEX])===parseInt(g)?!0:!1,f||m===a.CLASS_FOR_SWATCH_UNAVAILABLE&&!k||(q===a.CLASS_FOR_SWATCH_SELECT&&(q=e===a.CLASS_FOR_SWATCH_UNAVAILABLE?a.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:a.CLASS_FOR_SWATCH_HOVER,c(g,q)),h(g,e,q))}}else for(eventData=n[a.STRING_EVENT_DATA],eventDimInfo=eventData[a.STRING_EVENT_DIM_INFO],
dimensionValueDisplay=eventDimInfo[a.STRING_DIMENSION_VALUES_DATA]!=C?eventDimInfo[a.STRING_DIMENSION_VALUES_DATA][w.dimOrder]:"",divMetaData=eventData[a.STRING_EVENT_DIV_METADATA],dimensionSelectionData=eventData[a.STRING_DIMENSION_SELECTION_DATA],dimCombID=n.dimCombID,dimDataForThisInteraction=b.getDimStyleData(dimCombID,w.dimValuesDisplayData.length,w.dimOrder,w.twisterControllerHandle.twisterAvailabilityCache,w.displayConfigStylesData),w.sizeSwatch?(m=dimCombID.split("_")[0],l=y(dimensionSelectionData,
w.dimOrder),g=d(dimensionSelectionData,w.dimOrder),"X"==m&&l&&g||r(dimensionValueDisplay,!1)):r(dimensionValueDisplay,!1),q=0,e=dimDataForThisInteraction.length;q<e;q++)if(m=dimDataForThisInteraction[q],g=m[a.STRING_STYLE],0===dimensionSelectionData[w.dimOrder][a.STRING_IS_SELECTED]&&g===a.CLASS_FOR_SWATCH_SELECT&&(g=a.CLASS_FOR_SWATCH_AVAILABLE),x=p(q),w.sizeSwatch&&(l=y(dimensionSelectionData,w.dimOrder),f=!d(dimensionSelectionData,w.dimOrder),x==a.CLASS_FOR_SWATCH_SELECT&&m[a.STRING_STYLE]==a.CLASS_FOR_SWATCH_SELECT&&
l&&f&&(g=m[a.STRING_STYLE])),x){w.sizeSwatch&&(l=y(dimensionSelectionData,w.dimOrder),x!=a.CLASS_FOR_SWATCH_SELECT&&x!=a.CLASS_FOR_SWATCH_HOVER||!l||g!=a.CLASS_FOR_SWATCH_UNAVAILABLE||r("",!1));x=p(q);h(q,x,g);switch(n[a.STRING_EVENT_TYPE]){case a.EVENT_TYPE_DROPDOWN_CHANGE:case a.EVENT_TYPE_CLICK:v(q,x,g,n)}c(q,g)}};w.updateViewAfterTwisterUpdate=function(c){var d=c[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA];c=DetailPage.StateController.getState().currentDimCombID.split("_");if(Twister.multiDimensionWeblabEnabled&&
(n(a.ID_SELECTOR+a.MODAL_SWATCH_PREFIX+w.dimName+"_"+c[w.dimOrder]),w.isSlotsEnabled))if(b.isPartialState(w.dimensionsMap.length))c=n(" .twisterSwatchWrapper_"+w.dimOrder+" .twisterSlotDiv"),"none"!==c.css("display")&&(document.getElementById("twisterSwatchWrapperDynaStyle_"+w.dimOrder).innerHTML=".twisterSwatchWrapper_"+w.dimOrder+" {min-width:100%;min-height:100%;}",c.css("display","none")),Twister.immersiveBannersPresent&&(c=b.getImmersivePartialStateBannerContent(k,parseInt(w.dimOrder)),d=n("#twisterImmersiveGlanceBanner"),
d.html(c),d.removeClass("twisterImmersiveBannerHide"),n("#twisterImmersiveModalBanner").html(c));else if(d[a.STRING_DIM_INDEX]!=w.dimOrder||"true"===DetailPage.StateController.getState().isUnavailableInOldDimCombId){for(var e=n(a.ID_SELECTOR+"variation_"+w.dimName+" > ul > li"),d=[],f=w.twisterJSInitData.dimensionValuesData[w.dimOrder].length,h=w.isImmersiveViewEnabled?w.finalLimitForSwatches:f,l=0;l<f;l++)n("."+a.TWISTER_SWATCH_CLASS_PREFIX+w.dimName+"_"+l+" ."+a.CLASSNAME_FOR_SWATCH+"_"+w.dimOrder).css("min-width",
"");for(f=0;f<h;f++){var l=n(e.get(f)).find(".a-declarative"),p=l.attr("data-action"),l=JSON.parse(l.attr("data-"+p)).dimValueIndex;c[w.dimOrder]=l;var r=c.join("_"),p=n("."+a.TWISTER_SWATCH_CLASS_PREFIX+w.dimName+"_"+l+" .twisterSlotDiv");p.css("display","");(r=w.twisterJSInitData[a.INIT_DATA_DIM_TO_ASIN_MAP][r])?(d.push(r),p.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1'      style='width: 30px; margin : 5px 0px 0px 5px; height : 7px'></div>")):
n("."+a.TWISTER_SWATCH_CLASS_PREFIX+w.dimName+"_"+l+" .twisterSlotDiv").html("<span class='a-color-tertiary'>- -</span>")}n(a.ID_SELECTOR+a.TWISTER_MODAL_ID_PREFIX+w.dimName+" .swatches li").invalidateAppearedAlreadyCache();f=w.twisterJSInitData.dimensionValuesData[w.dimOrder].length;for(l=0;l<f;l++)c=n(a.ID_SELECTOR+a.TWISTER_MODAL_ID_PREFIX+w.dimName+" ."+a.TWISTER_SWATCH_CLASS_PREFIX+w.dimName+"_"+l+" .twisterSlotDiv"),c.css("display",""),c.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1' style='width: 30px;  margin : 5px 0px 0px 5px; height : 7px'></div>");
0<d.length&&q(d);Twister.immersiveBannersPresent&&(n("#twisterImmersiveGlanceBanner").addClass("twisterImmersiveBannerHide"),c=b.getImmersiveFullStateBannerContent(k,parseInt(w.dimOrder)),n("#twisterImmersiveModalBanner").html(c))}};(function(){w.isImmersiveViewEnabled=f.isImmersiveViewEnabled;w.isSlotsEnabled=f.isSlotsEnabled;w.newPrefetchWeblab=w.twisterJSInitData.newPrefetchWeblab;w.dimOrder=f[a.STRING_DIM_ORDER];w.dimName=f[a.STRING_DIM_NAME];w.dimensionsMap=f[a.STRING_DIMENSIONS_MAP];w.dimNameDisplayString=
f[a.STRING_DIMENSION_DISPLAY_STRING];w.dimValuesDisplayData=f[a.STRING_DIMENSION_VALUES_DATA];w.displayConfigStylesData=f[a.STRING_DISPLAY_CONFIG_STYLES_DATA];w.twisterControllerHandle=f[a.STRING_TWISTER_CONTROLLER_HANDLE];w.initialTwisterState=f[a.STRING_TWISTER_INITIAL_STATE_KEY];currDimCombID=w.initialTwisterState.getCurrentDimCombID();w.dimData=b.getDimStyleData(currDimCombID,w.dimValuesDisplayData.length,w.dimOrder,w.twisterControllerHandle.twisterAvailabilityCache,w.displayConfigStylesData);
w.maxSwatchLimitForImmersive=f[a.STRING_MAX_SWATCHES_IMMERSIVE_VIEW];w.dimSubType=f.dimensionDisplaySubType;w.finalLimitForSwatches=w.maxSwatchLimitForImmersive-1;l();e();w.swatchWrapper=".twisterSwatchWrapper_"+w.dimOrder;w.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+w.dimOrder;w.$swatches=n(w.swatchWrapper);w.twisterDimmedOpacity=.2;n("#sizeSwatch").length&&(w.sizeSwatch=!0);w.landingDimCombId=DetailPage.StateController.getState().currentDimCombID;n(".variations .swatchOuter a").each(function(){var c=
jQuery(w).contents();n(w).replaceWith(c)})})();z.when("twister-lazy-load-data").execute(function(c){if(c.context.dimKey===w.dimName){var q=DetailPage.StateController.getState().currentDimCombID,d=w.landingDimCombId.split("_"),q=q.split("_");d[w.dimOrder]="*";q[w.dimOrder]="*";q=q.join("_");d=d.join("_");if(q==d){var e=c.context;c=c.responseData.split("&&&");n("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",.2);n.each(c,function(c,a){var q;if(""!==b.stringTrim(a))try{q=n.parseJSON(a)}catch(d){}else q=
a;var f=n(document.querySelectorAll('[data-defaultAsin="'+q.ASIN+'"]'));divToBeReplaced=f.find(" .twisterSlotDiv");if(0<divToBeReplaced.length){divToBeReplaced.css("display","");if(Twister.multiDimensionWeblabEnabled){for(var h="",k=0;q.Value.content.twisterSlotDiv[k];)"IMAGE"===e.dimSubType&&(h+="<div>"),h+=q.Value.content.twisterSlotDiv[k],"IMAGE"===e.dimSubType&&(h+="</div>"),k++;divToBeReplaced.html(h)}else divToBeReplaced.html(q.Value.content.twisterSlotDiv);f.removeAttr("data-defaultAsin")}});
n("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",1)}}})}});z.when("A","twister-string-constants","dp-js-logger").register("twister-vodd-override-behavior",function(u,t,b){this.VoddOverride=u.createClass({test:!1,shouldGetNextAvailableAsin:function(a,b){return!1},getSupplementString:function(a,b,m,k){return""}});this.voddOverrideBehavior=new VoddOverride;this.externalFeatureName="";this.setExternalOverrideBehavior=function(a,g){try{this.voddOverrideBehavior=a,this.externalFeatureName=g}catch(m){(new b(g)).logFatal(m,
{message:"[Override behavior for VODD failed]"})}};this.getVoddOverrideBehavior=function(){return this.voddOverrideBehavior};return this});z.when("A","twister-utils","twister-string-constants","scroll-event-handler","twister-vodd-popover","twister-vodd-override-behavior","dp-js-logger").register("twister-vodd",function(u,t,b,a,g,m,k){return function(f,l){function e(){var c=100*parseInt(A.dimensionOrder),a=c,b=function(c,a,b){c.addClass("animation-start");setTimeout(function(){c.animate({top:b||"0px"},
{duration:300,complete:function(){H(this).removeClass("animation-start")}})},a)};W.length&&W.parent("td").is(":visible")&&(b(W.parent("td"),c,"5px"),a=c+50);b(ba.parent("td"),a,"5px")}function r(){da=b.ID_SELECTOR+"vodd-button-"+A.dimensionName;DIMENSION_SINGLETON_ID=b.ID_SELECTOR+"vodd-singleton-"+A.dimensionName;V=b.CLASS_SELECTOR+"vodd-button-label-"+A.dimensionName;ea=b.CLASS_SELECTOR+"vodd-button-icon-"+A.dimensionName;ma=b.ID_SELECTOR+"vodd-table-"+A.dimensionName;ga=b.ID_SELECTOR+"dimension-button-img-"+
A.dimensionName;ha=b.ID_SELECTOR+A.dimensionName+b.CHAR_UNDERSCORE;oa="vodd-popover-"+A.dimensionName;var c=parseInt(A.dimensionOrder),a=f[b.INIT_DATA_DISPLAY_TYPE_PROPERTIES];a&&H.isArray(a)&&a.length>c&&(c=a[c],c[b.INIT_DATA_VISIBLE_ROW_COUNT]&&(T=c[b.INIT_DATA_VISIBLE_ROW_COUNT]),c[b.INIT_DATA_MAX_POPOVER_HEIGHT]&&(fa=c[b.INIT_DATA_MAX_POPOVER_HEIGHT]),c[b.INIT_DATA_ANIMATE_BUTTON_CONTENT]&&(ka=c[b.INIT_DATA_ANIMATE_BUTTON_CONTENT]),c[b.INIT_DATA_POPOVER_POSITION]&&(na=c[b.INIT_DATA_POPOVER_POSITION]))}
function d(c){if(O){var a=O.length/A.dimValuesDisplayData.length*100,a={divMetaData:w(null),count:Math.ceil(A.dimValuesDisplayData.length/T),percentage:Math.floor(a),dimDisplayType:b.TWISTER_DIMENSION_VIEW_VODD};N.logImpression(c,a)}}function y(){2==J&&1===ca&&(pa=!1);var c={trigger:A.dimensionButton,name:oa,eventListener:A,displayPosition:na,positionOnTwisterContainer:pa},a=K.find("tr").not(".aok-hidden");a.length&&a.length>T&&fa&&"undefined"!==typeof fa&&H.extend(c,{height:fa});Z=new g(c);A.dimensionButton.bind(t.isTouchDevice()?
b.EVENT_TYPE_TOUCHEND:b.EVENT_TYPE_CLICK,function(c){if(Z&&Z.getHandle()&&Z.getHandle().isActive())return Z.getHandle().hide(),!1;N.logImpression(P.CLICK,{time:Date.now()});t.isTouchDevice()&&A.dimensionButton.trigger("mouseenter")})}function v(c,a){var b=N.createFunctionTimer(P.DIM_SUM_LOAD);b.start();Twister.dimensionalSummaryModule&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:a,asinList:c,dimTriggeringDimSum:A.dimensionName,dimSubType:A.dimSubType,dimType:A.dimType,chunk:function(c){if(c&&
"object"===typeof c){var a=S[c.ASIN][parseInt(A.dimensionOrder)],a=K.find(ha+a);if(c.Value&&c.Value.content&&c.Value.content.twisterSlotDiv){var b=H.trim(c.Value.content.twisterSlotDiv);0<b.length&&(a.find(".vodd-loading-placeholder").hide(),G(a),c=a.find(".dimension-details"),c.append(b),a=c.find(".twister_swatch_price").parent(),a.is("div")&&!a.attr("class")&&(a=h(a),a.find(".a-size-mini").addClass("a-size-small").removeClass("a-size-mini"),a.addClass("a-color-price")),c=c.find(".sns-data-slot").parent(),
c.is("div")&&!c.attr("class")&&h(c))}}},success:function(c,a,n,q){b.stop()},error:function(){b.stop()},abort:function(){b.stop()}})}function p(c){var a=A.initialTwisterState.getCurrentDimCombID(),b=parseInt(A.dimensionOrder),n=[],d=[];O||(O=[]);override=m.getVoddOverrideBehavior();A.voddOverrideEnabled=!0;try{A.shouldFetchNextAvailableAsin=override.shouldGetNextAvailableAsin(A.dimensionOrder,A.dimensionsMap)}catch(e){var f=new k(override.externalFeatureName),h={message:"[shouldFetchNextAvailableAsin failed for VODD Twister Override]"};
f.logFatal(e,h)}for(var l=0;l<c.length;l++){7===n.length&&(v(n,d),n=[],d=[]);var p=q(c[l].id),f=t.reconstructCombinationWithDimValue(a,b,p);asin=ja[f];0>O.indexOf(p)&&O.push(p);null==asin&&A.shouldFetchNextAvailableAsin&&(f=A.initialTwisterState.getCurrentDimCombID().split("_"),b=parseInt(A.dimensionOrder),f[b]=p,f=f.join("_"),asin=A.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(f,b));if(asin){if(A.voddOverrideEnabled){var r="";try{r=override.getSupplementString(asin,ja,S,D)}catch(w){f=
new k(override.externalFeatureName),h={message:"[getSupplementString failed for VODD Twister Override]"},f.logFatal(w,h)}H(c[l]).find(".supplementString").remove();H(c[l]).find(".dimension-display-text").append('<span class="supplementString a-size-mini">'+r+"</span>")}d.push(p);n.push(asin)}}0<n.length&&v(n,d)}function h(c){var a=c.prev(),b=c.children();c.remove();a.after(b);return b}function c(c){c=t.getVisibleTableRows(c.currentTarget,K.find("tr"));p(c)}function q(c){if(!c)return-1;c=c.split(b.CHAR_UNDERSCORE);
return c[c.length-1]}function w(c){return{dimIndex:A.dimensionOrder,dimValueIndex:c?q(c.id):null,dimDisplayType:b.TWISTER_DIMENSION_VIEW_VODD}}function n(c){d(P.CLICK_VARIATION);U||d(P.SCROLL);U=!0;O=null;var a=w(c.currentTarget),b=A.initialTwisterState.getCurrentDimCombID(),n=t.reconstructCombinationWithDimValue(b,a.dimIndex,a.dimValueIndex);n!=b&&A.twisterControllerHandle&&(Y(),A.twisterControllerHandle.handleClick(a));Z&&Z.getHandle()&&Z.getHandle().hide();b=A.twisterControllerHandle.twisterAvailabilityCache.isDimCombinationAvailable(n);
a={dimensionOrder:A.dimensionOrder,dimensionValueIndex:a.dimValueIndex,isSelectedDimValueAvailable:b};H(c.currentTarget).trigger("TwisterVODD.dimensionRowClick",a)}function x(c){H(c.currentTarget).addClass("vodd-row-hovered");A.twisterControllerHandle&&(c=w(c.currentTarget),A.twisterControllerHandle.handleMouseOver(c))}function F(c){H(c.currentTarget).removeClass("vodd-row-hovered");if(A.twisterControllerHandle){var a=w(c.currentTarget);c=q(c.currentTarget.id);A.twisterControllerHandle.handleMouseOut(a,
A.dimensionOrder,c)}}function G(c){c.find(".dimension-slots .availability-message").nextAll().remove()}function L(c,a){if(a)c.find(".unavailable-text").hide(),c.find(".vodd-loading-placeholder").show();else{c.find(".vodd-loading-placeholder").hide();c.find(".unavailableV2").removeClass("aok-hidden");var n;n=A.initialTwisterState.getCurrentDimCombID().split("_");var d=[],e=parseInt(A.dimensionOrder),f=q(c[0].id);n[e]=f;f=n.join("_");f=A.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(f,
e);if(f=S[f])for(var h=0;h<n.length;h++)e!==h&&ia[h]!==b.HIDDEN_DIMENSION_DISPLAY_TYPE&&d.push(D[h][f[h]]);if(n=d.join(", "))c.find(".unavailable-text").show(),c.find(".variation-combination-text").text(n);a:{n=0;d=parseInt(A.dimensionOrder);e=parseInt(q(c[0].id));for(asin in S)if(parseInt(S[asin][d])===e&&1<++n){n=!0;break a}n=!1}n||c.find(".variation-more-text").hide()}G(c)}function E(c){R.sort(function(a,n){var d=q(a.id),e=q(n.id);if(c[d][b.STRING_STYLE]!==c[e][b.STRING_STYLE]){if(c[d][b.STRING_STYLE]===
b.CLASS_FOR_VODD_UNAVAILABLE)return 1;if(c[e][b.STRING_STYLE]===b.CLASS_FOR_VODD_UNAVAILABLE)return-1}return d-e});R.detach().appendTo(K)}function M(c){var a=K.find("tr").not(".aok-hidden");c=a.index(c);var b=a.length-T;c>b?(c=b,0>c&&(c=0)):c=0==c?c:c-1;a=a.slice(c,c+T);p(a)}function Y(){R.unbind(b.EVENT_TYPE_CLICK,n);t.isTouchDevice()||R.unbind(b.EVENT_TYPE_MOUSEENTER,x).unbind(b.EVENT_TYPE_MOUSELEAVE,F)}function I(c,a,n){var q=c;if(Q()){var d=c.split("_");c=A.dimensionOrder;for(var d=d.slice(0),
e=0;e<dimensionHierarchyData.length;e++)c!=e&&dimensionHierarchyData[c]<dimensionHierarchyData[e]&&(d[e]="X",q=d.join("_"))}c=q;q=t.getDimStyleData(q,A.dimValuesDisplayData.length,A.dimensionOrder,A.twisterControllerHandle.twisterAvailabilityCache,A.displayConfigStylesData);E(q);var f=null;c=q.length;for(d=0;d<q.length;d++){var e=q[d],h=K.find(ha+d);if(e[b.STRING_STYLE]===b.CLASS_FOR_VODD_SELECT){if(f=h,h.addClass("vodd-row-selected"),A.dimensionValueHasIcon[d]?(ba.text(""),aa.attr("class","background-sprite "+
A.dimValuesDisplayData[d].replace(/\s/g,""))):(aa.attr("class",""),ba.text(A.dimValuesDisplayData[d])),W.length){var k=h.find("img.vodd-dimension-img");(k=0<k.length?k.attr("src"):null)&&W.attr("src",k).show()}}else h.removeClass("vodd-row-selected");h.removeClass("vodd-row-hovered");1<A.dimensionsMap.length&&L(h,e[b.STRING_STYLE]!==b.CLASS_FOR_VODD_UNAVAILABLE);Q(n)&&(e[b.STRING_STYLE]===b.CLASS_FOR_VODD_UNAVAILABLE?(h.addClass("aok-hidden"),--c):h.removeClass("aok-hidden"))}Q(n)&&(1>=c?(H(da).addClass("aok-hidden"),
H(DIMENSION_SINGLETON_ID).removeClass("aok-hidden")):(H(DIMENSION_SINGLETON_ID).addClass("aok-hidden"),H(da).removeClass("aok-hidden")));a?u.on.load(function(){M(f)}):M(f)}function Q(){var c=!1;isHierarchicalPivoting&&topHierarchicalDimensionIndex!==parseInt(A.dimensionOrder)&&(c=!0);return c}var A=this,H=u.$,Z,C,D,J,ca,pa=!0,X,R,K,W,ba,aa,V,ea,ga,da,ma,ha,oa,T=0,na="bottom",ka=!1,fa,U=!1,O,ja,ia,S,N,P;A.onInitializeTwister=function(){I(A.initialTwisterState.getCurrentDimCombID(),!0,null);u.loadDescendantImagesManually(K);
y()};A.handlePopoverEvent=function(q,e){if(q===b.EVENT_TYPE_SHOWPOPOVER){Y();R.bind(b.EVENT_TYPE_CLICK,n);t.isTouchDevice()||R.bind(b.EVENT_TYPE_MOUSEENTER,x).bind(b.EVENT_TYPE_MOUSELEAVE,F);U=!1;var f=e.popover.$trigger,h={popover:e};f.addClass("highlighted");f.trigger("TwisterVODD.showPopup",h);C||(X=K.closest(".a-popover-inner"),C=new a(200,X,c));f=K.find("tr.vodd-row-selected");X&&X.length&&f.length&&X.scrollTop(f.get(0).offsetTop-33)}else q===b.EVENT_TYPE_HIDEPOPOVER?(f=e.popover.$trigger,h=
{popover:e},U||(d(P.SCROLL),O=null),U=!0,H(f).removeClass("highlighted"),f.trigger("TwisterVODD.hidePopup",h)):q===b.EVENT_TYPE_UPDATEPOPOVERPOSITION&&e.popover.$trigger.trigger("TwisterVODD.updatePopupPosition",{popover:e})};A.updateView=function(c){c[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_CLICK&&I(c[b.STRING_DIM_COMB_ID],!1,c[b.STRING_EVENT_DATA][b.STRING_EVENT_DIV_METADATA])};A.showVariationSelection=function(){t.isTouchDevice()||A.dimensionButton.trigger("click")};(function(){A.dimType=b.TWISTER_DIMENSION_VIEW_VODD;
A.dimensionName=l[b.STRING_DIM_NAME];A.dimensionOrder=l[b.STRING_DIM_ORDER];A.twisterControllerHandle=l[b.STRING_TWISTER_CONTROLLER_HANDLE];A.dimValuesDisplayData=l[b.STRING_DIMENSION_VALUES_DATA];A.displayConfigStylesData=l[b.STRING_DISPLAY_CONFIG_STYLES_DATA];A.initialTwisterState=l[b.STRING_TWISTER_INITIAL_STATE_KEY];A.dimensionsMap=l[b.STRING_DIMENSIONS_MAP];A.dimSubType=l[b.DIMENSION_SUB_TYPE];A.dimensionValueHasIcon=l[b.DIMENSION_VALUE_HAS_ICON];N=A.twisterControllerHandle.logger;P=N.eventTypes;
D=A.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;ja=A.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;ia=A.twisterControllerHandle.twisterJSInitData.dimensionsDisplayType;S=A.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;J=H(l[b.STRING_DIMENSIONS_MAP]).length;ca=H(".vodd-dim-wrapper").size();dimensionHierarchyData=A.twisterControllerHandle.twisterJSInitData.dimensionHierarchyData;isHierarchicalPivoting=A.twisterControllerHandle.twisterJSInitData.hierarchicalPivoting;
topHierarchicalDimensionIndex=A.twisterControllerHandle.twisterJSInitData.topHierarchicalDimensionIndex;A.initialTwisterState.asinDimensionValuesInfo||(A.initialTwisterState.asinDimensionValuesInfo={});r();A.dimensionButton=H(da);K=H(ma);R=K.find("tr");W=H(ga);ba=H(V);aa=H(ea);var c=Math.ceil(A.dimValuesDisplayData.length/T);N.logImpression(P.DIM_INIT,{count:c,dimDisplayType:b.TWISTER_DIMENSION_VIEW_VODD});ka&&z.when("A","ready").execute(function(c){B.setTimeout(function(){e()},1E3)})})()}});z.when("A",
"twister-string-constants","a-tooltip","accessibility-helper").register("twister-dimension-views-unavailablePopover",function(u,t,b,a){function g(a,b,l,e){var r=a[t.STRING_EVENT_DATA];a=r[t.STRING_EVENT_DIV_METADATA];l=l||a[t.STRING_DIM_INDEX];a=r[t.STRING_DIMENSION_SELECTION_DATA];var r=r[t.STRING_EVENT_DIM_INFO][t.STRING_DIMENSION_DISPLAY_MAP],d=b[t.STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER];b=b[t.STRING_UNAVAILABLE_POPOVER_STRING_VALUE];for(var m="",g=0;g<a.length;g++)g!==parseInt(l,10)&&1===
a[g][t.STRING_IS_SELECTED]&&(m=m?m+", "+r[g]:r[g]);e||(m="<strong>"+m+"</strong>");return d?b+" "+m:m+" "+b}function m(b){b=b.popover;var f="";b&&b.getContent()&&(f=b.getContent().text());f&&a.announceText(f)}return{setTooltip:function(a,f,l,e,r,d){l=l.find("button");l.length&&(a=g(a,r,d),b.remove(l),u.off("a:popover:show:TwisterDimViewUnavailableTooltip"+e,m),f===t.CLASS_FOR_SWATCH_UNAVAILABLE&&(b.create(l,{position:"triggerTop",content:a,inlineContent:a,name:"TwisterDimViewUnavailableTooltip"+e}),
u.on("a:popover:show:TwisterDimViewUnavailableTooltip"+e,m)))},setAriaLabel:function(a,b,l,e,r,d){l=l.find("button");l.length&&(l.attr("aria-label",""),b===t.CLASS_FOR_SWATCH_UNAVAILABLE&&(a=(l.text().trim()||l.find("img").attr("alt"))+". "+g(a,r,d,!0),l.attr("aria-label",a)))}}});z.when("A").register("twister-availabilty-cache",function(u){return function(t,b){function a(b,f){var l=b+":"+f,e=b.split("_"),r=e.length,d=-1,g,v;if(null!==m.asinToRenderCache[l]&&m.asinToRenderCache[l]!==C)return m.asinToRenderCache[l];
m.intermediateAsinToRenderCache[l]=!0;for(l=0;l<r;l++)if("X"===e[l]){d=l;break}if(-1===d)return g=null,null!=m.twisterVariationsData.dimToAsinMapData[b]&&(g=m.twisterVariationsData.dimToAsinMapData[b]),g;for(var r=m.twisterVariationsData.dimensionValuesData[d].length,p=0;p<r&&(e[d]=p,l=e.join("_"),v=l+":"+f,m.intermediateAsinToRenderCache.hasOwnProperty(v)||(g=a(l,f),null===g||g===C));p++);return g}function g(a){for(var b in m.intermediateAsinToRenderCache)m.asinToRenderCache[b]=a,delete m.intermediateAsinToRenderCache[b];
m.intermediateAsinToRenderCache={}}var m=this;m.twisterVariationsData=t;m.dimensionHierarchyData=b.dimensionHierarchyData;m.isHierarchicalPivoting=b.hierarchicalPivoting;m.dimAvailabilityCache={};m.asinToRenderCache={};m.intermediateAsinToRenderCache={};m.isUpdateCacheReq=!1;m.isDimCombinationAvailable=function(a){var b=a.split("_"),l,e=-1,r,d;l=b.length;if(null!==m.dimAvailabilityCache[a]&&m.dimAvailabilityCache[a]!==C)return m.dimAvailabilityCache[a];for(d=0;d<l;d++)if("X"===b[d]){e=d;break}if(-1===
e)return r=!1,null!==m.twisterVariationsData.dimToAsinMapData[a]&&m.twisterVariationsData.dimToAsinMapData[a]!==C&&(r=!0),m.dimAvailabilityCache[a]=r;l=m.twisterVariationsData.dimensionValuesData[e].length;for(var g=0;g<l&&(b[e]=g,d=b.join("_"),null!==m.dimAvailabilityCache[d]&&m.dimAvailabilityCache[d]!==C?r=m.dimAvailabilityCache[d]:(r=m.isDimCombinationAvailable(d),m.dimAvailabilityCache[d]=r),!r);g++);return m.dimAvailabilityCache[a]=r};m.gAsinToRender=function(b,f){var l=null,e,r,d=b.split("_"),
y=d.length,v=b+":"+f;if(null!==m.asinToRenderCache[v]&&m.asinToRenderCache[v]!==C)return m.isUpdateCacheReq&&(g(m.asinToRenderCache[v]),m.isUpdateCacheReq=!1),m.asinToRenderCache[v];m.isUpdateCacheReq||(m.isUpdateCacheReq=!0);m.intermediateAsinToRenderCache.hasOwnProperty(v)||(l=a(b,f));if(null!==l&&l!==C)return m.isUpdateCacheReq&&("X"===d[f]?(m.asinToRenderCache[v]=l,m.intermediateAsinToRenderCache={}):g(l),m.isUpdateCacheReq=!1),l;for(v=0;v<y;v++)if(e=m.isHierarchicalPivoting&&m.dimensionHierarchyData&&
m.dimensionHierarchyData[v]<m.dimensionHierarchyData[f],v!=f&&"X"!=d[v]&&!e&&(l=d[v],d[v]="X",e=d.join("_"),r=e+":"+f,d[v]=l,!m.intermediateAsinToRenderCache.hasOwnProperty(r)&&(l=a(e,f),null!==l&&l!==C)))return m.isUpdateCacheReq&&(g(l),m.isUpdateCacheReq=!1),l;l=-1;for(v=0;v<y;v++)if(e=m.isHierarchicalPivoting&&m.dimensionHierarchyData&&m.dimensionHierarchyData[v]<m.dimensionHierarchyData[f],"X"!==d[v]&&v!==f&&!e){l=v;break}if(-1===l)return"";d[l]="X";e=d.join("_");return m.gAsinToRender(e,f)}}});
z.when("A","twister-modal","twister-string-constants","twister-logger","aui-style-override").register("twister-dimension-views-ingress",function(u,t,b,a,g){return function(m,k){function f(){u.declarative(b.AUI_EVENT_FOR_INGRESS_PREFIX+m.dimOrder,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_TOUCHSTART],function(a){a.type===b.EVENT_TYPE_CLICK&&(l.logger.logImpression(l.logger.eventTypes.IMMERSIVE_OPTION_CLICK,null),l.modalHandle.openTwisterModal())});e(document).ready(function(){e(document).click(function(a){var f=
l.modalHandle.twisterModalDiv;e("#"+b.TWISTER_FEATURE_DIV_ID);a.target.id==f.attr("id")||f.has(a.target).length||a.target.id==e(l.ingressDiv).attr("id")||e(l.ingressDiv).has(a.target).length||l.modalHandle.closeTwisterModal()})})}var l=this,e=u.$;l.ingressDiv;l.dimensionData=m;l.modalHandle;if(Twister.multiDimensionWeblabEnabled)var r="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&(r="ImmersiveSwatchSingleDimensionView");l.logger=r!==C?new a(e,this,r):new a(e,this);l.logger.init();
l.twisterJSInitData=k;(function(){l.modalHandle=new t(m,l.twisterJSInitData);l.ingressDiv="#"+b.TWISTER_INGRESS_ID_PREFIX+m.dimName;f();var a=l.modalHandle.closeTwisterModal;l.modalHandle.closeTwisterModal=function(b){g.ingressOverride(e(l.ingressDiv));a.apply(l.modalHandle,b)}})()}});z.when("A","twister-utils","scroll-event-handler","twister-modal-resize-helper","twister-string-constants","twister-logger").register("twister-modal",function(u,t,b,a,g,m){B.MAX_AJAX_CONNECTIONS_ALLOWED=2;return function(b,
f){function l(){u.declarative(g.AUI_EVENT_CLOSE_MODAL_PREFIX+b.dimName,[g.EVENT_TYPE_CLICK,g.EVENT_TYPE_TOUCHSTART],function(a){a.type===g.EVENT_TYPE_CLICK&&(c.logger.logImpression(c.logger.eventTypes.IMMERSIVE_MODAL_CLOSE_CLICK,null),c.closeTwisterModal())});q(document).keyup(function(a){27==a.keyCode&&c.closeTwisterModal()});c.twisterModalContentDiv.bind("scroll",function(){q(this).scrollTop()+q(this).innerHeight()>=this.scrollHeight?(c.logger.logImpression(c.logger.eventTypes.IMMODAL_FULL_SCROLL,
null),q(g.ID_SELECTOR+c.twisterModalDivId+" ."+g.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(0==q(this).scrollTop()?q(g.ID_SELECTOR+c.twisterModalDivId+" ."+g.CLASSNAME_FOR_STYLERTOP).css("display","none"):q(g.ID_SELECTOR+c.twisterModalDivId+" ."+g.CLASSNAME_FOR_STYLERTOP).css("display","block"),q(g.ID_SELECTOR+c.twisterModalDivId+" ."+g.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});c.twisterModalContentDiv.live("DOMMouseScroll mousewheel  wheel",function(a){var b=q(this),d=this.scrollTop,
e=this.scrollHeight,f=b.height(),h=a.originalEvent.wheelDelta;"undefined"==typeof h&&(h=-a.originalEvent.deltaY);var k=function(){a.stopPropagation();a.preventDefault();return a.returnValue=!1};if(!(0<h)&&-h>e-f-d)return b.scrollTop(e),q(g.ID_SELECTOR+c.twisterModalDivId+" ."+g.CLASSNAME_FOR_STYLERBOTTOM).css("display","none"),k();if(0<=h&&h>=d)return q(g.ID_SELECTOR+c.twisterModalDivId+" ."+g.CLASSNAME_FOR_STYLERTOP).css("display","none"),b.scrollTop(0),k();q(g.ID_SELECTOR+c.twisterModalDivId+" ."+
g.CLASSNAME_FOR_STYLERBOTTOM).css("display","block");q(g.ID_SELECTOR+c.twisterModalDivId+" ."+g.CLASSNAME_FOR_STYLERTOP).css("display","block")})}function e(){return t.isPartialState(c.dimensions.length)}function r(){var a=g.AUI_EVENT_VISIBILITY_PREFIX+c.dimName;q(g.ID_SELECTOR+c.twisterModalDivId+" .swatches li").appearedInTwisterImmersiveView({force_process:!0,$window:c.twisterModalDiv,$scrollHandlerDiv:c.twisterModalContentDiv,eventToBeTriggered:a,blockIsAppear:e});u.on(a,function(a){for(a=a[0].slice(0);a.length;)c.requestStack.push(a.splice(0,
c.maxSwatchLimitForImmersive));d()})}function d(){if(!(0>=c.requestStack.length)&&c.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){c.noOfOngoingConnections++;for(var a=c.requestStack.shift(),b=[],e=0,f=a.length;e<f;e++){var k=q(a[e]).find(".a-declarative"),l=k.attr("data-action"),k=JSON.parse(k.attr("data-"+l)).dimValueIndex;b.push(k)}h(b);d()}}function y(a){c.initData.fnToDetermineSelectedVariations?"function"===typeof c.initData.fnToDetermineSelectedVariations&&(c.currentDimCombOnGlance=
c.initData.fnToDetermineSelectedVariations.call(c)):(c.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,c.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID);return a?c.currentDimCombOnGlance.split("_"):c.currentDimCombOnGlance}function v(a){var b=y(!0);b[a]=c.symbolForTriggeringDim;var b=b.join("_"),q={},d={};a=dimensionValuesList[a];if(!c.mapOfDimToAsinMaps[b]){for(var e=0,f=a.length;e<f;e++){var h=b.replace(c.symbolForTriggeringDim,e);
(h=dimensionToAsinMap[h])?(q[a[e]]=h,d[h]=a[e]):q[a[e]]=""}q&&(c.mapOfDimToAsinMaps[b]=q);d&&(c.mapOfAsinToDimMaps[b]=d)}}function p(a,b,d){d=[];var e=y(!0).slice(0);e[b]=c.symbolForTriggeringDim;e=e.join("_");e=c.mapOfDimToAsinMaps[e];b=dimensionValuesList[b];for(var f=0,h=a.length;f<=h;f++){var k=a[f],l=b[k];l&&((l=e[l])?d.push(l):(k=q(".twister_"+c.dimName+"_"+k+" .twisterSlotDiv"),k.html("<span class='a-color-tertiary'>- -</span>"),k.css("display","")))}return d}function h(a){var b={};b.indices=
a;b.dimTriggeringDimSum=c.dimensionData.dimName;b.dimSubType=c.dimSubType;var e=dimensionsList.indexOf(b.dimTriggeringDimSum);b.dimType=dimensionsDisplayTypesArray[e];v(e);b.asinList=p(a,e,b);0==b.asinList.length?(c.noOfOngoingConnections--,d()):(b.dimCombId=y(!1),b.executeChunk=function(){var a=DetailPage.StateController.getState().currentDimCombID,q=a.split("_"),d=b.dimCombId.split("_");if(b.dimCombId===a)return!0;if(!t.isPartialState(c.dimensions.length)){for(var a=c.dimensions.length,e=!0,f=0;f<
a;f++)if(f!==parseInt(c.dimOrder)&&d[f]!==q[f]){e=!1;break}return e}return!1},b.chunk=function(a,b){a.dimensionValue=dimensionsList[b.dimIndexTriggeringDimSum]+"_"+dimensionValuesList[b.dimIndexTriggeringDimSum].indexOf(c.mapOfAsinToDimMaps[b.hashKey][a.ASIN]);var n=q(".twister_"+a.dimensionValue+" .twisterSlotDiv");n.css("display","");if(Twister.multiDimensionWeblabEnabled){for(var d="",e=0;a.Value.content.twisterSlotDiv[e];)"IMAGE"===c.dimSubType&&(d+="<div>"),d+=a.Value.content.twisterSlotDiv[e],
"IMAGE"===c.dimSubType&&(d+="</div>"),e++;n.html(d)}else n.html(a.Value.content.twisterSlotDiv)},b.success=function(a,b,n,q){(a=c.getWindowWidth())&&a<c.slotsEligibleWidth?c.resizeHelperHandle.fixSize(c.$twisterModalSwatches,c.swatchWrapper,c.swatchDynaWrapper,c.ingressWrapper,c):c.resizeHelperHandle.fixSize(c.$swatches,c.swatchWrapper,c.swatchDynaWrapper,c.ingressWrapper,c);c.noOfOngoingConnections--;d()},b.error=function(){c.noOfOngoingConnections--;d()},b.abort=function(){c.noOfOngoingConnections--;
d()},Twister.dimensionalSummaryModule.fetchDimSumData(b))}var c=this,q=u.$;c.maxSwatchLimitForImmersive;c.dimensionData=b;c.dimOrder=c.dimensionData.dimOrder;c.centerColDivId=g.ID_SELECTOR+g.CENTER_COL_DIV_ID;c.centerColDiv=q(c.centerColDivId);c.twisterModalDivId=g.TWISTER_MODAL_ID_PREFIX+c.dimensionData.dimName;c.twisterModalDiv=q(g.ID_SELECTOR+c.twisterModalDivId);c.variationsPrefix="variation_";c.swatchWrapperClassForAnimation="twisterSwatchWrapper";c.swatchWrapper=".twisterSwatchWrapper_"+c.dimOrder;
c.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+c.dimOrder;c.ingressWrapper="twisterIngressWrapper_"+c.dimOrder;c.glanceSwatchContainer=g.ID_SELECTOR+c.variationsPrefix+c.dimensionData.dimName;c.twisterModalContentDiv=q(g.ID_SELECTOR+g.MODAL_CONTENTDIV_PREFIX+c.dimensionData.dimName);c.twisterModalHeaderDiv=q(g.ID_SELECTOR+g.MODAL_HEADER_PREFIX+c.dimensionData.dimName);c.resizeHelperHandle;c.twisterFeatureDiv=q(g.ID_SELECTOR+g.TWISTER_FEATURE_DIV_ID);c.$swatches=q(c.swatchWrapper);c.$twisterModalSwatches=
q(".twisterModal "+c.swatchWrapper);c.$subNav=q(g.ID_SELECTOR+"nav-subnav");c.modalWidth;c.contentDivWidth;c.contentDivHeight;c.requestStack=[];c.noOfOngoingConnections=0;c.isModalOpen=0;c.isSlotRowPopulated=!1;c.showModalFadeDuration=500;c.isIE8=q("html").hasClass("a-lt-ie9");c.slotsEligibleWidth=1100;c.windowWidth=B.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;c.executeResizeSwatchesForThin=0;c.logger=new m(q,this,Twister.multiDimensionWeblabEnabled?"ImmersiveMultiDimensionView":
"ImmersiveSwatchSingleDimensionView");c.logger.init();c.twisterJSInitData=f;c.symbolForTriggeringDim="*";c.currentDimCombOnGlance="";c.mapOfDimToAsinMaps={};c.mapOfAsinToDimMaps={};c.dimName=c.dimensionData.dimName;c.dimValuesDisplayData=c.dimensionData.dimValuesDisplayData;c.noOfDimValues=c.dimValuesDisplayData.length;c.maxSwatchLimitForImmersive=c.dimensionData.maxSwatchLimitForImmersive;c.dimSubType=c.dimensionData.dimSubType;c.dimensions=c.twisterJSInitData.dimensions;dimensionValuesList=c.twisterJSInitData.dimensionValuesData;
dimensionDisplayLabels=c.twisterJSInitData.dimensionsDisplay;dimensionToAsinMap=c.twisterJSInitData.dimToAsinMapData;asinToDimIndexMapData=c.twisterJSInitData.asinToDimIndexMapData;dimensionsList=c.twisterJSInitData.dimensions;dimensionsDisplayTypesArray=f.dimensionsDisplayType;c.initData={};c.initData.scopeSuffix="twister";c.symbolForTriggeringDim="*";c.resizeHelperHandle=new a;c.closeTwisterModal=function(){c.isModalOpen&&(t.enableTwisterDiv(),c.isIE8?c.twisterModalDiv.css("display","none"):c.twisterModalDiv.fadeOut(c.showModalFadeDuration),
c.isModalOpen=0)};c.resizeSwatchesForThinWidths=function(){var a=document.getElementById("twister").querySelectorAll(c.swatchWrapper),b=a.length;c.getWindowWidth();if(c.executeResizeSwatchesForThin)for(var d=c.executeResizeSwatchesForThin=0;d<b;d++)q(a[d]).addClass(g.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE)};c.openTwisterModal=function(){if("centerCol"!==c.twisterModalDiv.parent().attr("id"))q(c.centerColDivId+" > hr").first().after(c.twisterModalDiv),l(),b.isSlotsEnabled&&r();else{var a=g.AUI_EVENT_VISIBILITY_PREFIX+
c.dimName;q(g.ID_SELECTOR+c.twisterModalDivId+" .swatches li").forceAppear({force_process:!0,$window:c.twisterModalDiv,$scrollHandlerDiv:c.twisterModalContentDiv,eventToBeTriggered:a,blockIsAppear:e})}c.fixModalSwatchesForThinWidths();c.twisterModalDiv.css("display","block");a=c.twisterModalDiv.css("transition-duration");c.$twisterModalSwatches.removeClass(c.swatchWrapperClassForAnimation);a!=C&&c.twisterModalDiv.css("transition-duration","0s");c.resizeHelperHandle.fixSize(c.$swatches,c.swatchWrapper,
c.swatchDynaWrapper,c.ingressWrapper);c.twisterModalDiv.css({"z-index":"290"});var n,d=q(c.glanceSwatchContainer+" li"),f;f=d.first()[0].getBoundingClientRect();n=f.left;for(var h=f.top,p=0,m=1,d=d.length;m<d;m++){var v;v=q(c.glanceSwatchContainer+" li:eq("+m+")")[0].getBoundingClientRect();if(5<Math.abs(h-v.top))break;else p=v.right}n=0<p?p-n+55:f.right-n+55;c.setModalWidth(n);c.twisterModalContentDiv.css({"max-height":"420px"});f=q(".twisterModal_innerDiv ul").outerHeight()>q(".twisterModal_innerDiv").outerHeight()+
15;-1<navigator.platform.indexOf("Win")&&f&&(n=parseInt(n)+25+"px",c.twisterModalDiv.css("width",n));f&&c.logger.logImpression(c.logger.eventTypes.IMMODAL_VISIBLE_SCROLLBAR,null);c.resizeSwatchesForThinWidths();c.twisterModalDiv.offset();c.twisterModalDiv.outerHeight();500<q(B).height()&&(c.isIE8?(h=c.twisterModalDiv.offset().top+document.documentElement.scrollTop+c.twisterModalDiv.outerHeight(),n=c.twisterModalDiv.offset().top+document.documentElement.scrollTop,f=c.$subNav.offset().top+document.documentElement.scrollTop+
c.$subNav.outerHeight()):(h=c.twisterModalDiv.offset().top+c.twisterModalDiv.outerHeight(),n=c.twisterModalDiv.offset().top,f=c.$subNav.offset().top+c.$subNav.outerHeight()),h>q(B).height()&&(h-=q(B).height(),n=n-h-30,0<h&&(n>f?c.twisterModalDiv.offset({top:n}):c.twisterModalDiv.offset({top:f+20}))));h=c.glanceSwatchContainer+" ."+c.ingressWrapper+":first";f="#"+c.twisterModalDivId+":first";c.isIE8?(offSetTopIngress=q(h).offset().top+document.documentElement.scrollTop,offSetTopModal=q(f).offset().top+
document.documentElement.scrollTop):(offSetTopIngress=q(h).offset().top,offSetTopModal=q(f).offset().top);n=q(f).outerHeight();h=q(h).outerHeight();n=offSetTopIngress+h-(offSetTopModal+n);0<n&&(n+=offSetTopModal,q(f).offset({top:n}));t.disableTwisterDiv();c.twisterModalContentDiv.get(0).scrollHeight>c.twisterModalContentDiv.get(0).clientHeight?q(g.ID_SELECTOR+c.twisterModalDivId+" ."+g.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"):q(g.ID_SELECTOR+c.twisterModalDivId+" ."+g.CLASSNAME_FOR_STYLERBOTTOM).css("display",
"none");c.twisterModalDiv.css("display","none");a!=C&&(c.$twisterModalSwatches.addClass(c.swatchWrapperClassForAnimation),c.twisterModalDiv.css("transition-duration",a));c.twisterModalDiv.fadeIn(c.showModalFadeDuration);c.isModalOpen=1};c.fixModalSwatchesForThinWidths=function(){var a=document.getElementById("twister").querySelectorAll(c.swatchWrapper),b=a.length,d=c.getWindowWidth();if(d&&d<c.slotsEligibleWidth)for(c.executeResizeSwatchesForThin=1,d=0;d<b;d++)q(a[d]).removeClass(g.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE)};
c.getWindowWidth=function(){return B.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};c.setModalWidth=function(a){var b=c.twisterFeatureDiv.css("width");a=parseInt(a);c.twisterModalDiv.css({width:a?a+"px":b});b=(a?a:b)-30;q(g.ID_SELECTOR+c.twisterModalDivId+" ."+g.CLASSNAME_FOR_STYLERBOTTOM).css("width",b+"px");q(g.ID_SELECTOR+c.twisterModalDivId+" ."+g.CLASSNAME_FOR_STYLERTOP).css("width",b+"px")}}});z.when("A","twister-string-constants").register("twister-utils",function(u,
t){var b=u.$,a=this,g={};a.windowWidth=B.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;a.immersiveTwisterOverlay=b("#"+t.TWISTER_FEATURE_DIV_ID+" #"+t.IMMERSIVE_TWISTER_OVERLAY);a.twisterFeatureDiv=b("#"+t.TWISTER_FEATURE_DIV_ID);(function(){for(var a="Array Object String Date RegExp Function Boolean Number Null Undefined".split(" "),b=0,f=a.length;b<f;b++)g["is"+a[b]]=function(a){return function(b){return Object.prototype.toString.call(b).slice(8,-1)===a}}(a[b])})();
return{enableTwisterDiv:function(){a.immersiveTwisterOverlay.css({opacity:"0",position:"absolute",width:"0px",height:"0px"})},disableTwisterDiv:function(){var b=a.twisterFeatureDiv.get(0).clientWidth,k=a.twisterFeatureDiv.get(0).clientHeight;a.immersiveTwisterOverlay.css({opacity:"0.8",position:"absolute",width:b,height:k,"background-color":"white","z-index":10})},isSwatchSelected:function(a,b){var f=Twister.isImmersiveExperience?"."+t.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[t.STRING_DIM_INDEX]]+
"_"+a[t.STRING_DIM_VALUE_INDEX]:"#"+b.dimensionsMap[a[t.STRING_DIM_INDEX]]+"_"+a[t.STRING_DIM_VALUE_INDEX],l=[],e;if(u.$(f).is("li")){l=u.$(f);!Twister.isImmersiveExperience||0<l.length||(l=u.$("."+t.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[t.STRING_DIM_INDEX]]+"_"+a[t.STRING_DIM_VALUE_INDEX]));for(var l=l.get(0).className.split(" "),f=0,r=l.length;f<r;f++){var d=l[f];if(0===d.indexOf("swatch")){e=d;break}}e!==t.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER&&e!==t.CLASS_FOR_SWATCH_UNAVAILABLE||u.$("#twisterPopover.twisterPopoverSkin").hide();
return e===t.CLASS_FOR_SWATCH_SELECT}return!1},isPartialState:function(a){for(var b=DetailPage.StateController.getState().currentDimCombID.split("_"),f=!1,l=0;l<a;l++)if("X"===b[l]){f=!0;break}return f},getProductizedTwisterSelectionFromDivMetaData:function(a,b){for(var f=[],l=a.dimIndex,e=a.dimValueIndex,r=0;r<b.length;r++)if(l===parseInt(r,10)){l={};l.dimKey=b[r];l.val=parseInt(e,10);f.push(l);break}return f},getProductizedTwisterSelectionFromDimComb:function(a,b){for(var f=[],l=a.replace(/X/g,
"-1").split("_"),e=0;e<b.length;e++){var r={},d=l[e];r.dimKey=b[e];r.val=parseInt(d,10);f.push(r)}return f},getImmersivePartialStateBannerContent:function(a,b){for(var f="",l=Twister.immersivePartialStateMessage,e=a.dimensionSelectionData,r=a.dimensionsDisplay,d=0;d<e.length;d++)d!==b&&0===e[d][t.STRING_IS_SELECTED]&&(f=f?f+", "+r[d]:r[d]);return l.replace("dimName",f)},getImmersiveFullStateBannerContent:function(a,b){for(var f="",l=Twister.immersiveFullySelectedStateMessage,e=a.dimensionSelectionData,
r=a.dimensions,d=a.dimensionsDisplay,g=DetailPage.StateController.getState().selected_variations,v=0;v<e.length;v++)v!==b&&1===e[v][t.STRING_IS_SELECTED]&&(f=f?f+", "+d[v]+" "+g[r[v]]:d[v]+" "+g[r[v]]);return l.replace("dimName",f)},isSmallerWidthScreen:function(){return 1100>a.windowWidth?1:0},getAttachedClass:function(a,k){var f=a[t.STRING_DIM_VALUE_INDEX],l="#"+k+"_"+f;if(u.$(l).is("li")){var e=[],r,e=u.$(l);!Twister.isImmersiveExperience||0<e.length||(e=b("."+t.TWISTER_SWATCH_CLASS_PREFIX+k+"_"+
f));e=e.get(0).className.split(" ");f=0;for(l=e.length;f<l;f++){var d=e[f];if(0===d.indexOf("swatch")){r=d;break}}return r}l=Twister.isImmersiveExperience?t.IMMERSIVE_DROPDOWN_ROW_PREFIX+k+"_"+f:t.NATIVE_DROPDOWN_DIV_PREFIX+k+"_"+f;return u.$(l).attr("class")},htmlUnescape:function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},getDimStyleData:function(a,b,f,l,e){a=a.split("_");for(var r=[],d=a.slice(0),g,v,p=0;p<b;p++)v=
{},a[f]===p.toString()?g=t.STYLE_CLASS_TYPE_FOR_SELECTED:(d[f]=p,g=d.join("_"),g=(g=l.isDimCombinationAvailable(g))?t.STYLE_CLASS_TYPE_FOR_AVAILABLE:t.STYLE_CLASS_TYPE_FOR_INAVLID),g=e[g],v.style=g,r[p]=v;return r},getVisibleTableRows:function(a,k){var f=[],l=a.getBoundingClientRect();k||(k=b(a).find("tr"));if(k.length)for(var e=0;e<k.length;e++){var r=k.get(e),d=r.getBoundingClientRect(),g=(d.bottom-d.top)/2,v=l.bottom+g;l.top-g<d.top&&v>d.bottom&&f.push(r);if(l.bottom<d.top)break}return f},reconstructCombinationWithDimValue:function(a,
b,f){if(!a)return a;var l=a.split(t.CHAR_UNDERSCORE);if(b>=l.length)return a;l[b]=f;return l.join(t.CHAR_UNDERSCORE)},isTouchDevice:function(){return u.capabilities.touch},typeChecker:g,getQueryParams:function(a){a=a===C?{}:a;var k={},f=decodeURIComponent(B.location.href).match(/^.*?\?(.*?)(#.*)?$/);if(null===f||2>f.length||f[1]===C)return{};f=f[1].split("&");b.each(f,function(b,e){var f=e.split("=");2>f.length||a.hasOwnProperty(f[0])||(k[f[0]]=f[1])});return k},stringTrim:function(a){var b=/^\s+/,
f=/\s+$/;return String.prototype.trim?String.prototype.trim.call(a):a.replace(b,"").replace(f,"")}}});z.when("A").register("twister-string-constants",function(u){return{YES:"YES",NO:"NO",MTYPE_PARENT:"parent",MTYPE_PARTIAL:"partial",MTYPE_FULL:"full",MTYPE_MASTER:"master",AUI_DROPDOWN_EVENT_PREFIX:"a:dropdown:selected:",AUI_EVENT_FOR_SWATCHTHUMB:"swatchthumb-action",CHAR_COLON:":",CHAR_SEMICOLON:";",CHAR_UNDERSCORE:"_",CLASS_FOR_DROPDOWN_UNAVAILABLE:"dropdownUnavailable",CLASS_FOR_NEW_TWISTER_EVDD:"#newTwisterEVDD",
CLASS_FOR_NON_JS_EVDD:"#nonJSEVDD",CLASS_FOR_SWATCH_AVAILABLE:"swatchAvailable",CLASS_FOR_SWATCH_HOVER:"swatchHover",CLASS_FOR_SWATCH_SELECT:"swatchSelect",CLASS_FOR_SWATCH_UNAVAILABLE:"swatchUnavailable",CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:"swatchUnavailableHover",AUI_CLASS_FOR_SWATCH_UNAVAILABLE:"a-button-unavailable",AUI_CLASS_FOR_SWATCH_SELECT:"a-button-selected",CLASS_FOR_VODD_AVAILABLE:"voddAvailable",CLASS_FOR_VODD_HOVER:"voddHover",CLASS_FOR_VODD_SELECT:"voddSelect",CLASS_FOR_VODD_UNAVAILABLE:"voddUnavailable",
CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION:"dropdownSelect",DROPDOWN_DIV_NAME:"dropdown_selected_",EVENT_TYPE_SHOWPOPOVER:"showPopover",EVENT_TYPE_HIDEPOPOVER:"hidePopover",EVENT_TYPE_UPDATEPOPOVERPOSITION:"updatePopoverPosition",EVENT_TYPE_DROPDOWN_CHANGE:"dropdownChange",EVENT_TYPE_CLICK:"click",EVENT_TYPE_MOUSEENTER:"mouseenter",EVENT_TYPE_MOUSELEAVE:"mouseleave",EVENT_TYPE_MOUSEDOWN:"mousedown",EVENT_TYPE_MOUSEOUT:"mouseOut",EVENT_TYPE_MOUSEOVER:"mouseOver",EVENT_TYPE_TOUCHSTART:"touchstart",EVENT_TYPE_TOUCHEND:"touchend",
EVENT_TYPE_TOUCHMOVE:"touchmove",EVENT_TYPE_KEYPRESS:"keypress",ID_SELECTOR:"#",CLASS_SELECTOR:".",TWISTER_POPOVER:"twisterPopover",INDEX_FOR_SELECT_OPTION:"-1",INIT_DATA_ASIN_TO_DIM_INDEX_MAP:"asinToDimIndexMapData",INIT_DATA_DELETED_LANDING_ASIN_INFO:"deletedLandingAsinInfo",INIT_DATA_DIM_TO_ASIN_MAP:"dimToAsinMapData",INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA:"dimensionValuesDisplayData",INIT_DATA_DIMENSIONS_DISPLAY:"dimensionsDisplay",INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP:"dimensionsDisplayType",
INIT_DATA_DIMENSIONS_MAP:"dimensions",INIT_DATA_VARIATIONS_DISPLAY_LABELS:"variationDisplayLabels",INIT_DATA_MAX_POPOVER_HEIGHT:"maxPopoverHeight",INIT_DATA_VISIBLE_ROW_COUNT:"visibleRowCount",INIT_DATA_POPOVER_POSITION:"popoverPosition",INIT_DATA_ANIMATE_BUTTON_CONTENT:"animateButtonContent",INIT_DATA_DISPLAY_TYPE_PROPERTIES:"displayTypeProperties",NATIVE_DROPDOWN_DIV_PREFIX:"#native_",STRING_CSS_CLASS:"css_class",STRING_DIM_COMB_ID:"dimCombID",STRING_DIM_DATA:"dimData",STRING_DIM_INDEX:"dimIndex",
STRING_DIM_NAME:"dimName",STRING_DIM_ORDER:"dimOrder",STRING_DIM_VALUE_INDEX:"dimValueIndex",STRING_DIMENSION_DISPLAY_MAP:"dimensionDisplayMap",STRING_DIMENSION_DISPLAY_STRING:"dimensionDisplayString",STRING_DIMENSION_SELECTION_DATA:"dimensionSelectionData",STRING_DIMENSION_VALUES_DATA:"dimensionValuesData",STRING_DIMENSION_VALUES_DATA_GLOBAL:"dimensionValuesDataGlobal",STRING_DIMENSIONS_MAP:"dimensionsMap",STRING_DISPLAY_CONFIG_STYLES_DATA:"displayConfigStylesData",STRING_EVENT_DATA:"eventData",
STRING_EVENT_DIM_DATA:"dimData",STRING_EVENT_DIM_INFO:"eventDimInfo",STRING_EVENT_DIV_METADATA:"divMetaData",STRING_EVENT_POPOVER_DATA:"popoverData",STRING_EVENT_TYPE:"eventType",STRING_HIDE_POPOVER:"hidePopover",STRING_HOVER_MS:"hoverMS",STRING_IS_REQUIRED:"isRequired",STRING_IS_SELECTED:"isSelected",STRING_NATIVE_CSS_CLASS:"native_css_class",STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER:"showDimSecondUnavailablePopover",STRING_STYLE:"style",STRING_TWISTER_CONTROLLER_HANDLE:"twisterControllerHandle",
STRING_TWISTER_INITIAL_STATE_KEY:"twisterInitialState",STRING_UNAVAILABLE_POPOVER_STRING_VALUE:"unavailablePopOverStringValue",STRING_ACCESSIBILITY_CURRENT_SELECTION:"twisterAccessibilityCurrentSelection",STRING_USE_MS:"useMS",STYLE_CLASS_TYPE_FOR_AVAILABLE:"available",STYLE_CLASS_TYPE_FOR_INAVLID:"invalid",STYLE_CLASS_TYPE_FOR_SELECTED:"selected",TWISTER_DIMENSION_VIEW_DROPDOWN:"dropdown",TWISTER_DIMENSION_VIEW_EVDD:"etdd",TWISTER_DIMENSION_VIEW_SINGLETON:"singleton",TWISTER_DIMENSION_VIEW_SWATCH:"swatch",
TWISTER_DIMENSION_VIEW_VODD:"vodd",TWISTER_DIMENSION_VIEW_COUNTER:"counter",TWISTER_DIMENSION_VIEW_SHELF:"shelf",TWISTER_EVENT_DATA_DIV_METADATA:"divMetaData",TWISTER_EVENT_DATA_DISPLAY_TYPE:"dimDisplayType",TWISTER_EVENT_DATA_TIME:"time",TWISTER_EVENT_DATA_DURATION:"duration",TWISTER_EVENT_DATA_COUNT:"count",TWISTER_EVENT_DATA_PERCENTAGE:"percentage",TWISTER_EVENT_DATA_DIM_INDEX:"dimIndex",MODAL_SWATCH_PREFIX:"modal_",STRING_MAX_SWATCHES_IMMERSIVE_VIEW:"maxSwatchesForImmersiveView",TWISTER_SWATCH_CLASS_PREFIX:"twister_",
PRICE_SLOT_CLASS_NAME:"twister_swatch_price",CLASS_FOR_PRICE_SECONDARY:"a-color-secondary",CLASS_FOR_PRICE_SELECTED:"a-color-price",TWISTER_MODAL_ID_PREFIX:"twister_modal_",TWISTER_INGRESS_ID_PREFIX:"twister_ingress_",AUI_EVENT_FOR_INGRESS_PREFIX:"twister-ingress-click-",TWISTER_FEATURE_DIV_ID:"twister_feature_div",IMMERSIVE_TWISTER_OVERLAY:"immersiveTwisterOverlay",CENTER_COL_DIV_ID:"centerCol",MODAL_CONTENTDIV_PREFIX:"twister_modal_innerDiv_",MODAL_HEADER_PREFIX:"twister_modal_header_",IMMERSIVE_DROPDOWN_ROW_PREFIX:"twister_idd_",
DYNAMIC_STYLE_RULES_ID:"twisterSwatchWrapperDynaStyle",CLASSNAME_FOR_STYLERBOTTOM:"twisterModal_stylerBottom",CLASSNAME_FOR_STYLERTOP:"twisterModal_stylerTop",CLASSNAME_FOR_SWATCH:"twisterSwatchWrapper",CLASSNAME_FOR_INGRESS:"twisterIngressWrapper",AUI_EVENT_CLOSE_MODAL_PREFIX:"close-twisterModal-",AUI_EVENT_VISIBILITY_PREFIX:"twister-appear-",CLASSNAME_FOR_THIN_WIDTH_OVERRIDE:"thinWidthOverride",DIMENSION_SUB_TYPE:"dimensionDisplaySubType",AUI_EVENT_FOR_COUNTER:"twister_counter-action",EXPANDED_VIEW_ENABLED:"expandedViewEnabled",
MIN_HEIGHT_EXPANDED_SECTION:"minHeightForExpandedSection",MAX_HEIGHT_EXPANDED_SECTION:"maxHeightForExpandedSection",MIN_ASINS_FOR_EXPANDED_VIEW:"minAsinForExpandedView",MIN_ASINS_FOR_EXPANDED_VIEW_TEXT:"minAsinForExpandedViewText",MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE:"minAsinForExpandedViewImage",MIN_ASINS_FOR_EXPANDED_SCROLL:"minAsinForExpandedScroll",MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT:"minAsinForExpandedScrollText",MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE:"minAsinForExpandedScrollImage",SUFFIX_FOR_DROPDOWN_PANEL_PLACEHOLDER:"_placeHolderDivForDD",
DIMENSION_VALUE_HAS_ICON:"isIconPresentForDimensionValue",HIDDEN_DIMENSION_DISPLAY_TYPE:"hidden",PRODUCTIZATION_ENABLED:"isProductizationEnabled",PRODUCTIZATION_ENABLED_KEY:"isProductizationEnabled",PRODUCTIZATION_VIEW_ENABLED_KEY:"isViewProductizationEnabled"}});z.when("A").register("aui-style-override",function(u){return{doOverride:function(){},ingressOverride:function(){}}});z.when("A").register("twister-thumbnailModule",function(u){var t=u.$;return{attach:function(b){var a=t("#dropdown_selected_thumbnail_"+
b);b=t("#dropdown_selected_"+b+" .a-button-inner");0<a.length&&0<b.length&&(a.detach(),b.append(a),"#"!==a.attr("src")&&a.show())},update:function(b){var a=t("#native_dropdown_selected_"+b).val().split(",")[0];"undefined"!==typeof a&&"-1"!==a&&(a=t("#native_"+b+"_"+a),a=0<a.length?a.attr("data-a-image-source"):"",b=t("#dropdown_selected_thumbnail_"+b),0<b.length&&""!==a?(b.attr("src",a),b.show()):b.hide())},preloadAllThumbnails:function(b){if(b){var a=t("#native_dropdown_selected_"+b+" option");b=
t("#dropdown_selected_"+b).attr("data-a-class");a&&b&&-1!==b.indexOf("twister-image-dropdown")&&t.each(a,function(a,b){var k=b.getAttribute("data-a-image-source");k&&((new Image).src=k)})}}}});z.when("A","twister-string-constants","scroll-event-handler").execute(function(u,t,b){(function(a){function g(b){function l(d,f){var c=a(f).get(0).getBoundingClientRect(),q=b.$window.get(0).getBoundingClientRect(),k=q.right-q.left,n=q.bottom-q.top;return q.top<c.top&&c.top<q.top+n&&q.left<c.left&&c.left<q.left+
k}f=!1;for(var d=0,m=b.selector.length;d<m;d++){var g=[];b.blockIsAppear!==C&&b.blockIsAppear()||(g=a(b.selector[d]).filter(function(){return a(this).is(l)}).not(k));0<g.length&&(u.trigger(b.eventToBeTriggered,[g.clone()]),k=k.add(g))}}var m=[],k=a(),f=!1,l={interval:250,force_process:!1};a.fn.extend({appearedInTwisterImmersiveView:function(e){var k=a.extend({},l,e||{}),d=this.selector||this;k.selector=[];k.selector[0]=d;var y=function(){f||(f=!0,setTimeout(function(){g(k)},k.interval))};new b(200,
e.$scrollHandlerDiv,y);e.$window.resize(y);k.force_process&&setTimeout(function(){g(k)},k.interval);m.push(d);return a(d)},forceAppear:function(b){var f=a.extend({},l,b||{});b=this.selector||this;f.selector=[];f.selector[0]=b;setTimeout(function(){g(f)},f.interval)},invalidateAppearedAlreadyCache:function(a){k=k.not(this.selector)}})})(u.$)});z.when("A","twister-utils","twister-string-constants","twister-expander").register("twister-counter",function(u,t,b,a){return function(g,m){function k(c){x=
y(b.ID_SELECTOR+c.data.dimValueSelectedID);var a=t.reconstructCombinationWithDimValue(d.currDimCombID,c.data[b.TWISTER_EVENT_DATA_DIM_INDEX],c.data[b.STRING_DIM_VALUE_INDEX]);d.currDimCombID!=a&&d.twisterControllerHandle&&d.twisterControllerHandle.handleClick(c.data)}function f(a){var n=a[b.STRING_EVENT_DATA][b.STRING_EVENT_DIV_METADATA][b.TWISTER_EVENT_DATA_DISPLAY_TYPE];G=y(c+a.dimCombID.split(b.CHAR_UNDERSCORE)[d.dimOrder]);(L=y(".vodd-dim-wrapper").length)&&G.hasClass("counter_unavailable")&&
n===b.TWISTER_DIMENSION_VIEW_COUNTER&&u.animate(y(".vodd-dim-wrapper"),{scale:1.1},150,"ease-in",function(){u.animate(y(".vodd-dim-wrapper"),{scale:1},100,"ease-out",function(){})})}function l(a,b){var n=y(c+b);a?n.addClass("hoverSwatch"):n.removeClass("hoverSwatch")}function e(){"undefined"===typeof d.$variationList&&(d.$variationList=y("#"+b.TWISTER_DIMENSION_VIEW_COUNTER+"-"+d.dimName+" .counterSwatch"));for(var c=d.$variationList,a=d.initialTwisterState.getCurrentDimCombID(),n=parseInt(d.dimOrder),
q=[],e=0;e<c.length;e++){5===q.length&&(r(q),q=[]);var f;(f=c[e].id)?(f=f.split(b.CHAR_UNDERSCORE),f=f[f.length-1]):f=-1;f=t.reconstructCombinationWithDimValue(a,n,f);(f=d.dimensionToAsinMap[f])?q.push(f):y(c[e]).addClass("counter_unavailable")}0<q.length&&r(q)}function r(a){var b=M.createFunctionTimer(M.eventTypes.DIM_SUM_LOAD);b.start();var n=function(){b.stop()};0<a.length&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:C,asinList:a,dimTriggeringDimSum:d.dimName,dimSubType:d.dimSubType,
dimType:d.dimType,chunk:function(a){var b=parseInt(z[a.ASIN][parseInt(d.dimOrder)]),b=y(c+b);0<a.Value.content.twisterSlotDiv.length&&b.removeClass("counter_unavailable")},success:function(c,a,b,q){n()},error:n,abort:n})}var d=this,y=u.$,v=y(b.ID_SELECTOR+"expanderButton"),p=y(b.ID_SELECTOR+"collapseButton"),h,c,q,w,n,x,F,G,L,E,M,z;d.updateView=function(a){if(a[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_CLICK&&d.currDimCombID!=a[b.STRING_DIM_COMB_ID]){var q=a[b.STRING_EVENT_DATA][b.STRING_EVENT_DIM_INFO][b.STRING_DIMENSION_VALUES_DATA][d.dimOrder];
F.css("z-index",0);x.css("z-index",1);h.html(q);x=y(c+a.dimCombID.split(b.CHAR_UNDERSCORE)[d.dimOrder]);x.removeClass("hoverSwatch");F.removeClass("selectedSwatch");x.addClass("selectedSwatch");f(a);e();d.currDimCombID=a[b.STRING_DIM_COMB_ID];u.trigger("counter:select",d.currDimCombID);null!=E&&(E.updateSelectedVariation(d.currDimCombID,x),E.isCollapsed&&n&&E.handleVariationSwap(n),E.isCollapsed?E.handleVariationSwap(!0):E.scrollVariationIntoView());F=x}};d.selectCounterVariationAtIndex=function(a){n=
!0;y(c+a).children().click()};d.getCurrentSelectedIndex=function(){return parseInt(d.currDimCombID,10)};d.expandCounter=function(){null!=E&&E.isCollapsed&&E.handleExpand()};d.onInitializeTwister=function(){e()};d.dimOrder=m[b.STRING_DIM_ORDER];d.dimName=m[b.STRING_DIM_NAME];d.dimensionsMap=m[b.STRING_DIMENSIONS_MAP];d.dimNameDisplayString=m[b.STRING_DIMENSION_DISPLAY_STRING];d.dimValuesDisplayData=m[b.STRING_DIMENSION_VALUES_DATA];d.twisterControllerHandle=m[b.STRING_TWISTER_CONTROLLER_HANDLE];d.initialTwisterState=
m[b.STRING_TWISTER_INITIAL_STATE_KEY];d.dimensionToAsinMap=d.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;g.useCounterConfig?(d.expandedViewEnabled=g[b.EXPANDED_VIEW_ENABLED],d.minAsinsForExpandedView=g[b.MIN_ASINS_FOR_EXPANDED_VIEW],d.minAsinsForExpandedScroll=g[b.MIN_ASINS_FOR_EXPANDED_SCROLL]):(d.displayTypeProperties=g[b.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder],d.expandedViewEnabled=d.displayTypeProperties[b.EXPANDED_VIEW_ENABLED],d.minAsinsForExpandedView=d.displayTypeProperties[b.MIN_ASINS_FOR_EXPANDED_VIEW],
d.minAsinsForExpandedScroll=d.displayTypeProperties[b.MIN_ASINS_FOR_EXPANDED_SCROLL]);d.dimSubType=m.dimensionDisplaySubType;d.currDimCombID=d.initialTwisterState.getCurrentDimCombID();M=d.twisterControllerHandle.logger;z=d.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;h=y(b.ID_SELECTOR+"counter-label-"+d.dimName+" .selection");c=b.ID_SELECTOR+d.dimName+b.CHAR_UNDERSCORE;q=y(b.ID_SELECTOR+"counterSwatchSection-"+d.dimName);w=d.dimValuesDisplayData.length;F=y(c+d.currDimCombID.split(b.CHAR_UNDERSCORE)[d.dimOrder]);
x=y(c+d.currDimCombID.split(b.CHAR_UNDERSCORE)[d.dimOrder]);n=!1;(function(){y(".counterSwatch").each(function(c){c=y(this);c.parent().is("a")&&c.unwrap()})})();(function(){var a=b.AUI_EVENT_FOR_COUNTER;if(t.isTouchDevice()){var q=!1,e="";u.declarative(a,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_TOUCHSTART,b.EVENT_TYPE_TOUCHEND,b.EVENT_TYPE_TOUCHMOVE],function(c){c.data&&(c.data.dimDisplayType=b.TWISTER_DIMENSION_VIEW_COUNTER);c.type===b.EVENT_TYPE_CLICK?k(c):c.type===b.EVENT_TYPE_TOUCHSTART?(e=c.data.dimValueSelectedID,
q=!1):c.type===b.EVENT_TYPE_TOUCHMOVE?q=!0:c.type!==b.EVENT_TYPE_TOUCHEND||q||e!==c.data.dimValueSelectedID||(e="",q=!1,k(c));n=!1})}else u.declarative(a,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_MOUSEENTER,b.EVENT_TYPE_MOUSELEAVE],function(a){a.data&&(a.data.dimDisplayType=b.TWISTER_DIMENSION_VIEW_COUNTER);a.type===b.EVENT_TYPE_CLICK?k(a):a.type===b.EVENT_TYPE_MOUSEENTER?(d.twisterControllerHandle&&d.twisterControllerHandle.handleMouseOver(a.data),a=a.data[b.STRING_DIM_VALUE_INDEX],y(c+a).css("cursor","pointer"),
a!=d.currDimCombID.split(b.CHAR_UNDERSCORE)[d.dimOrder]&&(y(c+a).css("z-index",1),l(!0,a),h.html(d.dimValuesDisplayData[a]))):a.type===b.EVENT_TYPE_MOUSELEAVE&&(d.twisterControllerHandle&&d.twisterControllerHandle.handleMouseOut(a.data,a.data[b.STRING_DIM_INDEX],a.data[b.STRING_DIM_VALUE_INDEX]),a=a.data[b.STRING_DIM_VALUE_INDEX],a!=d.currDimCombID.split(b.CHAR_UNDERSCORE)[d.dimOrder]&&(y(c+a).css("z-index",0),l(!1,a),a=d.dimValuesDisplayData[d.currDimCombID.split(b.CHAR_UNDERSCORE)[d.dimOrder]],
h.html(a)));n=!1})})();d.expandedViewEnabled&&w>=d.minAsinsForExpandedView&&(E=new a({minHeightForExpandedSection:55,maxHeightForExpandedSection:155,maxHeightForExpandedSectionInView:101,scrollAnimationDuration:500,expanderSection:q,useExpanderScrollView:w>=d.minAsinsForExpandedScroll-1,minAsinsForExpandedView:d.minAsinsForExpandedView,expanderButtonReplacementIndex:d.minAsinsForExpandedView-2,dimValuePrefix:c,initSelectedID:d.currDimCombID,swatchImageSize:54,swatchImageMargin:10,expanderButton:v,
collapseButton:p,dimDisplayType:"counter",logger:M,dimOrder:d.dimOrder}));B.CounterScenesController&&B.CounterScenesController.registerCounter(d)}});z.when("A","twister-utils","twister-string-constants","twister-expander").register("twister-shelf",function(u,t,b,a){return function(g,m){function k(){A=new a({minHeightForExpandedSection:p.minHeightForExpandedSection,maxHeightForExpandedSection:p.maxHeightForExpandedSection,maxHeightForExpandedSectionInView:p.maxHeightForExpandedSection-74,scrollAnimationDuration:500,
expanderSection:x,useExpanderScrollView:F>=p.minAsinsForExpandedScroll-1,minAsinsForExpandedView:p.minAsinsForExpandedView,expanderButtonReplacementIndex:p.expanderButtonReplacementIndex,dimValuePrefix:n,initSelectedID:p.currDimCombID,swatchImageSize:74,swatchImageMargin:17,expanderButton:c,collapseButton:q,expanderHidesVariation:p.expanderHidesVariation,dimDisplayType:"shelf",logger:E,dimOrder:p.dimOrder,expanderButtonPostCollapse:p.expanderButtonPostCollapse,synchronousPreExpanderCallback:function(){x.removeClass("twisterShelf_isCollapsed");
x.removeClass("twisterShelf_isCollapsedAnimated");x.addClass("twisterShelf_isExpanded");x.addClass("twisterShelf_isExpandedAnimated");r()},synchronousPostExpanderCallback:function(){e();x.removeClass("twisterShelf_isExpandedAnimated")},synchronousPreCollapseCallback:function(){x.removeClass("twisterShelf_isExpanded");x.removeClass("twisterShelf_isExpandedAnimated");x.addClass("twisterShelf_isCollapsed");x.addClass("twisterShelf_isCollapsedAnimated");r()},synchronousPostCollapseCallback:function(){e();
x.removeClass("twisterShelf_isCollapsedAnimated")}})}function f(c){if(!c)return-1;c=c.split(b.CHAR_UNDERSCORE);return c[c.length-1]}function l(c){return{dimIndex:p.dimOrder,dimValueIndex:c?f(c.id):null,dimDisplayType:b.TWISTER_DIMENSION_VIEW_SHELF,dimValueSelectedID:c.id}}function e(){r();G.bind(b.EVENT_TYPE_CLICK,function(c){c=l(c.currentTarget);I=h(b.ID_SELECTOR+c.dimValueSelectedID);var a=t.reconstructCombinationWithDimValue(p.currDimCombID,c.dimIndex,c.dimValueIndex);p.currDimCombID!=a&&p.twisterControllerHandle&&
p.twisterControllerHandle.handleClick(c)});t.isTouchDevice()||(G.bind(b.EVENT_TYPE_MOUSEENTER,function(c){c=l(c.currentTarget);p.twisterControllerHandle&&p.twisterControllerHandle.handleMouseOver(c);c=c[b.STRING_DIM_VALUE_INDEX];var a=h(n+c);a.css("cursor","pointer");c!=p.currDimCombID.split(b.CHAR_UNDERSCORE)[p.dimOrder]&&(a.addClass("hoverSwatch"),w.html(p.dimValuesDisplayData[c]))}),G.bind(b.EVENT_TYPE_MOUSELEAVE,function(c){c=l(c.currentTarget);p.twisterControllerHandle&&p.twisterControllerHandle.handleMouseOut(c,
c[b.STRING_DIM_INDEX],c[b.STRING_DIM_VALUE_INDEX]);c=c[b.STRING_DIM_VALUE_INDEX];var a=h(n+c);c!=p.currDimCombID.split(b.CHAR_UNDERSCORE)[p.dimOrder]&&(a.removeClass("hoverSwatch"),c=p.dimValuesDisplayData[p.currDimCombID.split(b.CHAR_UNDERSCORE)[p.dimOrder]],w.html(c))}))}function r(){G.unbind(b.EVENT_TYPE_CLICK);t.isTouchDevice()||(G.unbind(b.EVENT_TYPE_MOUSEENTER),G.unbind(b.EVENT_TYPE_MOUSELEAVE))}function d(c){var a=c[b.STRING_EVENT_DATA][b.STRING_EVENT_DIV_METADATA][b.TWISTER_EVENT_DATA_DISPLAY_TYPE];
M=h(n+c.dimCombID.split(b.CHAR_UNDERSCORE)[p.dimOrder]);(z=h(".vodd-dim-wrapper").length)&&M.hasClass("shelf_unavailable")&&a===b.TWISTER_DIMENSION_VIEW_SHELF&&u.animate(h(".vodd-dim-wrapper"),{scale:1.1},150,"ease-in",function(){u.animate(h(".vodd-dim-wrapper"),{scale:1},100,"ease-out",function(){})})}function y(c){"undefined"===typeof p.$variationList&&(p.$variationList=h("#"+b.TWISTER_DIMENSION_VIEW_SHELF+"-"+p.dimName+" .twisterShelf_swatch"));for(var a=p.$variationList,n=p.initialTwisterState.getCurrentDimCombID(),
q=parseInt(p.dimOrder),d=[],e=0;e<a.length;e++){5===d.length&&(v(d),d=[]);var k=f(a[e].id),k=t.reconstructCombinationWithDimValue(n,q,k);if(k=p.dimensionToAsinMap[k])c?h(".twisterShelf_container #"+p.dimName+"_"+L[k]+" .twisterShelf_infoSection_slots").length||d.push(k):d.push(k);else{var k=h(a[e]),l,r=a[e];l=p.initialTwisterState.getCurrentDimCombID().split(b.CHAR_UNDERSCORE);var m=[],w=parseInt(p.dimOrder),r=f(r.id);l[w]=r;for(var r=l.join(b.CHAR_UNDERSCORE),r=p.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(r,
w),r=L[r],g=0;g<l.length;g++)w!==g&&m.push(p.dimensionValuesList[g][r[g]]);l=m.join(", ");k.addClass("shelf_unavailable");"undefined"!==typeof l?(m=k.find(".unavailableV2"),m.find(".variation-combination-text").html(l),k.find(".unavailable-text").removeClass("aok-hidden"),k.find(".shelf_loading_placeholder").hide(),m.removeClass("aok-hidden"),k.find(".twisterShelf_infoSection").empty().addClass("aok-hidden")):(k.find(".shelf_loading_placeholder").hide(),k.find(".outofstock-text").removeClass("aok-hidden"),
k.find(".shelf-outofstock").removeClass("aok-hidden"))}}0<d.length&&v(d)}function v(c){var a=E.createFunctionTimer(E.eventTypes.DIM_SUM_LOAD);a.start();var q=function(){a.stop()};0<c.length&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:C,asinList:c,dimTriggeringDimSum:p.dimName,dimSubType:p.dimSubType,dimType:p.dimType,chunk:function(c){if(c&&"object"===typeof c){var a=parseInt(L[c.ASIN][parseInt(p.dimOrder)]),a=h(n+a);if(c.Value&&c.Value.content&&c.Value.content.twisterSlotDiv){var q=
h.trim(c.Value.content.twisterSlotDiv);if(0<q.length){a.removeClass("shelf_unavailable");a.find(".unavailableV2").addClass("aok-hidden");a.find(".outofstock-text").addClass("aok-hidden");a.find(".shelf-outofstock").addClass("aok-hidden");a.find(".unavailable-text").addClass("aok-hidden");c=a.find(".twisterShelf_infoSection");c.empty();c.addClass("aok-hidden");c.append(q);q=a.find(".twisterShelf_infoSection .price_slot_ppu, .twisterShelf_infoSection .deal_slot_ppu");if(q.length){var d=h("<p></p>");
d.append(q);c.append(d);q=a.find(".twisterShelf_infoSection i");a=a.find(".twisterShelf_infoSection .olpWrapper");d=h(".twisterShelf_swatchSection.twisterShelf_isCollapsed");q.length&&a.length&&d.length&&c.addClass("hasAllItems")}c.removeClass("aok-hidden");q=x.find(".twisterShelf_swatch.selectedSwatch .twisterShelf_infoSection");q.length&&(a=q.find("[id*=_price]"),q=q.find(".a-size-mini.[class*=_slot_ppu]"),a.length&&a.hasClass(b.CLASS_FOR_PRICE_SECONDARY)&&a.removeClass(b.CLASS_FOR_PRICE_SECONDARY).addClass(b.CLASS_FOR_PRICE_SELECTED),
q.length&&q.addClass(b.CLASS_FOR_PRICE_SELECTED));p.dualDimensionShelf&&(a=c.find(".twister_swatch_price").find(".a-size-mini"),q=a.text().replace(/\s+/g,"").length,c.find("i").length&&7<q&&a.addClass("twisterShelf_dual_dim_price_long"))}}}},success:function(c,a,b,n){q()},error:q,abort:q})}var p=this,h=u.$,c,q,w,n,x,F,G,L,E,M,z,I,B,A;p.updateView=function(c){if(c[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_CLICK&&p.currDimCombID!=c[b.STRING_DIM_COMB_ID]){for(var a=c[b.STRING_EVENT_DATA][b.STRING_EVENT_DIM_INFO][b.STRING_DIMENSION_VALUES_DATA][p.dimOrder],
q=0;q<p.$variationList.length;q++){var e=h(p.$variationList[q]);e.find("twisterShelf_infoSection").addClass("shelf_loading_placeholder");e.find("twisterShelf_infoSection").removeClass("aok-hidden");e.find("twisterShelf_infoSection").addClass("twisterShelf_placeholder_price");e.find("twisterShelf_infoSection").addClass("twisterShelf_placeholder_badge");e.find("unavailableV2").addClass("aok-hidden");e.find("twister_swatch_price").addClass("aok-hidden")}w.html(a);I=h(n+c.dimCombID.split(b.CHAR_UNDERSCORE)[p.dimOrder]);
I.removeClass("hoverSwatch");B.removeClass("selectedSwatch");I.addClass("selectedSwatch");d(c);y(!1);p.currDimCombID=c[b.STRING_DIM_COMB_ID];null!=A&&(A.updateSelectedVariation(p.currDimCombID,I),A.isCollapsed?A.handleVariationSwap(!0):A.scrollVariationIntoView());B=I}};p.onInitializeTwister=function(){u.loadDescendantImagesManually(x);y(!1)};p.dimOrder=m[b.STRING_DIM_ORDER];p.dimName=m[b.STRING_DIM_NAME];p.dimensionsMap=m[b.STRING_DIMENSIONS_MAP];p.dimNameDisplayString=m[b.STRING_DIMENSION_DISPLAY_STRING];
p.dimValuesDisplayData=m[b.STRING_DIMENSION_VALUES_DATA];p.twisterControllerHandle=m[b.STRING_TWISTER_CONTROLLER_HANDLE];p.initialTwisterState=m[b.STRING_TWISTER_INITIAL_STATE_KEY];p.expandedViewEnabled=g[b.INIT_DATA_DISPLAY_TYPE_PROPERTIES][p.dimOrder][b.EXPANDED_VIEW_ENABLED];p.dimensionToAsinMap=p.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;"IMAGE"===m[b.DIMENSION_SUB_TYPE]?(p.minAsinsForExpandedView=g[b.INIT_DATA_DISPLAY_TYPE_PROPERTIES][p.dimOrder][b.MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE],
p.minAsinsForExpandedScroll=g[b.INIT_DATA_DISPLAY_TYPE_PROPERTIES][p.dimOrder][b.MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE]):(p.minAsinsForExpandedView=g[b.INIT_DATA_DISPLAY_TYPE_PROPERTIES][p.dimOrder][b.MIN_ASINS_FOR_EXPANDED_VIEW_TEXT],p.minAsinsForExpandedScroll=g[b.INIT_DATA_DISPLAY_TYPE_PROPERTIES][p.dimOrder][b.MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT]);p.numberOfDimensions=h(".twisterShelf_container").length+h(".twisterCounter_container").length;2===p.numberOfDimensions?(p.expanderButtonReplacementIndex=
p.minAsinsForExpandedView-2,p.expanderHidesVariation=!0,p.expanderButtonPostCollapse=!0,p.dualDimensionShelf=!0,p.minHeightForExpandedSection=89,p.maxHeightForExpandedSection=209):(p.expanderButtonReplacementIndex=p.minAsinsForExpandedView-1,p.expanderHidesVariation=!1,p.expanderButtonPostCollapse=!1,p.dualDimensionShelf=!1,p.minHeightForExpandedSection=g[b.INIT_DATA_DISPLAY_TYPE_PROPERTIES][p.dimOrder][b.MIN_HEIGHT_EXPANDED_SECTION],p.maxHeightForExpandedSection=g[b.INIT_DATA_DISPLAY_TYPE_PROPERTIES][p.dimOrder][b.MAX_HEIGHT_EXPANDED_SECTION]);
p.dimType=b.TWISTER_DIMENSION_VIEW_SHELF;p.dimSubType=m[b.DIMENSION_SUB_TYPE];p.currDimCombID=p.initialTwisterState.getCurrentDimCombID();E=p.twisterControllerHandle.logger;L=p.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;p.dimensionValuesList=p.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;G=h(b.ID_SELECTOR+"shelfSwatchSection-"+p.dimName+" .twisterShelf_swatch");w=h(b.ID_SELECTOR+"shelf-label-"+p.dimName+" .twisterShelf_dimension_label span");
n=b.ID_SELECTOR+p.dimName+b.CHAR_UNDERSCORE;x=h(b.ID_SELECTOR+"shelfSwatchSection-"+p.dimName);F=p.dimValuesDisplayData.length;B=h(n+p.currDimCombID.split(b.CHAR_UNDERSCORE)[p.dimOrder]);I=h(n+p.currDimCombID.split(b.CHAR_UNDERSCORE)[p.dimOrder]);c=h(b.ID_SELECTOR+"shelfSwatchSection-"+p.dimName+" .expanderButton");q=h(b.ID_SELECTOR+"shelfSwatchSection-"+p.dimName+" .collapseButton");(function(){h(".twisterShelf_swatch").each(function(c){c=h(this);c.parent().is("a")&&c.unwrap()})})();e();p.expandedViewEnabled&&
F>=p.minAsinsForExpandedView&&k()}});z.when("A","a-popover","twister-string-constants","twister-utils").register("twister-vodd-popover",function(u,t,b,a){return function(g){function m(a,b){v.eventListener&&v.eventListener.handlePopoverEvent&&v.eventListener.handlePopoverEvent(a,b)}function k(a){m(b.EVENT_TYPE_SHOWPOPOVER,a);var d="bottom"===v.displayPosition?"vodd-modified-popover":"vodd-modified-top-popover";a.popover.$container.hasClass(d)||a.popover.$container.addClass(d);e(a.popover.$container)}
function f(a){m(b.EVENT_TYPE_HIDEPOPOVER,a);a.popover.$trigger.blur()}function l(a){e(a.popover.$container);m(b.EVENT_TYPE_UPDATEPOPOVERPOSITION,a)}function e(a){var b=y.get(0).getBoundingClientRect(),c,q;B.pageYOffset?(c=B.pageYOffset,q=B.pageXOffset):"CSS1Compat"===(document.compatMode||"")?(c=document.documentElement.scrollTop,q=document.documentElement.scrollLeft):(c=document.body.scrollTop,q=document.body.scrollLeft);c="bottom"===v.displayPosition?b.bottom+c:b.top+c-a.height();var d=b.right-
b.left,b=b.left+q;a&&a.css({top:c+"px",left:b+"px",width:d+"px"})}var r,d=u.$,y,v={name:null,trigger:null,eventListener:null,displayPosition:"bottom",positionOnTwisterContainer:!0};this.getHandle=function(){return r};g&&d.extend(v,g);if(!v.name)throw"Popover name should not be null";if(!v.trigger)throw"Popover trigger should not be null";(function(){var b="triggerBottom";"top"===v.displayPosition&&(b="triggerTop");b={closeButton:!1,closeButtonLabel:"close",position:b,name:v.name,popoverLabel:v.name,
activate:a.isTouchDevice()?"onmouseover":"onclick"};v.height&&d.extend(b,{height:v.height});r=t.create(v.trigger,b)})();(function(){u.on("a:popover:afterShow:"+v.name,k);u.on("a:popover:afterHide:"+v.name,f);u.on("a:popover:afterUpdatePosition:"+v.name,l);var a=function(){r&&r.isActive()&&e(r.$container)};u.on("a:pageUpdate",a);d(B).resize(a)})();y=v.positionOnTwisterContainer?d("#twister"):v.trigger}});z.when("A","twister-js-init-mason-data").register("accessibility-helper",function(u,t){function b(){clearTimeout(m.timeout);
m.innerHTML="";m.timeout=setTimeout(function(){m.innerHTML=m.textString},10)}var a=u.$,g=t.isTablet,m=g?null:{};!g&&a(document).ready(function(){m=document.createElement("div");null!=m&&(m.className="twisterAccess",a(m).attr("aria-live","polite"),a(m).attr("aria-atomic","true"),document.body.appendChild(m))});return{announceText:function(a){null!=m&&(m.textString=a,setTimeout(b,0))}}});z.when("A").register("twister-expander",function(u){return function(t){function b(){"function"===typeof c.synchronousPreCollapseCallback&&
c.synchronousPreCollapseCallback();c.logger.logImpression(c.logger.eventTypes.COLLAPSE_BUTTON_CLICK,h);c.expanderSection.height();c.expanderSection.animate({height:c.minHeightForExpandedSection},{duration:c.scrollAnimationDuration,queue:!1,complete:function(){c.expanderSection.css("overflow-y","hidden");c.expanderSection.css("overflow","hidden");c.expanderHidesVariation&&!c.expanderButtonPostCollapse||c.expanderButton.removeClass("aok-hidden");"function"===typeof c.synchronousPostCollapseCallback&&
c.synchronousPostCollapseCallback()}});c.expanderSection.animate({scrollTop:0},{duration:c.scrollAnimationDuration,queue:!1});f.isCollapsed=!0;c.expanderHidesVariation?g():c.collapseButton.addClass("aok-hidden");f.handleVariationSwap()}function a(){v.hasClass("aok-hidden")&&(v.removeClass("aok-hidden"),c.expanderButton.prev().insertAfter(r))}function g(){f.isCollapsed?(c.collapseButton.addClass("aok-hidden"),c.expanderHidesVariation&&y.addClass("aok-hidden"),c.expanderButtonPostCollapse||c.expanderButton.removeClass("aok-hidden")):
(c.expanderButton.addClass("aok-hidden"),y.removeClass("aok-hidden"),c.collapseButton.removeClass("aok-hidden"))}function m(){p.bind("click",function(a){c.expanderButton[0].id==a.currentTarget.id||f.isCollapsed||b()})}var k=u.$,f=this,l,e,r,d,y,v,p=k(".expanderButton"),h,c={minHeightForExpandedSection:50,maxHeightForExpandedSection:100,maxHeightForExpandedSectionInView:null,scrollAnimationDuration:500,expanderSection:null,useExpanderScrollView:!0,minAsinsForExpandedView:null,expanderButtonReplacementIndex:null,
dimValuePrefix:null,initSelectedID:null,swatchImageSize:null,swatchImageMargin:null,expanderButton:null,collapseButton:null,expanderHidesVariation:!0,expanderButtonPostCollapse:!1,synchronousPreExpanderCallback:null,synchronousPostExpanderCallback:null,synchronousPreCollapseCallback:null,synchronousPostCollapseCallback:null,dimDisplayType:null,logger:null,dimOrder:null};f.handleExpand=function(){"function"===typeof c.synchronousPreExpanderCallback&&c.synchronousPreExpanderCallback();c.logger.logImpression(c.logger.eventTypes.EXPAND_BUTTON_CLICK,
h);var a=c.expanderSection.height();f.isCollapsed=!1;f.handleVariationSwap();c.expanderHidesVariation?g():c.expanderButton.addClass("aok-hidden");if(c.useExpanderScrollView)c.expanderSection.height(a).animate({height:c.maxHeightForExpandedSection},{duration:c.scrollAnimationDuration,queue:!1,complete:function(){c.expanderSection.css("overflow-y","auto");f.scrollVariationIntoView();c.expanderHidesVariation||c.collapseButton.removeClass("aok-hidden");"function"===typeof c.synchronousPostExpanderCallback&&
c.synchronousPostExpanderCallback()}});else{var b=c.expanderSection.css("height","auto").height();c.expanderSection.height(a).animate({height:b},{duration:c.scrollAnimationDuration,queue:!1,complete:function(){c.expanderHidesVariation||c.collapseButton.removeClass("aok-hidden");"function"===typeof c.synchronousPostExpanderCallback&&c.synchronousPostExpanderCallback()}})}};f.handleVariationSwap=function(b){f.isCollapsed&&(l>=d||v.hasClass("aok-hidden"))?(b&&a(),b=v,l==d&&c.expanderHidesVariation?(y.removeClass("aok-hidden"),
r=v):l>d&&c.expanderHidesVariation?(r=c.expanderButton,y.addClass("aok-hidden")):l==d-1&&c.expanderHidesVariation?(v.removeClass("aok-hidden"),b=y,r=k(c.dimValuePrefix+(l-1))):r=c.expanderHidesVariation?k(c.dimValuePrefix+(l-1)):l==d?c.expanderButton:k(c.dimValuePrefix+(l-1)),e.insertBefore(c.expanderButton),b.addClass("aok-hidden")):f.isCollapsed||a()};f.scrollVariationIntoView=function(){var a=e.offset().top,b=c.expanderSection.offset().top,n=c.expanderSection.scrollTop(),a=a-b,n=n+a;0>a?c.expanderSection.animate({scrollTop:n},
{duration:c.scrollAnimationDuration,queue:!1}):a>c.maxHeightForExpandedSectionInView&&(n-=c.swatchImageSize+c.swatchImageMargin,c.expanderSection.animate({scrollTop:n},{duration:c.scrollAnimationDuration,queue:!1}))};f.updateSelectedVariation=function(a,b){null!=b&&(e=b);null!=a&&(l=a.split("_")[c.dimOrder])};(function(){t&&k.extend(c,t);if(!c.collapseButton)throw"Expander collapseButton should not be null";if(!c.expanderButton)throw"Expander expanderButton should not be null";if(!c.expanderSection)throw"Expander expanderSection should not be null";
if(!c.initSelectedID)throw"Expander initSelectedID should not be null";if(!c.minAsinsForExpandedView)throw"Expander minAsinsForExpandedView should not be null";if(!c.dimValuePrefix)throw"Expander dimValuePrefix should not be null";if(!c.swatchImageSize)throw"Expander swatchImageSize should not be null";if(!c.swatchImageMargin)throw"Expander swatchImageMargin should not be null";if(!c.expanderButtonReplacementIndex)throw"Expander expanderButtonReplacementIndex should not be null";if(!c.dimDisplayType)throw"Expander dimDisplayType should not be null";
if(!c.logger)throw"Expander Logger should not be null";c.dimOrder||(c.dimOrder=0);h={dimDisplayType:c.dimDisplayType};c.logger.logImpression(c.logger.eventTypes.EXPANDER,h);d=c.expanderButtonReplacementIndex;y=k(c.dimValuePrefix+d);v=k(c.dimValuePrefix+(d-1));l=c.initSelectedID.split("_")[c.dimOrder];e=k(c.dimValuePrefix+c.initSelectedID.split("_")[c.dimOrder]);f.isCollapsed=!0;c.expanderButton.click(function(){f.handleExpand()});c.collapseButton.click(function(){b()});m();f.handleVariationSwap()})()}});
z.when("A","twisterModule","dp-js-logger").register("twister-view-registry",function(u,t,b){var a=this;a.logger=new b("DpTwisterViewRegistry");var g=u.createClass({init:function(a,b){this.twisterControllerHandle=a;this.externalViewName=b;this.dimensions=a.twisterJSInitData.dimensions;this.dimensionToAsinMap=a.twisterJSInitData.dimToAsinMapData;this.dimensionValues=a.twisterJSInitData.dimensionValuesData;this.dimensionAsinToValuesMap=a.twisterJSInitData.dimensionValuesDisplayData;this.variationValues=
a.twisterJSInitData.variation_values;this.asinVariationValues=a.twisterJSInitData.asin_variation_values;this.parentAsin=a.twisterJSInitData.parent_asin;this.currentDimCombID=a.twisterJSInitData.currentDimCombID;this.currentAsin=a.twisterJSInitData.current_asin;this.isConsolesOrAccessories=a.twisterJSInitData.isConsolesOrAccessories;this.getControllerInterface=function(){function b(a,f,d){return{dimIndex:a,dimValueIndex:f,dimDisplayType:d}}return{handleClick:function(e,f,d){e=b(e,f,d);a.handleExternalViewClick(e,
this.externalViewName)},handleMouseOver:function(e,f,d){e=b(e,f,d);a.handleExternalViewMouseOver(e,this.externalViewName)},handleMouseOut:function(e,f,d){e=b(f);a.handleExternalViewMouseOut(e,e.dimIndex,e.dimValueIndex,this.externalViewName)}}}},updateView:function(a,b,l){},updateViewAfterTwisterUpdate:function(a,b,l){}}),m=B.twisterController;this.createAndRegisterExternalView=function(b){var f=new g(m,b);m.registerExternalView(f,b);a.logger.logCounter("TwisterExternalView_"+b,1);return f};return this});
z.when("A","twisterModule","dp-js-logger").execute(function(u,t,b){var a=u.$,g=u.state("URL-Refresh-State");t=new b(null,this,!0);g&&g.isUrlRefreshEnable&&(B.history&&B.history.replaceState?(t.logImpression(t.eventTypes.HISTORY_API_SUPPORTED,null),u.on("a:pageUpdate",function(){if(DetailPage&&DetailPage.StateController&&"function"===typeof DetailPage.StateController.getState){var b=DetailPage.StateController.getState()||{},k=b.current_asin;if(k){for(var f=B.location.search,l={},f=f.substring(f.indexOf("?")+
1).split("&"),e=0;e<f.length;e++){var r=f[e].split("=");r[0]&&0<=r[0].length&&(l[decodeURIComponent(r[0])]=decodeURIComponent(r[1]))}"th"in l||(l.th=1);"psc"in l&&delete l.psc;e=f=!1;for(i=0;i<b.dimensionSelectionData.length;i++)if(r=b.dimensionSelectionData[i],1==parseInt(r.isRequired,10)&&(e=!0,0==parseInt(r.isSelected,10))){f=!0;break}!f&&e&&(l.psc=1);b="";l=(b=a.param(l))&&0<b.length?"?"+b:b;urlPath=B.location.pathname.replace(new RegExp(g.landingAsin,"i"),k);B.history.replaceState({},document.title,
urlPath+l);g.landingAsin=k}}})):t.logImpression(t.eventTypes.HISTORY_API_NOT_SUPPORTED,null))})})})(function(){var z=window.AmazonUIPageJS||window.P,B=z._namespace||z.attributeErrors;return B?B("DetailPageTwisterAssets"):z}(),window);